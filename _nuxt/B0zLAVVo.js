import{F as ne,r as T,k as x,y as L,z as k,A as i,G as U,B as N,H as F,I as Z,J as W,K as se,L as oe,o as ie,M as le,N as V,O as K,C as Y}from"#entry";const ce=()=>{const r=async f=>{try{const{default:a}=await ne(async()=>{const{default:m}=await import("./DeY5ceUu.js").then(w=>w.i);return{default:m}},[],import.meta.url),{data:{text:_}}=await a.recognize(f,"eng",{logger:m=>console.log(m),tessedit_pageseg_mode:6,tessedit_char_whitelist:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%+.,/'-(): "}),h=e(_),t=u(h),d=t.filter(m=>m.category==="unknown"),c=t.map(m=>{const w=O(m.raw),R=b(m.raw);return{...m,id:w.id||null,display:R,strict_ok:w.ok,strict_category:w.category||m.category,why:w.why||""}}),S=c.filter(m=>!m.strict_ok);return d.length>0||S.length>0?{success:!1,error:I({unknowns:d,mismatches:S}),text:_,parsed:c}:{success:!0,text:_,parsed:c.map(({strict_category:m,...w})=>({...w,category:m,display:b(w.raw)}))}}catch(a){return console.error("OCR Error:",a),{success:!1,error:a.message,text:"",parsed:[]}}},e=f=>{const _=f.normalize("NFKC").replace(/\r/g,`
`).replace(/[“”]/g,'"').replace(/[’]/g,"'").replace(/\+\s+(\d+)/g,"+$1").replace(/\+(\d+)\s+(\d{1,2})%/g,"+$1.$2%").replace(/([A-Za-z])([+\-]\d)/g,"$1 $2").replace(/(\d),(\d{3})(?=[^\d]|$)/g,"$1$2").split(`
`).map(g=>g.trim()).filter(Boolean),h="['\"`‘’“”\\s]*",t="(?:[@©®oOaA]|8(?=\\s+[A-Za-z])|9(?=\\s+[A-Za-z]))",d=new RegExp(`^${h}${t}(?![A-Za-z0-9])\\s?`),c=new RegExp(`^${h}${t}(?![A-Za-z0-9])\\s?`),S=/^[\s"'`‘’“”]+/,m=/(Item Tier|tem Tier|Restricted Trading|Bound to Character|Untradable|Ancient|Radiant|Bracelet Bonus|Bonus can(?:not)? be granted\.?|Ark Passive(?: Points)?(?: Effect)?|^Leap \+\d+$)/i,w=g=>g.replace(/\(Shield[^)]*\)/gi,l=>{const E=/HP\s*Regen/i.test(l),P=/Incoming\s+Damage\s+Reduction/i.test(l);return E&&P?"(Shield, HP Regen, Incoming Damage Reduction)":l}),R=g=>{let l=g;l=l.replace(/^(Crit(?!\s*(?:Rate|Damage|Hit))|Specialization|Swiftness|Domination|Endurance|Expertise)\s+(\d{2,3})\b/i,(P,M,$)=>`${M} +${$}`),l=l.replace(/^(Intelligence|Strength|Dexterity|Vitality)\s+(\d{3,6})\b/i,(P,M,$)=>`${M} +${$}`),l=l.replace(/^(Max HP)\s+(\d{4,6})\b/i,(P,M,$)=>`${M} +${$}`);const E=new RegExp("^("+["Intelligence","Strength","Dexterity","Vitality","Max HP","Weapon Power","Crit","Specialization","Swiftness","Domination","Endurance","Expertise"].join("|")+")\\s*[:;=]\\s*(\\d+)\\b","i");return l=l.replace(E,(P,M,$)=>`${M} +${$}`),l=w(l),l=l.replace(/\bAtk\s*\/\s*Move Speed\b/gi,"Atk./Move Speed"),l=l.replace(/\bAtk_\.?\s*Power\b/gi,"Atk. Power"),l=l.replace(/\bAtk[_·•]\s*/gi,"Atk. "),l},B=[];let D="",p=!1;for(let g=0;g<_.length;g++){let l=_[g];if(m.test(l))continue;const E=d.test(l);if(!p){if(E){p=!0;const P=l.replace(c,"").trim();D=R(P)}continue}if(E){D&&B.push(D.trim());const P=l.replace(c,"").trim();D=R(P)}else{if(m.test(l))continue;l=l.replace(S,""),D+=(D?" ":"")+R(l)}}D&&B.push(D.trim());const y=g=>/^(?:Crit(?!\s*(?:Rate|Damage|Hit))|Specialization|Swiftness)\s*\+\d+(?:\.\d+)?\b/i.test(g),H=g=>/^(Intelligence|Strength|Dexterity)\s*\+\d+/i.test(g),X=g=>/^Vitality\s*\+\d+/i.test(g),q=g=>/^Max HP\s*\+\d{4,6}$/i.test(g),Q=g=>/\bAtk\.?\/Move Speed\b/i.test(g),ee=g=>/(Targets that already have|party-wide|Ally|Enhancement|target's (?:Defense|Crit Resistance|Crit Damage)\s*-[\d.]+%)/i.test(g),te=g=>/(Additional Damage|Crit Rate|Crit Damage|Crit Hit Damage|Weapon Power|Outgoing Damage|Back Attack|Frontal|Non-direction(?:al)?|Skill cooldown)/i.test(g),re=g=>/(Domination|Endurance|Expertise|Combat Resource|Natural Recovery|Mag\. Defense|Phy\. Defense|Challenge or lower|Paralysis|Push Immunity|Movement Skill\/Stand Up cooldown|Incoming Damage from Challenge or lower monsters|Combat HP Recovery)/i.test(g),ae=g=>g.replace(/\s+%/g,"%").replace(/\s{2,}/g," ").trim();return B.map(g=>{const l=ae(g);let E="unknown";return H(l)?E="basic":X(l)||q(l)?E="low-value":y(l)?E="combat":ee(l)?E="support":Q(l)?E="special":te(l)?E="dps":re(l)&&(E="low-value"),{raw:l,category:E}})},u=f=>{const a=_=>_.replace(/^(\d)(\d{3})$/,"$1,$2");return f.map(({raw:_,category:h})=>{let t=_;return t=t.replace(/^['"“”‘’]+(?=\S)/,""),t=t.replace(new RegExp(`(?<=\\S)['"“”‘’]+$`),""),t=t.replace(/(\.\s*)['"“”‘’]+(?=\S)/g,"$1"),t=t.replace(/[–−]/g,"-"),t=t.replace(/\bOn hit\.\s*(?=[A-Z])/gi,"On hit, "),t=t.replace(/\bAly\b/gi,"Ally"),t=t.replace(/getting\s+ht\b/gi,"getting hit"),t=t.replace(/\bAtk\s*\/\s*Move Speed\b/gi,"Atk./Move Speed"),t=t.replace(/(\d)\.\s*(\d+)%/g,"$1.$2%"),t=t.replace(/\bfor\s+Ss\b\.?/gi,"for 5s."),t=t.replace(/\bfor\s+5\b\.?/gi,"for 5s."),t=t.replace(/(Cooldown:\s*)(60|70|80)\b(?!s)/gi,"$1$2s"),t=t.replace(/(Cooldown:\s*)(60|70|80)5\b/gi,"$1$2s"),t=t.replace(/\+(\d)\s(\d{1,2})%/g,"+$1.$2%"),t=t.replace(/\(Shield[^)]*\)/gi,c=>{const S=/HP\s*Regen/i.test(c),m=/Incoming\s+Damage\s+Reduction/i.test(c);return S&&m?"(Shield, HP Regen, Incoming Damage Reduction)":c}),t=t.replace(/Bonus vs\. Demons\/Archdemon/gi,"Bonus vs. Demon/Archdemon"),t=t.replace(/^Damage to Challenge or lower monsters\s*-\s*(4|5|6)%\.?$/i,"Damage to Challenge or lower monsters +$1%."),t=t.replace(/^Incoming Damage from Challenge or lower monsters\s*\+\s*(6|8|10)%\.?$/i,"Incoming Damage from Challenge or lower monsters -$1%."),t=t.replace(/(Incoming Damage from Challenge or lower monsters\s*-\s*)8\s*5%/i,"$18%"),t=t.replace(/\b(\d{1,3})\.(\d{3})\b/g,"$1,$2"),t=t.replace(/When your HP is 50% or higher\.\s*upon hit,/i,"When your HP is 50% or higher, upon hit,"),t=t.replace(/(On hit, Weapon Power \+)(\d{4})(, Atk\.\/Move Speed \+1% for 10s\. \(Max\. 6 stacks\))/,(c,S,m,w)=>S+a(m)+w),t=t.replace(/^(Weapon Power \+)(\d{4})(\. Upon hit, Weapon Power \+(?:130|140|150) for 120s every 30s\. \(Max\. 30 stacks\))$/,(c,S,m,w)=>S+a(m)+w),t=t.replace(/^Weapon Power \+(\d{4})\.(\s*When your HP is 50% or higher, upon hit, Weapon Power \+)(\d{4})(\s*for 5s\.)$/,(c,S,m,w,R)=>`Weapon Power +${a(S)}.${m}${a(w)}${R}`),t=t.replace(/\bNon-direction\b(?=\s+Skill Damage)/gi,"Non-directional"),t=t.replace(/\s*Bonus can(?:not)? be granted\.?.*$/i,""),t=t.replace(/\s*Ark Passive(?: Points)?(?: Effect)?.*$/i,""),t=t.replace(/\s*Leap \+\d+\s*$/i,""),new RegExp("^(?:Intelligence|Strength|Dexterity|Vitality|Max HP|Crit(?!\\s*(Rate|Damage|Hit))|Specialization|Swiftness|Domination|Endurance|Expertise)\\s*\\+\\d{2,6}\\.$","i").test(t)&&(t=t.replace(/\.$/,"")),t=t.replace(/\s+%/g,"%").replace(/\s{2,}/g," ").trim(),{raw:t,category:h}})},b=f=>{let a=f;const _=[[/\bcrit hit damage\b/gi,"Crit Hit Damage"],[/\bcrit rate\b/gi,"Crit Rate"],[/\bcrit damage\b/gi,"Crit Damage"],[/\bintelligence\b/gi,"Intelligence"],[/\bstrength\b/gi,"Strength"],[/\bdexterity\b/gi,"Dexterity"],[/\bvitality\b/gi,"Vitality"],[/\bcrit\b/gi,"Crit"],[/\bspecialization\b/gi,"Specialization"],[/\bswiftness\b/gi,"Swiftness"],[/\bdomination\b/gi,"Domination"],[/\bendurance\b/gi,"Endurance"],[/\bexpertise\b/gi,"Expertise"],[/\bmax hp\b/gi,"Max HP"],[/\bweapon power\b/gi,"Weapon Power"],[/\batk\.?\s*\/\s*move speed\b/gi,"Atk./Move Speed"],[/\boutgoing damage\b/gi,"Outgoing Damage"],[/\bnon-directional\b/gi,"Non-directional"],[/\bnon-direction\b/gi,"Non-directional"],[/\bback attack\b/gi,"Back Attack"],[/\bfrontal attack\b/gi,"Frontal Attack"],[/\bskill cooldown\b/gi,"Skill cooldown"],[/\bally atk\. power enhancement effect\b/gi,"Ally Atk. Power Enhancement Effect"],[/\bally damage enhancement effect\b/gi,"Ally Damage Enhancement Effect"],[/\bally atk\. power enhancement\b/gi,"Ally Atk. Power Enhancement"],[/\bincoming damage reduction\b/gi,"Incoming Damage Reduction"],[/\bhp regen\b/gi,"HP Regen"],[/\bshield\b/gi,"Shield"],[/\bdemon\/archdemon\b/gi,"Demon/Archdemon"]];for(const[h,t]of _)a=a.replace(h,t);return a=a.replace(/\s+%/g,"%").replace(/\s{2,}/g," ").trim(),a},v=f=>`(?:${f.map(a=>String(a).replace(/(\d)(?=(\d{3})+$)/g,"$1,")).join("|")}|${f.join("|")})`,s={BASIC_MAIN:/^(Intelligence|Strength|Dexterity)\s*\+(\d{4,5})$/i,BASIC_VIT:/^Vitality\s*\+(\d{4,5})$/i,COMBAT:/^(Crit(?!\s*(?:Rate|Damage|Hit))|Specialization|Swiftness)\s*\+(\d{2,3})\.?$/i,ATK_MOVE:/^Atk\.\/Move Speed \+(?:4|5|6)%\.?$/i,ADDITIONAL_DMG:/^Additional Damage \+(?:3\.00|3\.50|4\.00)%\.?$/i,CRIT_DMG:/^Crit Damage \+(?:6\.80|8\.40|10\.00|6\.8|8\.4|10)%\.?$/i,CRIT_RATE:/^Crit Rate \+(?:3\.40|4\.20|5\.00|3\.4|4\.2|5)%\.?$/i,WEAPON_POWER_FLAT:new RegExp(`^Weapon Power \\+${v([7200,8100,9e3])}$`,"i"),BACK_ATTACK:/^Back Attack Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\.?$/i,FRONTAL:/^Frontal (?:Attack|Attck) Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\.?$/i,NON_DIRECTIONAL:/^Non-direction(?:al)? Skill Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\.? Awakening Skills do not apply\.?$/i,ON_HIT_WP_AMS:/^On hit, Weapon Power \+(?:1,?160|1,?320|1,?480), Atk\.\/Move Speed \+1% for 10s\. \(Max\. 6 stacks\)$/i,OUTGOING_SOLO:/^Outgoing Damage \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?$/i,OUTGOING_STAGG:/^Outgoing Damage \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\. Outgoing Damage \+(?:4(?:\.0)?|4\.5|5(?:\.0)?)% to Staggered foes\.?$/i,ADDITIONAL_DEMONS:/^Additional Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\. Bonus vs\. Demon\/Archdemon \+2\.5%\.?$/i,CDMG_PAIR:/^Crit Damage \+(?:6\.8|8\.4|10(?:\.0)?)%\. Crit Hit Damage \+1\.5%\.?$/i,CRATE_PAIR:/^Crit Rate \+(?:3\.4|4\.2|5(?:\.0)?)%\. Crit Hit Damage \+1\.5%\.?$/i,SKILL_COOLDOWN_OUT:/^Skill cooldown \+2%\. Outgoing Damage \+(?:4\.5|5(?:\.0)?|5\.5)%\.?$/i,WP_STACKING:new RegExp(`^Weapon Power \\+${v([6900,7800,8700])}\\. Upon hit, Weapon Power \\+(?:130|140|150) for 120s every 30s\\. \\(Max\\. 30 stacks\\)$`,"i"),WP_HP50:new RegExp(`^Weapon Power \\+${v([7200,8100,9e3])}\\. When your HP is 50% or higher, upon hit, Weapon Power \\+${v([2e3,2200,2400])} for 5s\\.$`,"i"),ALLY_ATK_ENH_EFFECT:/^Ally Atk\. Power Enhancement Effect \+(?:4\.00|5\.00|6\.00)%$/i,ALLY_DMG_ENH_EFFECT:/^Ally Damage Enhancement Effect \+(?:6\.00|7\.50|9\.00)%$/i,ON_HIT_DEBUFF_CD:/^On hit, target's Crit Damage -(?:3\.6|4\.2|4\.8)% for 8s\. This effect is limited to a single application per party\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,ON_HIT_DEBUFF_CR:/^On hit, target's Crit Resistance -(?:1\.8|2\.1|2\.5)% for 8s\. This effect is limited to a single application per party\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,ON_HIT_DEBUFF_DEF:/^On hit, target's Defense -(?:1\.8|2\.1|2\.5)% for 8s\. This effect is limited to a single application per party\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,TARGETS_PROTECTIVE:/^Targets that already have a party-wide protective effect \(Shield[ ,.]?\s*HP Regen[ ,.]?\s*Incoming Damage Reduction\) are granted Outgoing Damage \+(?:0\.9|1\.1|1\.3)% for 5s\. This effect is limited to a single application per party and does not apply to protective effects with no duration\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,LV_COMBAT:/^(Domination|Endurance|Expertise)\s*\+(\d{2,3})$/i,LV_HP_REC:/^Combat HP Recovery \+(?:100|130|160)$/i,LV_RESOURCE:/^Combat Resource Natural Recovery \+(?:8\.00|10\.00|12\.00)%$/i,LV_DEF_MAG:/^Mag\. Defense \+(?:5000|6000|7000)$/i,LV_DEF_PHY:/^Phy\. Defense \+(?:5000|6000|7000)$/i,LV_CHALLENGE_DMG:/^Damage to Challenge or lower monsters \+(?:4|5|6)%\.?$/i,LV_CHALLENGE_IN:/^Incoming Damage from Challenge or lower monsters \-(?:6|8|10)%\.?$/i,LV_IMMUNITY:/^On hit, Paralysis and Push Immunity for (?:80|70|60)s\. \(Cooldown: (?:80|70|60)s\) The effect is removed upon getting hit 1 time\.$/i,LV_MOVE_CD:/^Movement Skill\/Stand Up cooldown \-(?:8|10|12)%\.?$/i,LV_MAX_HP_FLAT:new RegExp(`^Max HP \\+${v([11200,14e3,16800])}$`,"i")},C=f=>f.charAt(0).toUpperCase()+f.slice(1).toLowerCase(),O=f=>{const a=f.trim();let _=a.match(s.BASIC_MAIN);if(_){const h=C(_[1]),t=parseInt(_[2],10);return t>=9600&&t<=16e3?{ok:!0,category:"basic",id:`basic:main:${h}`}:{ok:!1,why:`Basic stat out of range (9600–16000): ${t}`}}if(_=a.match(s.BASIC_VIT),_){const h=parseInt(_[1],10);return h>=4e3&&h<=6e3?{ok:!0,category:"low-value",id:"low:vit"}:{ok:!1,why:`Vitality out of range (4000–6000): ${h}`}}if(s.LV_MAX_HP_FLAT.test(a))return{ok:!0,category:"low-value",id:"low:max_hp_flat"};if(_=a.match(s.COMBAT),_){const h=C(_[1]),t=parseInt(_[2],10);return t>=61&&t<=120?{ok:!0,category:"combat",id:`combat:${h}`}:{ok:!1,why:`Combat stat out of range (61–120): ${t}`}}if(s.ATK_MOVE.test(a))return{ok:!0,category:"special",id:"special:atk_move_speed"};if(s.ADDITIONAL_DMG.test(a))return{ok:!0,category:"dps",id:"dps:additional_damage"};if(s.CRIT_DMG.test(a))return{ok:!0,category:"dps",id:"dps:crit_damage"};if(s.CRIT_RATE.test(a))return{ok:!0,category:"dps",id:"dps:crit_rate"};if(s.WEAPON_POWER_FLAT.test(a))return{ok:!0,category:"dps",id:"dps:weapon_power_flat"};if(s.BACK_ATTACK.test(a))return{ok:!0,category:"dps",id:"dps:back_attack"};if(s.FRONTAL.test(a))return{ok:!0,category:"dps",id:"dps:frontal_attack"};if(s.NON_DIRECTIONAL.test(a))return{ok:!0,category:"dps",id:"dps:non_direction"};if(s.ON_HIT_WP_AMS.test(a))return{ok:!0,category:"dps",id:"dps:onhit_wp_ams"};if(s.OUTGOING_SOLO.test(a))return{ok:!0,category:"dps",id:"dps:outgoing_damage"};if(s.OUTGOING_STAGG.test(a))return{ok:!0,category:"dps",id:"dps:outgoing_damage_staggered"};if(s.ADDITIONAL_DEMONS.test(a))return{ok:!0,category:"dps",id:"dps:additional_damage_demon"};if(s.CDMG_PAIR.test(a))return{ok:!0,category:"dps",id:"dps:crit_damage_plus_chd"};if(s.CRATE_PAIR.test(a))return{ok:!0,category:"dps",id:"dps:crit_rate_plus_chd"};if(s.SKILL_COOLDOWN_OUT.test(a))return{ok:!0,category:"dps",id:"dps:skill_cooldown_plus_outgoing"};if(s.WP_STACKING.test(a))return{ok:!0,category:"dps",id:"dps:weapon_power_stacking"};if(s.WP_HP50.test(a))return{ok:!0,category:"dps",id:"dps:weapon_power_hp50"};if(s.ALLY_ATK_ENH_EFFECT.test(a))return{ok:!0,category:"support",id:"support:ally_atk_enh_effect"};if(s.ALLY_DMG_ENH_EFFECT.test(a))return{ok:!0,category:"support",id:"support:ally_dmg_enh_effect"};if(s.ON_HIT_DEBUFF_CD.test(a))return{ok:!0,category:"support",id:"support:debuff_crit_damage"};if(s.ON_HIT_DEBUFF_CR.test(a))return{ok:!0,category:"support",id:"support:debuff_crit_resist"};if(s.ON_HIT_DEBUFF_DEF.test(a))return{ok:!0,category:"support",id:"support:debuff_defense"};if(s.TARGETS_PROTECTIVE.test(a))return{ok:!0,category:"support",id:"support:targets_protective"};if(_=a.match(s.LV_COMBAT),_){const h=C(_[1]),t=parseInt(_[2],10);return t>=61&&t<=120?{ok:!0,category:"low-value",id:`low:${h}`}:{ok:!1,why:`Low-value combat stat out of range (61–120): ${t}`}}return s.LV_HP_REC.test(a)?{ok:!0,category:"low-value",id:"low:combat_hp_recovery"}:s.LV_RESOURCE.test(a)?{ok:!0,category:"low-value",id:"low:combat_resource_recovery"}:s.LV_DEF_MAG.test(a)?{ok:!0,category:"low-value",id:"low:mag_defense"}:s.LV_DEF_PHY.test(a)?{ok:!0,category:"low-value",id:"low:phy_defense"}:s.LV_CHALLENGE_DMG.test(a)?{ok:!0,category:"low-value",id:"low:damage_to_challenge"}:s.LV_CHALLENGE_IN.test(a)?{ok:!0,category:"low-value",id:"low:incoming_damage_from_challenge"}:s.LV_IMMUNITY.test(a)?{ok:!0,category:"low-value",id:"low:paralysis_push_immunity"}:s.LV_MOVE_CD.test(a)?{ok:!0,category:"low-value",id:"low:movement_cooldown"}:{ok:!1,why:"Line does not match any canonical pattern"}},I=({unknowns:f,mismatches:a})=>{const _=f.map(c=>`• ${c.raw}  —  (unknown)`),h=a.map(c=>`• ${c.raw}  —  (not in canonical list${c.why?`: ${c.why}`:""})`),t=[..._,...h].slice(0,10).join(`
`)||"• (no preview available)",d=["Crop tightly around the bracelet text (no background/UI).","Use 100% zoom or higher; avoid scaled or blurred screenshots.","Avoid overlapping cursors on the bracelet panel.","Upload a PNG if possible.","Ensure the blue bullet icon is visible for every line."].map(c=>`- ${c}`).join(`
`);return["Couldn’t validate all lines against the canonical bracelet list. Please upload a cleaner, tightly-cropped screenshot.","","Problem lines:",t,"","Upload tips for best OCR results:",d].join(`
`)};return{processImage:r}},n=(r,e,u=.05)=>Math.abs(r-e)<=u,ue=r=>Array.from(r.matchAll(/([+-]?\d+(?:\.\d+)?)%/g)).map(e=>parseFloat(e[1])),_e=r=>Array.from(r.matchAll(/\+(\d{1,3}(?:,\d{3})*|\d+)/g)).map(e=>parseInt(e[1].replace(/,/g,""),10)),o={ADD_DEMON_3_5:100,CD_PAIR_10_0:97,CR_PAIR_5_0:94,ADD_DEMON_3_0:91,CD_PAIR_8_4:88,CR_PAIR_3_4:88,ADD_DEMON_2_5:85,WP_HP50_7200_2000:82,SKILL_CD_OUT_5_5:79,CD_PAIR_6_8:76,WP_HP50_8100_2200:73,SKILL_CD_OUT_5_0:70,WP_STACK_8700:67,CD_SINGLE_10_0:64,CR_SINGLE_5_0:61,WP_FLAT_9000:58,WP_STACK_7800:55,BACK_3_5:54,FRONT_3_5:54,NONDIR_3_5:54,SKILL_CD_OUT_4_5:51,OUT_STAG_3_5:48,OUT_SOLO_3_0:48,WP_FLAT_8100:45,ADD_SINGLE_4_0:39,ONHIT_WP_AMS_1480:36,BACK_3_0:36,FRONT_3_0:36,NONDIR_3_0:36,WP_FLAT_7200:33,ADD_SINGLE_3_5:30,ONHIT_WP_AMS_1320:27,BACK_2_5:24,FRONT_2_5:24,NONDIR_2_5:24,ADD_SINGLE_3_0:21,ONHIT_WP_AMS_1160:18,OUT_STAG_2_4:15,OUT_SOLO_2_0:12,MAIN_16000:9,ATKMS_6:8,ATKMS_5:7,MAIN_13000:6,ATKMS_4:6,MAIN_10000:3},G={"dps:additional_damage_demon":({percents:r})=>{const e=r?.[0]??0;return n(e,3.5)?o.ADD_DEMON_3_5:n(e,3)?o.ADD_DEMON_3_0:n(e,2.5)?o.ADD_DEMON_2_5:e*10},"dps:crit_damage_plus_chd":({percents:r})=>{const e=r?.[0]??0;return n(e,10)?o.CD_PAIR_10_0:n(e,8.4)?o.CD_PAIR_8_4:n(e,6.8)?o.CD_PAIR_6_8:e*7+10},"dps:crit_rate_plus_chd":({percents:r})=>{const e=r?.[0]??0;return n(e,5)?o.CR_PAIR_5_0:n(e,3.4)?o.CR_PAIR_3_4:n(e,4.2)?86:e*6+8},"dps:weapon_power_hp50":({amounts:r})=>{const e=r?.[0]??0,u=r?.[1]??0;return e===7200&&u===2e3?o.WP_HP50_7200_2000:e===8100&&u===2200?o.WP_HP50_8100_2200:e===9e3&&u===2400?65:e/300+u/120},"dps:skill_cooldown_plus_outgoing":({percents:r})=>{const e=r||[],u=e.length>=2?e[1]:e[0]||0;return n(u,5.5)?o.SKILL_CD_OUT_5_5:n(u,5)?o.SKILL_CD_OUT_5_0:n(u,4.5)?o.SKILL_CD_OUT_4_5:u*10},"dps:weapon_power_stacking":({amounts:r})=>{const e=r?.[0]??0;return e===8700?o.WP_STACK_8700:e===7800?o.WP_STACK_7800:e===6900?47:e/180},"dps:crit_damage":({percents:r})=>{const e=r?.[0]??0;return n(e,10)?o.CD_SINGLE_10_0:n(e,8.4)?50:n(e,6.8)?40:e*5},"dps:crit_rate":({percents:r})=>{const e=r?.[0]??0;return n(e,5)?o.CR_SINGLE_5_0:n(e,4.2)?42:n(e,3.4)?30:e*4.5},"dps:outgoing_damage_staggered":({percents:r})=>{const e=r?.[0]??0,u=r?.[1]??0;return n(e,3)&&n(u,5)?o.OUT_STAG_3_5:n(e,2)&&n(u,4)?o.OUT_STAG_2_4:e*8+u*4},"dps:outgoing_damage":({percents:r})=>{const e=r?.[0]??0;return n(e,3)?o.OUT_SOLO_3_0:n(e,2)?o.OUT_SOLO_2_0:n(e,2.5)?30:e*9},"dps:onhit_wp_ams":({amounts:r})=>{const e=r?.[0]??0;return e===1480?o.ONHIT_WP_AMS_1480:e===1320?o.ONHIT_WP_AMS_1320:e===1160?o.ONHIT_WP_AMS_1160:e/60},"dps:weapon_power_flat":({amounts:r})=>{const e=r?.[0]??0;return e===9e3?o.WP_FLAT_9000:e===8100?o.WP_FLAT_8100:e===7200?o.WP_FLAT_7200:e/160},"dps:back_attack":({percents:r})=>{const e=r?.[0]??0;return n(e,3.5)?o.BACK_3_5:n(e,3)?o.BACK_3_0:n(e,2.5)?o.BACK_2_5:e*7},"dps:frontal_attack":({percents:r})=>{const e=r?.[0]??0;return n(e,3.5)?o.FRONT_3_5:n(e,3)?o.FRONT_3_0:n(e,2.5)?o.FRONT_2_5:e*7},"dps:non_direction":({percents:r})=>{const e=r?.[0]??0;return n(e,3.5)?o.NONDIR_3_5:n(e,3)?o.NONDIR_3_0:n(e,2.5)?o.NONDIR_2_5:e*7},"special:atk_move_speed":({percents:r})=>{const e=r?.[0]??0;return n(e,6)?o.ATKMS_6:n(e,5)?o.ATKMS_5:n(e,4)?o.ATKMS_4:e},"basic:main:Intelligence":({amounts:r})=>{const e=r?.[0]??0;return e>=15800?o.MAIN_16000:e>=12800?o.MAIN_13000:e>=9600?o.MAIN_10000:0},"basic:main:Strength":({amounts:r})=>G["basic:main:Intelligence"]({amounts:r}),"basic:main:Dexterity":({amounts:r})=>G["basic:main:Intelligence"]({amounts:r}),"dps:additional_damage":({percents:r})=>{const e=r?.[0]??0;return n(e,4)?o.ADD_SINGLE_4_0:n(e,3.5)?o.ADD_SINGLE_3_5:n(e,3)?o.ADD_SINGLE_3_0:e*7}},A={CD_DEBUFF_LOW:110,CD_DEBUFF_MID:115,CD_DEBUFF_HIGH:120,CR_DEBUFF_LOW:104,CR_DEBUFF_MID:109,CR_DEBUFF_HIGH:114,DEF_DEBUFF_LOW:100,DEF_DEBUFF_MID:105,DEF_DEBUFF_HIGH:110,CHEERS_LOW:96,CHEERS_MID:101,CHEERS_HIGH:106,ALLY_DMG_6:80,ALLY_DMG_7_5:86,ALLY_DMG_9:92,ALLY_ATK_4:60,ALLY_ATK_5:66,ALLY_ATK_6:72,WP_ANY_SMALL:25,MAIN_SMALL:12},de={"support:debuff_crit_damage":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,4.8)?A.CD_DEBUFF_HIGH:n(e,4.2)?A.CD_DEBUFF_MID:n(e,3.6)?A.CD_DEBUFF_LOW:e*20},"support:debuff_crit_resist":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,2.5)?A.CR_DEBUFF_HIGH:n(e,2.1)?A.CR_DEBUFF_MID:n(e,1.8)?A.CR_DEBUFF_LOW:e*25},"support:debuff_defense":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,2.5)?A.DEF_DEBUFF_HIGH:n(e,2.1)?A.DEF_DEBUFF_MID:n(e,1.8)?A.DEF_DEBUFF_LOW:e*24},"support:targets_protective":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,1.3)?A.CHEERS_HIGH:n(e,1.1)?A.CHEERS_MID:n(e,.9)?A.CHEERS_LOW:e*70},"support:ally_dmg_enh_effect":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,9)?A.ALLY_DMG_9:n(e,7.5)?A.ALLY_DMG_7_5:n(e,6)?A.ALLY_DMG_6:e*8.5},"support:ally_atk_enh_effect":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,6)?A.ALLY_ATK_6:n(e,5)?A.ALLY_ATK_5:n(e,4)?A.ALLY_ATK_4:e*6},"dps:weapon_power_flat":()=>A.WP_ANY_SMALL,"dps:weapon_power_stacking":()=>A.WP_ANY_SMALL,"dps:onhit_wp_ams":()=>A.WP_ANY_SMALL,"dps:weapon_power_hp50":()=>A.WP_ANY_SMALL,"basic:main:Intelligence":()=>A.MAIN_SMALL,"basic:main:Strength":()=>A.MAIN_SMALL,"basic:main:Dexterity":()=>A.MAIN_SMALL},pe=(r="DPS")=>{const e={},u=b=>{Object.entries(b).forEach(([v,s])=>{e[v]={score:(C,O)=>s(C,O)}})};return u(r==="Support"?de:G),e},J=(r,e)=>{const u=r.id||"",b=r.raw||r.display||"",v={percents:ue(b),amounts:_e(b),text:b},s=e?.[u];if(s&&typeof s.score=="function")try{return Number(s.score(v,r))||0}catch{return 0}return 0},z=(r,e)=>(r||[]).reduce((u,b)=>u+J(b,e),0),ge=(r,e)=>[...r||[]].map(u=>({...u,contribution:J(u,e)})).sort((u,b)=>(b.contribution??0)-(u.contribution??0)),fe={class:"flex items-center justify-between mb-4"},me={class:"text-lg font-semibold text-white"},be={key:0,class:"text-sm"},he={key:0,class:"relative"},Ae={class:"block mt-2"},ye={key:1},De={class:"relative mb-4 h-64 overflow-hidden"},we=["src"],ve={key:0,class:"text-center py-8"},Se={key:1,class:"space-y-4"},Ce={class:"text-sm font-semibold text-purple-400 mb-2"},Ee={key:0,class:"bg-gray-900 rounded p-3 space-y-2"},Ie={class:"flex items-start gap-2"},Le={class:"text-gray-300 flex-1"},ke={key:0,class:"text-xs text-gray-400 ml-2 shrink-0"},Oe={key:1,class:"text-gray-500 text-sm"},xe={class:"text-sm"},Pe={class:"mt-2 bg-gray-900 rounded p-3 text-xs text-gray-400 overflow-x-auto max-h-48 overflow-y-auto"},Te={key:0,class:"bg-red-900/20 border border-red-700 text-red-200 text-sm rounded p-3"},Re={class:"whitespace-pre-line"},j={__name:"BraceletUpload",props:{braceletNum:{type:Number,required:!0},weights:{type:Object,default:()=>({})},totalScore:{type:Number,default:null},highlight:{type:String,default:null}},emits:["update:stats"],setup(r,{expose:e,emit:u}){const b=r,v=u,{processImage:s}=ce(),C=T(null),O=T(!1),I=T(null),f=T(!1),a=x(()=>I.value?.parsed||[]),_=x(()=>a.value.length?ge(a.value,b.weights):[]),h=x(()=>b.highlight==="winner"?"text-emerald-300":b.highlight==="tie"?"text-yellow-300":"text-gray-300"),t=x(()=>typeof b.totalScore=="number"?b.totalScore.toFixed(2):"--"),d=x(()=>b.highlight==="winner"?"border-emerald-500 ring-2 ring-emerald-400 bg-gray-800 shadow-lg":b.highlight==="tie"?"border-yellow-500 ring-2 ring-yellow-400 bg-gray-800":"border-gray-700 bg-gray-800"),c=async D=>{if(!D||!D.type.startsWith("image/"))return;const p=new FileReader;p.onload=H=>{C.value=H.target.result},p.readAsDataURL(D),O.value=!0,I.value=null;const y=await s(D);O.value=!1,I.value=y,y.success?v("update:stats",y.parsed):v("update:stats",y.parsed||[])},S=async D=>{const p=D.target.files[0];await c(p)},m=async D=>{f.value=!1;const p=D.dataTransfer?.files[0];p&&await c(p)},w=()=>{C.value=null,I.value=null,v("update:stats",[])};return e({hasImage:()=>!!C.value,processFile:async D=>{await c(D)}}),(D,p)=>(k(),L("div",{class:F(["rounded-lg p-6 border-2 transition-all",d.value])},[i("div",fe,[i("h3",me,"Bracelet "+N(r.braceletNum),1),typeof r.totalScore=="number"?(k(),L("div",be,[p[3]||(p[3]=i("span",{class:"text-gray-400 mr-1"},"Score:",-1)),i("span",{class:F(h.value)},N(t.value),3)])):U("",!0)]),C.value?(k(),L("div",ye,[i("div",De,[i("img",{src:C.value,alt:"Bracelet",class:"w-full h-full object-cover object-top rounded border border-gray-600"},null,8,we),i("button",{onClick:w,class:"absolute top-2 right-2 bg-red-600 hover:bg-red-700 p-2 rounded-full"},[...p[6]||(p[6]=[i("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),O.value?(k(),L("div",ve,[...p[7]||(p[7]=[i("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-purple-500 border-t-transparent"},null,-1),i("p",{class:"text-gray-400 mt-2"},"Processing OCR...",-1)])])):I.value?(k(),L("div",Se,[i("div",null,[i("h4",Ce," Parsed Stats: "+N(_.value.length)+" found ",1),_.value.length>0?(k(),L("div",Ee,[(k(!0),L(se,null,oe(_.value,(y,H)=>(k(),L("div",{key:H,class:"text-sm"},[i("div",Ie,[i("span",{class:F(["px-2 py-0.5 rounded text-xs font-semibold whitespace-nowrap",{"bg-blue-900 text-blue-300":y.category==="basic","bg-green-900 text-green-300":y.category==="combat","bg-purple-900 text-purple-300":y.category==="special","bg-orange-900 text-orange-300":y.category==="dps","bg-cyan-900 text-cyan-300":y.category==="support","bg-gray-700 text-gray-400":y.category==="low-value","bg-red-900 text-red-300":y.category==="unknown"}])},N(y.category),3),i("span",Le,N(y.display||y.raw),1),typeof y.contribution=="number"?(k(),L("span",ke,N(y.contribution.toFixed(2)),1)):U("",!0)])]))),128))])):(k(),L("p",Oe,"No stats detected"))]),i("details",xe,[p[8]||(p[8]=i("summary",{class:"text-gray-400 cursor-pointer hover:text-gray-300"}," Raw OCR Output ",-1)),i("pre",Pe,N(I.value.text),1)]),I.value.success?U("",!0):(k(),L("div",Te,[i("p",Re,N(I.value.error),1)]))])):U("",!0)])):(k(),L("div",he,[i("div",{class:F(["flex flex-col items-center justify-center h-64 border-2 border-dashed rounded-lg transition-colors",f.value?"border-purple-500 bg-purple-900/20":"border-gray-600"]),onDragenter:p[0]||(p[0]=W(y=>f.value=!0,["prevent"])),onDragover:p[1]||(p[1]=W(y=>f.value=!0,["prevent"])),onDragleave:p[2]||(p[2]=W(y=>f.value=!1,["prevent"])),onDrop:W(m,["prevent"])},[...p[4]||(p[4]=[Z('<label class="flex flex-col items-center justify-center cursor-pointer w-full h-full pointer-events-none"><svg class="w-12 h-12 text-gray-500 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg><span class="text-gray-400">Drag &amp; drop or Ctrl+V to paste</span><span class="text-gray-500 text-sm mt-1">or click below to browse</span></label>',1)])],34),i("label",Ae,[p[5]||(p[5]=i("span",{class:"block text-center text-purple-400 hover:text-purple-300 cursor-pointer text-sm"},"Browse files",-1)),i("input",{type:"file",class:"hidden",accept:"image/*",onChange:S},null,32)])]))],2))}},Ne={class:"relative min-h-screen"},Me={class:"relative p-8"},$e={class:"max-w-7xl mx-auto"},Fe={class:"mb-6 flex items-center justify-center gap-4"},He={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ue={__name:"index",setup(r){const e=T([]),u=T([]),b=T(null),v=T(null),s=T("DPS"),C=x(()=>pe(s.value)),O=x(()=>z(e.value,C.value)),I=x(()=>z(u.value,C.value)),f=x(()=>e.value.length===0||u.value.length===0?null:O.value>I.value?1:I.value>O.value?2:0),a=x(()=>f.value===1?"winner":f.value===0?"tie":null),_=x(()=>f.value===2?"winner":f.value===0?"tie":null),h=async t=>{const d=t.clipboardData?.items;if(d){for(const c of d)if(c.type.startsWith("image/")){const S=c.getAsFile();b.value&&!b.value.hasImage()?(await b.value.processFile(S),t.preventDefault()):v.value&&!v.value.hasImage()&&(await v.value.processFile(S),t.preventDefault());break}}};return ie(()=>window.addEventListener("paste",h)),le(()=>window.removeEventListener("paste",h)),(t,d)=>(k(),L("div",Ne,[d[9]||(d[9]=i("div",{class:"absolute inset-0 bg-black"},null,-1)),d[10]||(d[10]=i("div",{class:"pointer-events-none absolute inset-0 [background: radial-gradient(800px_520px_at_10%_0%,rgba(168,85,247,0.10),transparent_60%), radial-gradient(700px_460px_at_90%_10%,rgba(99,102,241,0.08),transparent_55%) ]"},null,-1)),i("div",Me,[i("div",$e,[d[7]||(d[7]=i("div",{class:"text-center mb-8"},[i("h1",{class:"text-4xl font-bold text-white mb-2"}," Bracedle "),i("h2",{class:"text-1xl font-bold text-white mb-2"}," Lost Ark Bracelet Comparator "),i("p",{class:"text-gray-400"}," Upload bracelet screenshots to be told left or right better ")],-1)),i("div",Fe,[d[6]||(d[6]=i("span",{class:"text-sm text-gray-300"},"Role:",-1)),i("label",{class:F(["inline-flex items-center gap-2 px-3 py-1.5 rounded border cursor-pointer",s.value==="DPS"?"border-emerald-500 bg-emerald-900/20 text-emerald-200":"border-gray-600 text-gray-300"])},[V(i("input",{type:"radio",class:"hidden",value:"DPS","onUpdate:modelValue":d[0]||(d[0]=c=>s.value=c)},null,512),[[K,s.value]]),d[4]||(d[4]=i("span",null,"DPS",-1))],2),i("label",{class:F(["inline-flex items-center gap-2 px-3 py-1.5 rounded border cursor-pointer",s.value==="Support"?"border-cyan-500 bg-cyan-900/20 text-cyan-200":"border-gray-600 text-gray-300"])},[V(i("input",{type:"radio",class:"hidden",value:"Support","onUpdate:modelValue":d[1]||(d[1]=c=>s.value=c)},null,512),[[K,s.value]]),d[5]||(d[5]=i("span",null,"Support",-1))],2)]),i("div",He,[Y(j,{ref_key:"bracelet1Ref",ref:b,"bracelet-num":1,weights:C.value,"total-score":O.value,highlight:a.value,"onUpdate:stats":d[2]||(d[2]=c=>e.value=c)},null,8,["weights","total-score","highlight"]),Y(j,{ref_key:"bracelet2Ref",ref:v,"bracelet-num":2,weights:C.value,"total-score":I.value,highlight:_.value,"onUpdate:stats":d[3]||(d[3]=c=>u.value=c)},null,8,["weights","total-score","highlight"])]),d[8]||(d[8]=Z('<div class="mt-8 bg-gray-900/70 border border-gray-700 rounded p-4"><h4 class="text-sm font-semibold text-purple-300">Upload tips for best OCR results</h4><ul class="mt-2 text-xs text-gray-300 list-disc list-inside space-y-1"><li>Crop tightly around the bracelet text (no background/UI).</li><li>Use 100% zoom or higher; avoid scaled or blurred screenshots.</li><li>Avoid overlapping cursors on the bracelet panel.</li><li>Upload a <span class="font-semibold">PNG</span> if possible.</li><li>Ensure the blue bullet icon is visible for <em>every</em> line.</li><li>Do not use Forced 21:9 in non-ultrawide setups as the screenshot will be too unclear for the OCR.</li></ul></div>',1))])])]))}};export{Ue as default};
