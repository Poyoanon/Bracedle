import{F as ne,r as T,k as O,y as L,z as x,A as c,G as U,B as N,H,I as J,J as W,K as se,L as oe,o as ie,M as le,N as V,O as K,C as Y}from"#entry";const ce=()=>{const r=async _=>{try{const{default:a}=await ne(async()=>{const{default:m}=await import("./DeY5ceUu.js").then(w=>w.i);return{default:m}},[],import.meta.url),{data:{text:i}}=await a.recognize(_,"eng",{logger:m=>console.log(m),tessedit_pageseg_mode:6,tessedit_char_whitelist:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%+.,/'-(): "}),y=e(i),t=d(y),p=t.filter(m=>m.category==="unknown"),u=t.map(m=>{const w=I(m.raw),R=b(m.raw);return{...m,id:w.id||null,display:R,strict_ok:w.ok,strict_category:w.category||m.category,why:w.why||""}}),E=u.filter(m=>!m.strict_ok);return p.length>0||E.length>0?{success:!1,error:C({unknowns:p,mismatches:E}),text:i,parsed:u}:{success:!0,text:i,parsed:u.map(({strict_category:m,...w})=>({...w,category:m,display:b(w.raw)}))}}catch(a){return console.error("OCR Error:",a),{success:!1,error:a.message,text:"",parsed:[]}}},e=_=>{const i=_.normalize("NFKC").replace(/\r/g,`
`).replace(/[“”]/g,'"').replace(/[’]/g,"'").replace(/\+\s+(\d+)/g,"+$1").replace(/\+(\d+)\s+(\d{1,2})%/g,"+$1.$2%").replace(/([A-Za-z])([+\-]\d)/g,"$1 $2").replace(/(\d),(\d{3})(?=[^\d]|$)/g,"$1$2").split(`
`).map(f=>f.trim()).filter(Boolean),y="['\"`‘’“”\\s]*",t="(?:[@©®]|8(?=\\s*[A-Za-z])|9(?=\\s*[A-Za-z]))",p=new RegExp(`^${y}${t}\\s*`),u=new RegExp(`^${y}${t}\\s*`),E=/^[\s"'`‘’“”]+/,m=/(Item Tier|tem Tier|Restricted Trading|Bound to Character|Untradable|Ancient|Radiant|Bracelet Bonus|Ark Passive Points Effect|Bonus cannot be granted\.?)/i,w=f=>f.replace(/\(Shield[^)]*\)/gi,l=>{const k=/HP\s*Regen/i.test(l),P=/Incoming\s+Damage\s+Reduction/i.test(l);return k&&P?"(Shield, HP Regen, Incoming Damage Reduction)":l}),R=f=>{let l=f;l=l.replace(/^(Crit(?!\s*(?:Rate|Damage|Hit))|Specialization|Swiftness|Domination|Endurance|Expertise)\s+(\d{2,3})\b/i,(P,M,$)=>`${M} +${$}`),l=l.replace(/^(Intelligence|Strength|Dexterity|Vitality)\s+(\d{3,6})\b/i,(P,M,$)=>`${M} +${$}`),l=l.replace(/^(Max HP)\s+(\d{4,6})\b/i,(P,M,$)=>`${M} +${$}`);const k=new RegExp("^("+["Intelligence","Strength","Dexterity","Vitality","Max HP","Weapon Power","Crit","Specialization","Swiftness","Domination","Endurance","Expertise"].join("|")+")\\s*[:;=]\\s*(\\d+)\\b","i");return l=l.replace(k,(P,M,$)=>`${M} +${$}`),l=w(l),l=l.replace(/\bAtk\s*\/\s*Move Speed\b/gi,"Atk./Move Speed"),l=l.replace(/\bAtk_\.?\s*Power\b/gi,"Atk. Power"),l=l.replace(/\bAtk[_·•]\s*/gi,"Atk. "),l},F=[];let h="",g=!1;for(let f=0;f<i.length;f++){let l=i[f];if(m.test(l)){h&&(F.push(h.trim()),h="");continue}const k=p.test(l);if(!g){if(k){g=!0;const P=l.replace(u,"").trim();h=R(P)}continue}if(k){h&&F.push(h.trim());const P=l.replace(u,"").trim();h=R(P)}else{if(l=l.replace(E,""),m.test(l)){h&&(F.push(h.trim()),h="");continue}h+=(h?" ":"")+R(l)}}h&&F.push(h.trim());const D=f=>/^(?:Crit(?!\s*(?:Rate|Damage|Hit))|Specialization|Swiftness)\s*\+\d+(?:\.\d+)?\b/i.test(f),B=f=>/^(Intelligence|Strength|Dexterity)\s*\+\d+/i.test(f),q=f=>/^Vitality\s*\+\d+/i.test(f),X=f=>/^Max HP\s*\+\d{4,6}$/i.test(f),Q=f=>/\bAtk\.?\/Move Speed\b/i.test(f),ee=f=>/(Targets that already have|party-wide|Ally|Enhancement|target's (?:Defense|Crit Resistance|Crit Damage)\s*-[\d.]+%)/i.test(f),te=f=>/(Additional Damage|Crit Rate|Crit Damage|Crit Hit Damage|Weapon Power|Outgoing Damage|Back Attack|Frontal|Non-direction(?:al)?|Skill cooldown)/i.test(f),re=f=>/(Domination|Endurance|Expertise|Combat Resource|Natural Recovery|Mag\. Defense|Phy\. Defense|Challenge or lower|Paralysis|Push Immunity|Movement Skill\/Stand Up cooldown|Incoming Damage from Challenge or lower monsters|Combat HP Recovery)/i.test(f),ae=f=>f.replace(/\s+%/g,"%").replace(/\s{2,}/g," ").trim();return F.map(f=>{const l=ae(f);let k="unknown";return B(l)?k="basic":q(l)||X(l)?k="low-value":D(l)?k="combat":ee(l)?k="support":Q(l)?k="special":te(l)?k="dps":re(l)&&(k="low-value"),{raw:l,category:k}})},d=_=>{const a=i=>i.replace(/^(\d)(\d{3})$/,"$1,$2");return _.map(({raw:i,category:y})=>{let t=i;return t=t.replace(/^['"“”‘’]+(?=\S)/,""),t=t.replace(new RegExp(`(?<=\\S)['"“”‘’]+$`),""),t=t.replace(/(\.\s*)['"“”‘’]+(?=\S)/g,"$1"),t=t.replace(/[–−]/g,"-"),t=t.replace(/\bOn hit\.\s*(?=[A-Z])/gi,"On hit, "),t=t.replace(/\bAly\b/gi,"Ally"),t=t.replace(/getting\s+ht\b/gi,"getting hit"),t=t.replace(/\bAtk\s*\/\s*Move Speed\b/gi,"Atk./Move Speed"),t=t.replace(/(\d)\.\s*(\d+)%/g,"$1.$2%"),t=t.replace(/\bfor\s+Ss\b\.?/gi,"for 5s."),t=t.replace(/\bfor\s+5\b\.?/gi,"for 5s."),t=t.replace(/(Cooldown:\s*)(60|70|80)\b(?!s)/gi,"$1$2s"),t=t.replace(/(Cooldown:\s*)(60|70|80)5\b/gi,"$1$2s"),t=t.replace(/\+(\d)\s(\d{1,2})%/g,"+$1.$2%"),t=t.replace(/\(Shield[^)]*\)/gi,u=>{const E=/HP\s*Regen/i.test(u),m=/Incoming\s+Damage\s+Reduction/i.test(u);return E&&m?"(Shield, HP Regen, Incoming Damage Reduction)":u}),t=t.replace(/Bonus vs\. Demons\/Archdemon/gi,"Bonus vs. Demon/Archdemon"),t=t.replace(/^Damage to Challenge or lower monsters\s*-\s*(4|5|6)%\.?$/i,"Damage to Challenge or lower monsters +$1%."),t=t.replace(/^Incoming Damage from Challenge or lower monsters\s*\+\s*(6|8|10)%\.?$/i,"Incoming Damage from Challenge or lower monsters -$1%."),t=t.replace(/(Incoming Damage from Challenge or lower monsters\s*-\s*)8\s*5%/i,"$18%"),t=t.replace(/\b(\d{1,3})\.(\d{3})\b/g,"$1,$2"),t=t.replace(/When your HP is 50% or higher\.\s*upon hit,/i,"When your HP is 50% or higher, upon hit,"),t=t.replace(/(On hit, Weapon Power \+)(\d{4})(, Atk\.\/Move Speed \+1% for 10s\. \(Max\. 6 stacks\))/,(u,E,m,w)=>E+a(m)+w),t=t.replace(/^(Weapon Power \+)(\d{4})(\. Upon hit, Weapon Power \+(?:130|140|150) for 120s every 30s\. \(Max\. 30 stacks\))$/,(u,E,m,w)=>E+a(m)+w),t=t.replace(/^Weapon Power \+(\d{4})\.(\s*When your HP is 50% or higher, upon hit, Weapon Power \+)(\d{4})(\s*for 5s\.)$/,(u,E,m,w,R)=>`Weapon Power +${a(E)}.${m}${a(w)}${R}`),t=t.replace(/\bNon-direction\b(?=\s+Skill Damage)/gi,"Non-directional"),t=t.replace(/(Movement Skill\/Stand Up cooldown)\s*-\s*(\d+)%/i,"$1 -$2%"),new RegExp("^(?:Intelligence|Strength|Dexterity|Vitality|Max HP|Crit(?!\\s*(?:Rate|Damage|Hit))|Specialization|Swiftness|Domination|Endurance|Expertise)\\s*\\+\\d{2,6}\\.$","i").test(t)&&(t=t.replace(/\.$/,"")),t=t.replace(/\s*Bonus can(?:not)? be granted\..*$/i,""),t=t.replace(/\s*Ark Passive Points Effect.*$/i,""),t=t.replace(/\s+%/g,"%").replace(/\s{2,}/g," ").trim(),{raw:t,category:y}})},b=_=>{let a=_;const i=[[/\bcrit hit damage\b/gi,"Crit Hit Damage"],[/\bcrit rate\b/gi,"Crit Rate"],[/\bcrit damage\b/gi,"Crit Damage"],[/\bintelligence\b/gi,"Intelligence"],[/\bstrength\b/gi,"Strength"],[/\bdexterity\b/gi,"Dexterity"],[/\bvitality\b/gi,"Vitality"],[/\bcrit\b/gi,"Crit"],[/\bspecialization\b/gi,"Specialization"],[/\bswiftness\b/gi,"Swiftness"],[/\bdomination\b/gi,"Domination"],[/\bendurance\b/gi,"Endurance"],[/\bexpertise\b/gi,"Expertise"],[/\bmax hp\b/gi,"Max HP"],[/\bweapon power\b/gi,"Weapon Power"],[/\batk\.?\s*\/\s*move speed\b/gi,"Atk./Move Speed"],[/\boutgoing damage\b/gi,"Outgoing Damage"],[/\bnon-directional\b/gi,"Non-directional"],[/\bnon-direction\b/gi,"Non-directional"],[/\bback attack\b/gi,"Back Attack"],[/\bfrontal attack\b/gi,"Frontal Attack"],[/\bskill cooldown\b/gi,"Skill cooldown"],[/\bally atk\. power enhancement effect\b/gi,"Ally Atk. Power Enhancement Effect"],[/\bally damage enhancement effect\b/gi,"Ally Damage Enhancement Effect"],[/\bally atk\. power enhancement\b/gi,"Ally Atk. Power Enhancement"],[/\bincoming damage reduction\b/gi,"Incoming Damage Reduction"],[/\bhp regen\b/gi,"HP Regen"],[/\bshield\b/gi,"Shield"],[/\bdemon\/archdemon\b/gi,"Demon/Archdemon"]];for(const[y,t]of i)a=a.replace(y,t);return a=a.replace(/\s+%/g,"%").replace(/\s{2,}/g," ").trim(),a},v=_=>`(?:${_.map(a=>String(a).replace(/(\d)(?=(\d{3})+$)/g,"$1,")).join("|")}|${_.join("|")})`,s={BASIC_MAIN:/^(Intelligence|Strength|Dexterity)\s*\+(\d{4,5})$/i,BASIC_VIT:/^Vitality\s*\+(\d{4,5})$/i,COMBAT:/^(Crit(?!\s*(?:Rate|Damage|Hit))|Specialization|Swiftness)\s*\+(\d{2,3})\.?$/i,ATK_MOVE:/^Atk\.\/Move Speed \+(?:4|5|6)%\.?$/i,ADDITIONAL_DMG:/^Additional Damage \+(?:3\.00|3\.50|4\.00)%\.?$/i,CRIT_DMG:/^Crit Damage \+(?:6\.80|8\.40|10\.00|6\.8|8\.4|10)%\.?$/i,CRIT_RATE:/^Crit Rate \+(?:3\.40|4\.20|5\.00|3\.4|4\.2|5)%\.?$/i,WEAPON_POWER_FLAT:new RegExp(`^Weapon Power \\+${v([7200,8100,9e3])}$`,"i"),BACK_ATTACK:/^Back Attack Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\.?$/i,FRONTAL:/^Frontal (?:Attack|Attck) Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\.?$/i,NON_DIRECTIONAL:/^Non-direction(?:al)? Skill Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\.? Awakening Skills do not apply\.?$/i,ON_HIT_WP_AMS:/^On hit, Weapon Power \+(?:1,?160|1,?320|1,?480), Atk\.\/Move Speed \+1% for 10s\. \(Max\. 6 stacks\)$/i,OUTGOING_SOLO:/^Outgoing Damage \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?$/i,OUTGOING_STAGG:/^Outgoing Damage \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\. Outgoing Damage \+(?:4(?:\.0)?|4\.5|5(?:\.0)?)% to Staggered foes\.?$/i,ADDITIONAL_DEMONS:/^Additional Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\. Bonus vs\. Demon\/Archdemon \+2\.5%\.?$/i,CDMG_PAIR:/^Crit Damage \+(?:6\.8|8\.4|10(?:\.0)?)%\. Crit Hit Damage \+1\.5%\.?$/i,CRATE_PAIR:/^Crit Rate \+(?:3\.4|4\.2|5(?:\.0)?)%\. Crit Hit Damage \+1\.5%\.?$/i,SKILL_COOLDOWN_OUT:/^Skill cooldown \+2%\. Outgoing Damage \+(?:4\.5|5(?:\.0)?|5\.5)%\.?$/i,WP_STACKING:new RegExp(`^Weapon Power \\+${v([6900,7800,8700])}\\. Upon hit, Weapon Power \\+(?:130|140|150) for 120s every 30s\\. \\(Max\\. 30 stacks\\)$`,"i"),WP_HP50:new RegExp(`^Weapon Power \\+${v([7200,8100,9e3])}\\. When your HP is 50% or higher, upon hit, Weapon Power \\+${v([2e3,2200,2400])} for 5s\\.$`,"i"),ALLY_ATK_ENH_EFFECT:/^Ally Atk\. Power Enhancement Effect \+(?:4\.00|5\.00|6\.00)%$/i,ALLY_DMG_ENH_EFFECT:/^Ally Damage Enhancement Effect \+(?:6\.00|7\.50|9\.00)%$/i,ON_HIT_DEBUFF_CD:/^On hit, target's Crit Damage -(?:3\.6|4\.2|4\.8)% for 8s\. This effect is limited to a single application per party\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,ON_HIT_DEBUFF_CR:/^On hit, target's Crit Resistance -(?:1\.8|2\.1|2\.5)% for 8s\. This effect is limited to a single application per party\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,ON_HIT_DEBUFF_DEF:/^On hit, target's Defense -(?:1\.8|2\.1|2\.5)% for 8s\. This effect is limited to a single application per party\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,TARGETS_PROTECTIVE:/^Targets that already have a party-wide protective effect \(Shield[ ,.]?\s*HP Regen[ ,.]?\s*Incoming Damage Reduction\) are granted Outgoing Damage \+(?:0\.9|1\.1|1\.3)% for 5s\. This effect is limited to a single application per party and does not apply to protective effects with no duration\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,LV_COMBAT:/^(Domination|Endurance|Expertise)\s*\+(\d{2,3})$/i,LV_HP_REC:/^Combat HP Recovery \+(?:100|130|160)$/i,LV_RESOURCE:/^Combat Resource Natural Recovery \+(?:8\.00|10\.00|12\.00)%$/i,LV_DEF_MAG:/^Mag\. Defense \+(?:5000|6000|7000)$/i,LV_DEF_PHY:/^Phy\. Defense \+(?:5000|6000|7000)$/i,LV_CHALLENGE_DMG:/^Damage to Challenge or lower monsters \+(?:4|5|6)%\.?$/i,LV_CHALLENGE_IN:/^Incoming Damage from Challenge or lower monsters \-(?:6|8|10)%\.?$/i,LV_IMMUNITY:/^On hit, Paralysis and Push Immunity for (?:80|70|60)s\. \(Cooldown: (?:80|70|60)s\) The effect is removed upon getting hit 1 time\.$/i,LV_MOVE_CD:/^Movement Skill\/Stand Up cooldown \-(?:8|10|12)%\.?$/i,LV_MAX_HP_FLAT:new RegExp(`^Max HP \\+${v([11200,14e3,16800])}$`,"i")},S=_=>_.charAt(0).toUpperCase()+_.slice(1).toLowerCase(),I=_=>{const a=_.trim();let i=a.match(s.BASIC_MAIN);if(i){const y=S(i[1]),t=parseInt(i[2],10);return t>=9600&&t<=16e3?{ok:!0,category:"basic",id:`basic:main:${y}`}:{ok:!1,why:`Basic stat out of range (9600–16000): ${t}`}}if(i=a.match(s.BASIC_VIT),i){const y=parseInt(i[1],10);return y>=4e3&&y<=6e3?{ok:!0,category:"low-value",id:"low:vit"}:{ok:!1,why:`Vitality out of range (4000–6000): ${y}`}}if(s.LV_MAX_HP_FLAT.test(a))return{ok:!0,category:"low-value",id:"low:max_hp_flat"};if(i=a.match(s.COMBAT),i){const y=S(i[1]),t=parseInt(i[i.length-1],10);return t>=61&&t<=120?{ok:!0,category:"combat",id:`combat:${y}`}:{ok:!1,why:`Combat stat out of range (61–120): ${t}`}}if(s.ATK_MOVE.test(a))return{ok:!0,category:"special",id:"special:atk_move_speed"};if(s.ADDITIONAL_DMG.test(a))return{ok:!0,category:"dps",id:"dps:additional_damage"};if(s.CRIT_DMG.test(a))return{ok:!0,category:"dps",id:"dps:crit_damage"};if(s.CRIT_RATE.test(a))return{ok:!0,category:"dps",id:"dps:crit_rate"};if(s.WEAPON_POWER_FLAT.test(a))return{ok:!0,category:"dps",id:"dps:weapon_power_flat"};if(s.BACK_ATTACK.test(a))return{ok:!0,category:"dps",id:"dps:back_attack"};if(s.FRONTAL.test(a))return{ok:!0,category:"dps",id:"dps:frontal_attack"};if(s.NON_DIRECTIONAL.test(a))return{ok:!0,category:"dps",id:"dps:non_direction"};if(s.ON_HIT_WP_AMS.test(a))return{ok:!0,category:"dps",id:"dps:onhit_wp_ams"};if(s.OUTGOING_SOLO.test(a))return{ok:!0,category:"dps",id:"dps:outgoing_damage"};if(s.OUTGOING_STAGG.test(a))return{ok:!0,category:"dps",id:"dps:outgoing_damage_staggered"};if(s.ADDITIONAL_DEMONS.test(a))return{ok:!0,category:"dps",id:"dps:additional_damage_demon"};if(s.CDMG_PAIR.test(a))return{ok:!0,category:"dps",id:"dps:crit_damage_plus_chd"};if(s.CRATE_PAIR.test(a))return{ok:!0,category:"dps",id:"dps:crit_rate_plus_chd"};if(s.SKILL_COOLDOWN_OUT.test(a))return{ok:!0,category:"dps",id:"dps:skill_cooldown_plus_outgoing"};if(s.WP_STACKING.test(a))return{ok:!0,category:"dps",id:"dps:weapon_power_stacking"};if(s.WP_HP50.test(a))return{ok:!0,category:"dps",id:"dps:weapon_power_hp50"};if(s.ALLY_ATK_ENH_EFFECT.test(a))return{ok:!0,category:"support",id:"support:ally_atk_enh_effect"};if(s.ALLY_DMG_ENH_EFFECT.test(a))return{ok:!0,category:"support",id:"support:ally_dmg_enh_effect"};if(s.ON_HIT_DEBUFF_CD.test(a))return{ok:!0,category:"support",id:"support:debuff_crit_damage"};if(s.ON_HIT_DEBUFF_CR.test(a))return{ok:!0,category:"support",id:"support:debuff_crit_resist"};if(s.ON_HIT_DEBUFF_DEF.test(a))return{ok:!0,category:"support",id:"support:debuff_defense"};if(s.TARGETS_PROTECTIVE.test(a))return{ok:!0,category:"support",id:"support:targets_protective"};if(i=a.match(s.LV_COMBAT),i){const y=S(i[1]),t=parseInt(i[2],10);return t>=61&&t<=120?{ok:!0,category:"low-value",id:`low:${y}`}:{ok:!1,why:`Low-value combat stat out of range (61–120): ${t}`}}return s.LV_HP_REC.test(a)?{ok:!0,category:"low-value",id:"low:combat_hp_recovery"}:s.LV_RESOURCE.test(a)?{ok:!0,category:"low-value",id:"low:combat_resource_recovery"}:s.LV_DEF_MAG.test(a)?{ok:!0,category:"low-value",id:"low:mag_defense"}:s.LV_DEF_PHY.test(a)?{ok:!0,category:"low-value",id:"low:phy_defense"}:s.LV_CHALLENGE_DMG.test(a)?{ok:!0,category:"low-value",id:"low:damage_to_challenge"}:s.LV_CHALLENGE_IN.test(a)?{ok:!0,category:"low-value",id:"low:incoming_damage_from_challenge"}:s.LV_IMMUNITY.test(a)?{ok:!0,category:"low-value",id:"low:paralysis_push_immunity"}:s.LV_MOVE_CD.test(a)?{ok:!0,category:"low-value",id:"low:movement_cooldown"}:{ok:!1,why:"Line does not match any canonical pattern"}},C=({unknowns:_,mismatches:a})=>{const i=_.map(u=>`• ${u.raw}  —  (unknown)`),y=a.map(u=>`• ${u.raw}  —  (not in canonical list${u.why?`: ${u.why}`:""})`),t=[...i,...y].slice(0,10).join(`
`)||"• (no preview available)",p=["Crop tightly around the bracelet text (no background/UI).","Use 100% zoom or higher; avoid scaled or blurred screenshots.","Avoid overlapping cursors on the bracelet panel.","Upload a PNG if possible.","Ensure the blue bullet icon is visible for every line."].map(u=>`- ${u}`).join(`
`);return["Couldn’t validate all lines against the canonical bracelet list. Please upload a cleaner, tightly-cropped screenshot.","","Problem lines:",t,"","Upload tips for best OCR results:",p].join(`
`)};return{processImage:r}},n=(r,e,d=.05)=>Math.abs(r-e)<=d,ue=r=>Array.from(r.matchAll(/([+-]?\d+(?:\.\d+)?)%/g)).map(e=>parseFloat(e[1])),de=r=>Array.from(r.matchAll(/\+(\d{1,3}(?:,\d{3})*|\d+)/g)).map(e=>parseInt(e[1].replace(/,/g,""),10)),o={ADD_DEMON_3_5:100,CD_PAIR_10_0:97,CR_PAIR_5_0:94,ADD_DEMON_3_0:91,CD_PAIR_8_4:88,CR_PAIR_3_4:88,ADD_DEMON_2_5:85,WP_HP50_7200_2000:82,SKILL_CD_OUT_5_5:79,CD_PAIR_6_8:76,WP_HP50_8100_2200:73,SKILL_CD_OUT_5_0:70,WP_STACK_8700:67,CD_SINGLE_10_0:64,CR_SINGLE_5_0:61,WP_FLAT_9000:58,WP_STACK_7800:55,BACK_3_5:54,FRONT_3_5:54,NONDIR_3_5:54,SKILL_CD_OUT_4_5:51,OUT_STAG_3_5:48,OUT_SOLO_3_0:48,WP_FLAT_8100:45,ADD_SINGLE_4_0:39,ONHIT_WP_AMS_1480:36,BACK_3_0:36,FRONT_3_0:36,NONDIR_3_0:36,WP_FLAT_7200:33,ADD_SINGLE_3_5:30,ONHIT_WP_AMS_1320:27,BACK_2_5:24,FRONT_2_5:24,NONDIR_2_5:24,ADD_SINGLE_3_0:21,ONHIT_WP_AMS_1160:18,OUT_STAG_2_4:15,OUT_SOLO_2_0:12,MAIN_16000:9,ATKMS_6:8,ATKMS_5:7,MAIN_13000:6,ATKMS_4:6,MAIN_10000:3},G={"dps:additional_damage_demon":({percents:r})=>{const e=r?.[0]??0;return n(e,3.5)?o.ADD_DEMON_3_5:n(e,3)?o.ADD_DEMON_3_0:n(e,2.5)?o.ADD_DEMON_2_5:e*10},"dps:crit_damage_plus_chd":({percents:r})=>{const e=r?.[0]??0;return n(e,10)?o.CD_PAIR_10_0:n(e,8.4)?o.CD_PAIR_8_4:n(e,6.8)?o.CD_PAIR_6_8:e*7+10},"dps:crit_rate_plus_chd":({percents:r})=>{const e=r?.[0]??0;return n(e,5)?o.CR_PAIR_5_0:n(e,3.4)?o.CR_PAIR_3_4:n(e,4.2)?86:e*6+8},"dps:weapon_power_hp50":({amounts:r})=>{const e=r?.[0]??0,d=r?.[1]??0;return e===7200&&d===2e3?o.WP_HP50_7200_2000:e===8100&&d===2200?o.WP_HP50_8100_2200:e===9e3&&d===2400?65:e/300+d/120},"dps:skill_cooldown_plus_outgoing":({percents:r})=>{const e=r||[],d=e.length>=2?e[1]:e[0]||0;return n(d,5.5)?o.SKILL_CD_OUT_5_5:n(d,5)?o.SKILL_CD_OUT_5_0:n(d,4.5)?o.SKILL_CD_OUT_4_5:d*10},"dps:weapon_power_stacking":({amounts:r})=>{const e=r?.[0]??0;return e===8700?o.WP_STACK_8700:e===7800?o.WP_STACK_7800:e===6900?47:e/180},"dps:crit_damage":({percents:r})=>{const e=r?.[0]??0;return n(e,10)?o.CD_SINGLE_10_0:n(e,8.4)?50:n(e,6.8)?40:e*5},"dps:crit_rate":({percents:r})=>{const e=r?.[0]??0;return n(e,5)?o.CR_SINGLE_5_0:n(e,4.2)?42:n(e,3.4)?30:e*4.5},"dps:outgoing_damage_staggered":({percents:r})=>{const e=r?.[0]??0,d=r?.[1]??0;return n(e,3)&&n(d,5)?o.OUT_STAG_3_5:n(e,2)&&n(d,4)?o.OUT_STAG_2_4:e*8+d*4},"dps:outgoing_damage":({percents:r})=>{const e=r?.[0]??0;return n(e,3)?o.OUT_SOLO_3_0:n(e,2)?o.OUT_SOLO_2_0:n(e,2.5)?30:e*9},"dps:onhit_wp_ams":({amounts:r})=>{const e=r?.[0]??0;return e===1480?o.ONHIT_WP_AMS_1480:e===1320?o.ONHIT_WP_AMS_1320:e===1160?o.ONHIT_WP_AMS_1160:e/60},"dps:weapon_power_flat":({amounts:r})=>{const e=r?.[0]??0;return e===9e3?o.WP_FLAT_9000:e===8100?o.WP_FLAT_8100:e===7200?o.WP_FLAT_7200:e/160},"dps:back_attack":({percents:r})=>{const e=r?.[0]??0;return n(e,3.5)?o.BACK_3_5:n(e,3)?o.BACK_3_0:n(e,2.5)?o.BACK_2_5:e*7},"dps:frontal_attack":({percents:r})=>{const e=r?.[0]??0;return n(e,3.5)?o.FRONT_3_5:n(e,3)?o.FRONT_3_0:n(e,2.5)?o.FRONT_2_5:e*7},"dps:non_direction":({percents:r})=>{const e=r?.[0]??0;return n(e,3.5)?o.NONDIR_3_5:n(e,3)?o.NONDIR_3_0:n(e,2.5)?o.NONDIR_2_5:e*7},"special:atk_move_speed":({percents:r})=>{const e=r?.[0]??0;return n(e,6)?o.ATKMS_6:n(e,5)?o.ATKMS_5:n(e,4)?o.ATKMS_4:e},"basic:main:Intelligence":({amounts:r})=>{const e=r?.[0]??0;return e>=15800?o.MAIN_16000:e>=12800?o.MAIN_13000:e>=9600?o.MAIN_10000:0},"basic:main:Strength":({amounts:r})=>G["basic:main:Intelligence"]({amounts:r}),"basic:main:Dexterity":({amounts:r})=>G["basic:main:Intelligence"]({amounts:r}),"dps:additional_damage":({percents:r})=>{const e=r?.[0]??0;return n(e,4)?o.ADD_SINGLE_4_0:n(e,3.5)?o.ADD_SINGLE_3_5:n(e,3)?o.ADD_SINGLE_3_0:e*7}},A={CD_DEBUFF_LOW:110,CD_DEBUFF_MID:115,CD_DEBUFF_HIGH:120,CR_DEBUFF_LOW:104,CR_DEBUFF_MID:109,CR_DEBUFF_HIGH:114,DEF_DEBUFF_LOW:100,DEF_DEBUFF_MID:105,DEF_DEBUFF_HIGH:110,CHEERS_LOW:96,CHEERS_MID:101,CHEERS_HIGH:106,ALLY_DMG_6:80,ALLY_DMG_7_5:86,ALLY_DMG_9:92,ALLY_ATK_4:60,ALLY_ATK_5:66,ALLY_ATK_6:72,WP_ANY_SMALL:25,MAIN_SMALL:12},_e={"support:debuff_crit_damage":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,4.8)?A.CD_DEBUFF_HIGH:n(e,4.2)?A.CD_DEBUFF_MID:n(e,3.6)?A.CD_DEBUFF_LOW:e*20},"support:debuff_crit_resist":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,2.5)?A.CR_DEBUFF_HIGH:n(e,2.1)?A.CR_DEBUFF_MID:n(e,1.8)?A.CR_DEBUFF_LOW:e*25},"support:debuff_defense":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,2.5)?A.DEF_DEBUFF_HIGH:n(e,2.1)?A.DEF_DEBUFF_MID:n(e,1.8)?A.DEF_DEBUFF_LOW:e*24},"support:targets_protective":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,1.3)?A.CHEERS_HIGH:n(e,1.1)?A.CHEERS_MID:n(e,.9)?A.CHEERS_LOW:e*70},"support:ally_dmg_enh_effect":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,9)?A.ALLY_DMG_9:n(e,7.5)?A.ALLY_DMG_7_5:n(e,6)?A.ALLY_DMG_6:e*8.5},"support:ally_atk_enh_effect":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,6)?A.ALLY_ATK_6:n(e,5)?A.ALLY_ATK_5:n(e,4)?A.ALLY_ATK_4:e*6},"dps:weapon_power_flat":()=>A.WP_ANY_SMALL,"dps:weapon_power_stacking":()=>A.WP_ANY_SMALL,"dps:onhit_wp_ams":()=>A.WP_ANY_SMALL,"dps:weapon_power_hp50":()=>A.WP_ANY_SMALL,"basic:main:Intelligence":()=>A.MAIN_SMALL,"basic:main:Strength":()=>A.MAIN_SMALL,"basic:main:Dexterity":()=>A.MAIN_SMALL},pe=(r="DPS")=>{const e={},d=b=>{Object.entries(b).forEach(([v,s])=>{e[v]={score:(S,I)=>s(S,I)}})};return d(r==="Support"?_e:G),e},Z=(r,e)=>{const d=r.id||"",b=(r.raw||r.display||"").trim(),v=ue(b),s=de(b),S=!!Object.keys(e||{}).find(i=>i.startsWith("support:"));let I=0;const C=b.match(/^\s*(Intelligence|Strength|Dexterity)\s*\+(\d{1,3}(?:,\d{3})+|\d{4,6})\s*\.?\s*$/i);if(C){const i=parseInt(C[2].replace(/,/g,""),10);S?I=12:i>=15800?I=9:i>=12800?I=6:i>=9600&&(I=3)}let _=0;const a=e?.[d];if(a&&typeof a.score=="function")try{_=Number(a.score({percents:v,amounts:s,text:b},r))||0}catch{_=0}return Math.max(_,I)},j=(r,e)=>(r||[]).reduce((d,b)=>d+Z(b,e),0),ge=(r,e)=>[...r||[]].map(d=>({...d,contribution:Z(d,e)})).sort((d,b)=>(b.contribution??0)-(d.contribution??0)),fe={class:"flex items-center justify-between mb-4"},me={class:"text-lg font-semibold text-white"},he={key:0,class:"text-sm"},be={key:0,class:"relative"},ye={class:"block mt-2"},Ae={key:1},De={class:"relative mb-4 h-64 overflow-hidden"},we=["src"],ve={key:0,class:"text-center py-8"},Se={key:1,class:"space-y-4"},Ie={class:"text-sm font-semibold text-purple-400 mb-2"},Ce={key:0,class:"bg-gray-900 rounded p-3 space-y-2"},Ee={class:"flex items-start gap-2"},ke={class:"text-gray-300 flex-1"},Le={key:0,class:"text-xs text-gray-400 ml-2 shrink-0"},xe={key:1,class:"text-gray-500 text-sm"},Oe={class:"text-sm"},Pe={class:"mt-2 bg-gray-900 rounded p-3 text-xs text-gray-400 overflow-x-auto max-h-48 overflow-y-auto"},Te={key:0,class:"bg-red-900/20 border border-red-700 text-red-200 text-sm rounded p-3"},Re={class:"whitespace-pre-line"},z={__name:"BraceletUpload",props:{braceletNum:{type:Number,required:!0},weights:{type:Object,default:()=>({})},totalScore:{type:Number,default:null},highlight:{type:String,default:null}},emits:["update:stats"],setup(r,{expose:e,emit:d}){const b=r,v=d,{processImage:s}=ce(),S=T(null),I=T(!1),C=T(null),_=T(!1),a=O(()=>C.value?.parsed||[]),i=O(()=>a.value.length?ge(a.value,b.weights):[]),y=O(()=>b.highlight==="winner"?"text-emerald-300":b.highlight==="tie"?"text-yellow-300":"text-gray-300"),t=O(()=>typeof b.totalScore=="number"?b.totalScore.toFixed(2):"--"),p=O(()=>b.highlight==="winner"?"border-emerald-500 ring-2 ring-emerald-400 bg-gray-800 shadow-lg":b.highlight==="tie"?"border-yellow-500 ring-2 ring-yellow-400 bg-gray-800":"border-gray-700 bg-gray-800"),u=async h=>{if(!h||!h.type.startsWith("image/"))return;const g=new FileReader;g.onload=B=>{S.value=B.target.result},g.readAsDataURL(h),I.value=!0,C.value=null;const D=await s(h);I.value=!1,C.value=D,D.success?v("update:stats",D.parsed):v("update:stats",D.parsed||[])},E=async h=>{const g=h.target.files[0];await u(g)},m=async h=>{_.value=!1;const g=h.dataTransfer?.files[0];g&&await u(g)},w=()=>{S.value=null,C.value=null,v("update:stats",[])};return e({hasImage:()=>!!S.value,processFile:async h=>{await u(h)}}),(h,g)=>(x(),L("div",{class:H(["rounded-lg p-6 border-2 transition-all",p.value])},[c("div",fe,[c("h3",me,"Bracelet "+N(r.braceletNum),1),typeof r.totalScore=="number"?(x(),L("div",he,[g[3]||(g[3]=c("span",{class:"text-gray-400 mr-1"},"Score:",-1)),c("span",{class:H(y.value)},N(t.value),3)])):U("",!0)]),S.value?(x(),L("div",Ae,[c("div",De,[c("img",{src:S.value,alt:"Bracelet",class:"w-full h-full object-cover object-top rounded border border-gray-600"},null,8,we),c("button",{onClick:w,class:"absolute top-2 right-2 bg-red-600 hover:bg-red-700 p-2 rounded-full"},[...g[6]||(g[6]=[c("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),I.value?(x(),L("div",ve,[...g[7]||(g[7]=[c("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-purple-500 border-t-transparent"},null,-1),c("p",{class:"text-gray-400 mt-2"},"Processing OCR...",-1)])])):C.value?(x(),L("div",Se,[c("div",null,[c("h4",Ie," Parsed Stats: "+N(i.value.length)+" found ",1),i.value.length>0?(x(),L("div",Ce,[(x(!0),L(se,null,oe(i.value,(D,B)=>(x(),L("div",{key:B,class:"text-sm"},[c("div",Ee,[c("span",{class:H(["px-2 py-0.5 rounded text-xs font-semibold whitespace-nowrap",{"bg-blue-900 text-blue-300":D.category==="basic","bg-green-900 text-green-300":D.category==="combat","bg-purple-900 text-purple-300":D.category==="special","bg-orange-900 text-orange-300":D.category==="dps","bg-cyan-900 text-cyan-300":D.category==="support","bg-gray-700 text-gray-400":D.category==="low-value","bg-red-900 text-red-300":D.category==="unknown"}])},N(D.category),3),c("span",ke,N(D.display||D.raw),1),typeof D.contribution=="number"?(x(),L("span",Le,N(D.contribution.toFixed(2)),1)):U("",!0)])]))),128))])):(x(),L("p",xe,"No stats detected"))]),c("details",Oe,[g[8]||(g[8]=c("summary",{class:"text-gray-400 cursor-pointer hover:text-gray-300"}," Raw OCR Output ",-1)),c("pre",Pe,N(C.value.text),1)]),C.value.success?U("",!0):(x(),L("div",Te,[c("p",Re,N(C.value.error),1)]))])):U("",!0)])):(x(),L("div",be,[c("div",{class:H(["flex flex-col items-center justify-center h-64 border-2 border-dashed rounded-lg transition-colors",_.value?"border-purple-500 bg-purple-900/20":"border-gray-600"]),onDragenter:g[0]||(g[0]=W(D=>_.value=!0,["prevent"])),onDragover:g[1]||(g[1]=W(D=>_.value=!0,["prevent"])),onDragleave:g[2]||(g[2]=W(D=>_.value=!1,["prevent"])),onDrop:W(m,["prevent"])},[...g[4]||(g[4]=[J('<label class="flex flex-col items-center justify-center cursor-pointer w-full h-full pointer-events-none"><svg class="w-12 h-12 text-gray-500 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg><span class="text-gray-400">Drag &amp; drop or Ctrl+V to paste</span><span class="text-gray-500 text-sm mt-1">or click below to browse</span></label>',1)])],34),c("label",ye,[g[5]||(g[5]=c("span",{class:"block text-center text-purple-400 hover:text-purple-300 cursor-pointer text-sm"},"Browse files",-1)),c("input",{type:"file",class:"hidden",accept:"image/*",onChange:E},null,32)])]))],2))}},Ne={class:"min-h-screen p-8 bg-gradient-to-br from-[#0a0711] via-[#050307] to-[#0a0711]"},Me={class:"max-w-7xl mx-auto"},$e={class:"mb-6 flex items-center justify-center gap-4"},Fe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Be={__name:"index",setup(r){const e=T([]),d=T([]),b=T(null),v=T(null),s=T("DPS"),S=O(()=>pe(s.value)),I=O(()=>j(e.value,S.value)),C=O(()=>j(d.value,S.value)),_=O(()=>e.value.length===0||d.value.length===0?null:I.value>C.value?1:C.value>I.value?2:0),a=O(()=>_.value===1?"winner":_.value===0?"tie":null),i=O(()=>_.value===2?"winner":_.value===0?"tie":null),y=async t=>{const p=t.clipboardData?.items;if(p){for(const u of p)if(u.type.startsWith("image/")){const E=u.getAsFile();b.value&&!b.value.hasImage()?(await b.value.processFile(E),t.preventDefault()):v.value&&!v.value.hasImage()&&(await v.value.processFile(E),t.preventDefault());break}}};return ie(()=>window.addEventListener("paste",y)),le(()=>window.removeEventListener("paste",y)),(t,p)=>(x(),L("div",Ne,[c("div",Me,[p[7]||(p[7]=c("div",{class:"text-center mb-8"},[c("h1",{class:"text-4xl font-bold text-white mb-2"}," Bracedle (Beta) "),c("h2",{class:"text-1xl font-bold text-white mb-2"}," Lost Ark Bracelet Comparator "),c("p",{class:"text-gray-400"}," Upload bracelet screenshots to be told left or right better ")],-1)),c("div",$e,[p[6]||(p[6]=c("span",{class:"text-sm text-gray-300"},"Role:",-1)),c("label",{class:H(["inline-flex items-center gap-2 px-3 py-1.5 rounded border cursor-pointer",s.value==="DPS"?"border-emerald-500 bg-emerald-900/20 text-emerald-200":"border-gray-600 text-gray-300"])},[V(c("input",{type:"radio",class:"hidden",value:"DPS","onUpdate:modelValue":p[0]||(p[0]=u=>s.value=u)},null,512),[[K,s.value]]),p[4]||(p[4]=c("span",null,"DPS",-1))],2),c("label",{class:H(["inline-flex items-center gap-2 px-3 py-1.5 rounded border cursor-pointer",s.value==="Support"?"border-cyan-500 bg-cyan-900/20 text-cyan-200":"border-gray-600 text-gray-300"])},[V(c("input",{type:"radio",class:"hidden",value:"Support","onUpdate:modelValue":p[1]||(p[1]=u=>s.value=u)},null,512),[[K,s.value]]),p[5]||(p[5]=c("span",null,"Support",-1))],2)]),c("div",Fe,[Y(z,{ref_key:"bracelet1Ref",ref:b,"bracelet-num":1,weights:S.value,"total-score":I.value,highlight:a.value,"onUpdate:stats":p[2]||(p[2]=u=>e.value=u)},null,8,["weights","total-score","highlight"]),Y(z,{ref_key:"bracelet2Ref",ref:v,"bracelet-num":2,weights:S.value,"total-score":C.value,highlight:i.value,"onUpdate:stats":p[3]||(p[3]=u=>d.value=u)},null,8,["weights","total-score","highlight"])]),p[8]||(p[8]=J('<div class="mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="bg-gray-950/80 border border-gray-800 rounded p-4"><h4 class="text-sm font-semibold text-purple-300">Upload tips for best OCR results</h4><ul class="mt-2 text-xs text-gray-300 list-disc list-inside space-y-1"><li>Crop tightly around the bracelet text (no background/UI).</li><li>Use 100% zoom or higher; avoid scaled or blurred screenshots.</li><li>Avoid overlapping cursors on the bracelet panel.</li><li>Upload a <span class="font-semibold">PNG</span> if possible.</li><li>Ensure the blue bullet icon is visible for <em>every</em> line.</li><li>Do not use Forced 21:9 in non-ultrawide setups as the screenshot will be too unclear for the OCR.</li></ul></div><div class="bg-gray-950/80 border border-gray-800 rounded p-4"><h4 class="text-sm font-semibold text-purple-300">Disclaimer</h4><ul class="mt-2 text-xs text-gray-300 list-disc list-inside space-y-1"><li>This is not a true bracelet calculator, just a simple comparator.</li><li>This does not take into account complicated aspects such as Blunt Thorn and Supersonic Breakthrough.</li><li>This also does not take into account any class specifics that may or may not value certain stats higher.</li><li>This is meant to be a lazy man&#39;s quick way to decide if a bracelet is better or worse than another, or for those who really couldn&#39;t be bothered with excel spreadsheets.</li><li>And it will remain a tool with a max of 3 inputs, nothing more than that.</li><li>If you want something more accurate, there are plenty of bracelet calculators that have been created by the community for that purpose with more inputs to personalize your stats.</li></ul></div></div>',1))])]))}};export{Be as default};
