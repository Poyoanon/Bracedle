import{F as se,r as T,k as x,y as L,z as O,A as l,G as U,B as N,H as F,I as Z,J as W,K as oe,L as ie,o as le,M as ce,N as V,O as K,C as Y}from"#entry";const ue=()=>{const r=async p=>{try{const{default:a}=await se(async()=>{const{default:m}=await import("./DeY5ceUu.js").then(v=>v.i);return{default:m}},[],import.meta.url),{data:{text:i}}=await a.recognize(p,"eng",{logger:m=>console.log(m),tessedit_pageseg_mode:6,tessedit_char_whitelist:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%+.,/'-(): "}),h=e(i),t=_(h),d=t.filter(m=>m.category==="unknown"),u=t.map(m=>{const v=I(m.raw),R=b(m.raw);return{...m,id:v.id||null,display:R,strict_ok:v.ok,strict_category:v.category||m.category,why:v.why||""}}),w=u.filter(m=>!m.strict_ok);return d.length>0||w.length>0?{success:!1,error:E({unknowns:d,mismatches:w}),text:i,parsed:u}:{success:!0,text:i,parsed:u.map(({strict_category:m,...v})=>({...v,category:m,display:b(v.raw)}))}}catch(a){return console.error("OCR Error:",a),{success:!1,error:a.message,text:"",parsed:[]}}},e=p=>{const i=p.normalize("NFKC").replace(/\r/g,`
`).replace(/[“”]/g,'"').replace(/[’]/g,"'").replace(/\+\s+(\d+)/g,"+$1").replace(/\+(\d+)\s+(\d{1,2})%/g,"+$1.$2%").replace(/([A-Za-z])([+\-]\d)/g,"$1 $2").replace(/(\d),(\d{3})(?=[^\d]|$)/g,"$1$2").split(`
`).map(f=>f.trim()).filter(Boolean),h="['\"`‘’“”\\s]*",t="(?:[@©®oOaA]|8(?=\\s+[A-Za-z])|9(?=\\s+[A-Za-z]))",d=new RegExp(`^${h}${t}(?![A-Za-z0-9])\\s?`),u=new RegExp(`^${h}${t}(?![A-Za-z0-9])\\s?`),w=/^[\s"'`‘’“”]+/,m=/(Item Tier|tem Tier|Restricted Trading|Bound to Character|Untradable|Ancient|Radiant|Bracelet Bonus)/i,v=f=>f.replace(/\(Shield[^)]*\)/gi,c=>{const k=/HP\s*Regen/i.test(c),P=/Incoming\s+Damage\s+Reduction/i.test(c);return k&&P?"(Shield, HP Regen, Incoming Damage Reduction)":c}),R=f=>{let c=f;c=c.replace(/^(Crit(?!\s*(Rate|Damage|Hit))|Specialization|Swiftness|Domination|Endurance|Expertise)\s+(\d{2,3})\b/i,(P,M,$,ne)=>`${M} +${ne}`),c=c.replace(/^(Intelligence|Strength|Dexterity|Vitality)\s+(\d{3,6})\b/i,(P,M,$)=>`${M} +${$}`),c=c.replace(/^(Max HP)\s+(\d{4,6})\b/i,(P,M,$)=>`${M} +${$}`);const k=new RegExp("^("+["Intelligence","Strength","Dexterity","Vitality","Max HP","Weapon Power","Crit","Specialization","Swiftness","Domination","Endurance","Expertise"].join("|")+")\\s*[:;=]\\s*(\\d+)\\b","i");return c=c.replace(k,(P,M,$)=>`${M} +${$}`),c=v(c),c=c.replace(/\bAtk\s*\/\s*Move Speed\b/gi,"Atk./Move Speed"),c=c.replace(/\bAtk_\.?\s*Power\b/gi,"Atk. Power"),c=c.replace(/\bAtk[_·•]\s*/gi,"Atk. "),c},B=[];let D="",g=!1;for(let f=0;f<i.length;f++){let c=i[f];if(!g&&m.test(c))continue;const k=d.test(c);if(!g){if(k){g=!0;const P=c.replace(u,"").trim();D=R(P)}continue}if(k){D&&B.push(D.trim());const P=c.replace(u,"").trim();D=R(P)}else{if(c=c.replace(w,""),m.test(c))continue;D+=(D?" ":"")+R(c)}}D&&B.push(D.trim());const A=f=>/^(?:Crit(?!\s*(Rate|Damage|Hit))|Specialization|Swiftness)\s*\+\d+(?:\.\d+)?\b/i.test(f),H=f=>/^(Intelligence|Strength|Dexterity)\s*\+\d+/i.test(f),X=f=>/^Vitality\s*\+\d+/i.test(f),q=f=>/^Max HP\s*\+\d{4,6}$/i.test(f),Q=f=>/\bAtk\.?\/Move Speed\b/i.test(f),ee=f=>/(Targets that already have|party-wide|Ally|Enhancement|target's (?:Defense|Crit Resistance|Crit Damage)\s*-[\d.]+%)/i.test(f),te=f=>/(Additional Damage|Crit Rate|Crit Damage|Crit Hit Damage|Weapon Power|Outgoing Damage|Back Attack|Frontal|Non-direction(?:al)?|Skill cooldown)/i.test(f),re=f=>/(Domination|Endurance|Expertise|Combat Resource|Natural Recovery|Mag\. Defense|Phy\. Defense|Challenge or lower|Paralysis|Push Immunity|Movement Skill\/Stand Up cooldown|Incoming Damage from Challenge or lower monsters|Combat HP Recovery)/i.test(f),ae=f=>f.replace(/\s+%/g,"%").replace(/\s{2,}/g," ").trim();return B.map(f=>{const c=ae(f);let k="unknown";return H(c)?k="basic":X(c)||q(c)?k="low-value":A(c)?k="combat":ee(c)?k="support":Q(c)?k="special":te(c)?k="dps":re(c)&&(k="low-value"),{raw:c,category:k}})},_=p=>{const a=i=>i.replace(/^(\d)(\d{3})$/,"$1,$2");return p.map(({raw:i,category:h})=>{let t=i;return t=t.replace(/^['"“”‘’]+(?=\S)/,""),t=t.replace(new RegExp(`(?<=\\S)['"“”‘’]+$`),""),t=t.replace(/(\.\s*)['"“”‘’]+(?=\S)/g,"$1"),t=t.replace(/[–−]/g,"-"),t=t.replace(/\bOn hit\.\s*(?=[A-Z])/gi,"On hit, "),t=t.replace(/\bOn hit\s+(?=target's)/gi,"On hit, "),t=t.replace(/\bAly\b/gi,"Ally"),t=t.replace(/getting\s+ht\b/gi,"getting hit"),t=t.replace(/\bAtk\s*\/\s*Move Speed\b/gi,"Atk./Move Speed"),t=t.replace(/(\d)\.\s*(\d+)%/g,"$1.$2%"),t=t.replace(/([+-])(\d)\s(\d{1,2})%/g,"$1$2.$3%"),t=t.replace(/\bfor\s+Ss\b\.?/gi,"for 5s."),t=t.replace(/\bfor\s+5\b\.?/gi,"for 5s."),t=t.replace(/(Cooldown:\s*)(60|70|80)\b(?!s)/gi,"$1$2s"),t=t.replace(/(Cooldown:\s*)(60|70|80)5\b/gi,"$1$2s"),t=t.replace(/\(Shield[^)]*\)/gi,u=>{const w=/HP\s*Regen/i.test(u),m=/Incoming\s+Damage\s+Reduction/i.test(u);return w&&m?"(Shield, HP Regen, Incoming Damage Reduction)":u}),t=t.replace(/Bonus vs\. Demons\/Archdemon/gi,"Bonus vs. Demon/Archdemon"),t=t.replace(/^Damage to Challenge or lower monsters\s*-\s*(4|5|6)%\.?$/i,"Damage to Challenge or lower monsters +$1%."),t=t.replace(/^Damage to Challenge or lower monsters\s*(\d+)%\.?$/i,(u,w)=>`Damage to Challenge or lower monsters +${w}%.`),t=t.replace(/^Incoming Damage from Challenge or lower monsters\s*\+\s*(6|8|10)%\.?$/i,"Incoming Damage from Challenge or lower monsters -$1%."),t=t.replace(/(Incoming Damage from Challenge or lower monsters\s*-\s*)8\s*5%/i,"$18%"),t=t.replace(/\b(\d{1,3})\.(\d{3})\b/g,"$1,$2"),t=t.replace(/When your HP is 50% or higher\.\s*upon hit,/i,"When your HP is 50% or higher, upon hit,"),t=t.replace(/(On hit, Weapon Power \+)(\d{4})(, Atk\.\/Move Speed \+1% for 10s\. \(Max\. 6 stacks\))/,(u,w,m,v)=>w+a(m)+v),t=t.replace(/^(Weapon Power \+)(\d{4})(\. Upon hit, Weapon Power \+(?:130|140|150) for 120s every 30s\. \(Max\. 30 stacks\))$/,(u,w,m,v)=>w+a(m)+v),t=t.replace(/^Weapon Power \+(\d{4})\.(\s*When your HP is 50% or higher, upon hit, Weapon Power \+)(\d{4})(\s*for 5s\.)$/,(u,w,m,v,R)=>`Weapon Power +${a(w)}.${m}${a(v)}${R}`),t=t.replace(/(Movement Skill\/Stand Up cooldown)\s*-\s*(\d+)%/i,"$1 -$2%"),t=t.replace(/\bNon-direction\b(?=\s+Skill Damage)/gi,"Non-directional"),t=t.replace(/\s*Bonus can be granted.*$/i,""),t=t.replace(/\s*Bonus cannot be granted.*$/i,""),t=t.replace(/\s*Ark Passive Points Effect.*$/i,""),new RegExp("^(?:Intelligence|Strength|Dexterity|Vitality|Max HP|Crit(?!\\s*(Rate|Damage|Hit))|Specialization|Swiftness|Domination|Endurance|Expertise)\\s*\\+\\d{2,6}\\.$","i").test(t)&&(t=t.replace(/\.$/,"")),t=t.replace(/\s+%/g,"%").replace(/\s{2,}/g," ").trim(),{raw:t,category:h}})},b=p=>{let a=p;const i=[[/\bcrit hit damage\b/gi,"Crit Hit Damage"],[/\bcrit rate\b/gi,"Crit Rate"],[/\bcrit damage\b/gi,"Crit Damage"],[/\bintelligence\b/gi,"Intelligence"],[/\bstrength\b/gi,"Strength"],[/\bdexterity\b/gi,"Dexterity"],[/\bvitality\b/gi,"Vitality"],[/\bcrit\b/gi,"Crit"],[/\bspecialization\b/gi,"Specialization"],[/\bswiftness\b/gi,"Swiftness"],[/\bdomination\b/gi,"Domination"],[/\bendurance\b/gi,"Endurance"],[/\bexpertise\b/gi,"Expertise"],[/\bmax hp\b/gi,"Max HP"],[/\bweapon power\b/gi,"Weapon Power"],[/\batk\.?\s*\/\s*move speed\b/gi,"Atk./Move Speed"],[/\boutgoing damage\b/gi,"Outgoing Damage"],[/\bnon-directional\b/gi,"Non-directional"],[/\bnon-direction\b/gi,"Non-directional"],[/\bback attack\b/gi,"Back Attack"],[/\bfrontal attack\b/gi,"Frontal Attack"],[/\bskill cooldown\b/gi,"Skill cooldown"],[/\bally atk\. power enhancement effect\b/gi,"Ally Atk. Power Enhancement Effect"],[/\bally damage enhancement effect\b/gi,"Ally Damage Enhancement Effect"],[/\bally atk\. power enhancement\b/gi,"Ally Atk. Power Enhancement"],[/\bincoming damage reduction\b/gi,"Incoming Damage Reduction"],[/\bhp regen\b/gi,"HP Regen"],[/\bshield\b/gi,"Shield"],[/\bdemon\/archdemon\b/gi,"Demon/Archdemon"]];for(const[h,t]of i)a=a.replace(h,t);return a=a.replace(/\s+%/g,"%").replace(/\s{2,}/g," ").trim(),a},S=p=>`(?:${p.map(a=>String(a).replace(/(\d)(?=(\d{3})+$)/g,"$1,")).join("|")}|${p.join("|")})`,s={BASIC_MAIN:/^(Intelligence|Strength|Dexterity)\s*\+(\d{4,5})$/i,BASIC_VIT:/^Vitality\s*\+(\d{4,5})$/i,COMBAT:/^(Crit(?!\s*(?:Rate|Damage|Hit))|Specialization|Swiftness)\s*\+(\d{2,3})\.?$/i,ATK_MOVE:/^Atk\.\/Move Speed \+(?:4|5|6)%\.?$/i,ADDITIONAL_DMG:/^Additional Damage \+(?:3\.00|3\.50|4\.00)%\.?$/i,CRIT_DMG:/^Crit Damage \+(?:6\.80|8\.40|10\.00|6\.8|8\.4|10)%\.?$/i,CRIT_RATE:/^Crit Rate \+(?:3\.40|4\.20|5\.00|3\.4|4\.2|5)%\.?$/i,WEAPON_POWER_FLAT:new RegExp(`^Weapon Power \\+${S([7200,8100,9e3])}$`,"i"),BACK_ATTACK:/^Back Attack Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\.?$/i,FRONTAL:/^Frontal (?:Attack|Attck) Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\.?$/i,NON_DIRECTIONAL:/^Non-direction(?:al)? Skill Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\.? Awakening Skills do not apply\.?$/i,ON_HIT_WP_AMS:/^On hit, Weapon Power \+(?:1,?160|1,?320|1,?480), Atk\.\/Move Speed \+1% for 10s\. \(Max\. 6 stacks\)$/i,OUTGOING_SOLO:/^Outgoing Damage \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?$/i,OUTGOING_STAGG:/^Outgoing Damage \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\. Outgoing Damage \+(?:4(?:\.0)?|4\.5|5(?:\.0)?)% to Staggered foes\.?$/i,ADDITIONAL_DEMONS:/^Additional Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\. Bonus vs\. Demon\/Archdemon \+2\.5%\.?$/i,CDMG_PAIR:/^Crit Damage \+(?:6\.8|8\.4|10(?:\.0)?)%\. Crit Hit Damage \+1\.5%\.?$/i,CRATE_PAIR:/^Crit Rate \+(?:3\.4|4\.2|5(?:\.0)?)%\. Crit Hit Damage \+1\.5%\.?$/i,SKILL_COOLDOWN_OUT:/^Skill cooldown \+2%\. Outgoing Damage \+(?:4\.5|5(?:\.0)?|5\.5)%\.?$/i,WP_STACKING:new RegExp(`^Weapon Power \\+${S([6900,7800,8700])}\\. Upon hit, Weapon Power \\+(?:130|140|150) for 120s every 30s\\. \\(Max\\. 30 stacks\\)$`,"i"),WP_HP50:new RegExp(`^Weapon Power \\+${S([7200,8100,9e3])}\\. When your HP is 50% or higher, upon hit, Weapon Power \\+${S([2e3,2200,2400])} for 5s\\.$`,"i"),ALLY_ATK_ENH_EFFECT:/^Ally Atk\. Power Enhancement Effect \+(?:4\.00|5\.00|6\.00)%$/i,ALLY_DMG_ENH_EFFECT:/^Ally Damage Enhancement Effect \+(?:6\.00|7\.50|9\.00)%$/i,ON_HIT_DEBUFF_CD:/^On hit, target's Crit Damage -(?:3\.6|4\.2|4\.8)% for 8s\. This effect is limited to a single application per party\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,ON_HIT_DEBUFF_CR:/^On hit, target's Crit Resistance -(?:1\.8|2\.1|2\.5)% for 8s\. This effect is limited to a single application per party\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,ON_HIT_DEBUFF_DEF:/^On hit, target's Defense -(?:1\.8|2\.1|2\.5)% for 8s\. This effect is limited to a single application per party\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,TARGETS_PROTECTIVE:/^Targets that already have a party-wide protective effect \(Shield[ ,.]?\s*HP Regen[ ,.]?\s*Incoming Damage Reduction\) are granted Outgoing Damage \+(?:0\.9|1\.1|1\.3)% for 5s\. This effect is limited to a single application per party and does not apply to protective effects with no duration\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,LV_COMBAT:/^(Domination|Endurance|Expertise)\s*\+(\d{2,3})$/i,LV_HP_REC:/^Combat HP Recovery \+(?:100|130|160)$/i,LV_RESOURCE:/^Combat Resource Natural Recovery \+(?:8\.00|10\.00|12\.00)%$/i,LV_DEF_MAG:/^Mag\. Defense \+(?:5000|6000|7000)$/i,LV_DEF_PHY:/^Phy\. Defense \+(?:5000|6000|7000)$/i,LV_CHALLENGE_DMG:/^Damage to Challenge or lower monsters \+(?:4|5|6)%\.?$/i,LV_CHALLENGE_IN:/^Incoming Damage from Challenge or lower monsters \-(?:6|8|10)%\.?$/i,LV_IMMUNITY:/^On hit, Paralysis and Push Immunity for (?:80|70|60)s\. \(Cooldown: (?:80|70|60)s\) The effect is removed upon getting hit 1 time\.$/i,LV_MOVE_CD:/^Movement Skill\/Stand Up cooldown \-(?:8|10|12)%\.?$/i,LV_MAX_HP_FLAT:new RegExp(`^Max HP \\+${S([11200,14e3,16800])}$`,"i")},C=p=>p.charAt(0).toUpperCase()+p.slice(1).toLowerCase(),I=p=>{const a=p.trim();let i=a.match(s.BASIC_MAIN);if(i){const h=C(i[1]),t=parseInt(i[2],10);return t>=9600&&t<=16e3?{ok:!0,category:"basic",id:`basic:main:${h}`}:{ok:!1,why:`Basic stat out of range (9600–16000): ${t}`}}if(i=a.match(s.BASIC_VIT),i){const h=parseInt(i[1],10);return h>=4e3&&h<=6e3?{ok:!0,category:"low-value",id:"low:vit"}:{ok:!1,why:`Vitality out of range (4000–6000): ${h}`}}if(s.LV_MAX_HP_FLAT.test(a))return{ok:!0,category:"low-value",id:"low:max_hp_flat"};if(i=a.match(s.COMBAT),i){const h=C(i[1]),t=parseInt(i[2],10);return t>=61&&t<=120?{ok:!0,category:"combat",id:`combat:${h}`}:{ok:!1,why:`Combat stat out of range (61–120): ${t}`}}if(s.ATK_MOVE.test(a))return{ok:!0,category:"special",id:"special:atk_move_speed"};if(s.ADDITIONAL_DMG.test(a))return{ok:!0,category:"dps",id:"dps:additional_damage"};if(s.CRIT_DMG.test(a))return{ok:!0,category:"dps",id:"dps:crit_damage"};if(s.CRIT_RATE.test(a))return{ok:!0,category:"dps",id:"dps:crit_rate"};if(s.WEAPON_POWER_FLAT.test(a))return{ok:!0,category:"dps",id:"dps:weapon_power_flat"};if(s.BACK_ATTACK.test(a))return{ok:!0,category:"dps",id:"dps:back_attack"};if(s.FRONTAL.test(a))return{ok:!0,category:"dps",id:"dps:frontal_attack"};if(s.NON_DIRECTIONAL.test(a))return{ok:!0,category:"dps",id:"dps:non_direction"};if(s.ON_HIT_WP_AMS.test(a))return{ok:!0,category:"dps",id:"dps:onhit_wp_ams"};if(s.OUTGOING_SOLO.test(a))return{ok:!0,category:"dps",id:"dps:outgoing_damage"};if(s.OUTGOING_STAGG.test(a))return{ok:!0,category:"dps",id:"dps:outgoing_damage_staggered"};if(s.ADDITIONAL_DEMONS.test(a))return{ok:!0,category:"dps",id:"dps:additional_damage_demon"};if(s.CDMG_PAIR.test(a))return{ok:!0,category:"dps",id:"dps:crit_damage_plus_chd"};if(s.CRATE_PAIR.test(a))return{ok:!0,category:"dps",id:"dps:crit_rate_plus_chd"};if(s.SKILL_COOLDOWN_OUT.test(a))return{ok:!0,category:"dps",id:"dps:skill_cooldown_plus_outgoing"};if(s.WP_STACKING.test(a))return{ok:!0,category:"dps",id:"dps:weapon_power_stacking"};if(s.WP_HP50.test(a))return{ok:!0,category:"dps",id:"dps:weapon_power_hp50"};if(s.ALLY_ATK_ENH_EFFECT.test(a))return{ok:!0,category:"support",id:"support:ally_atk_enh_effect"};if(s.ALLY_DMG_ENH_EFFECT.test(a))return{ok:!0,category:"support",id:"support:ally_dmg_enh_effect"};if(s.ON_HIT_DEBUFF_CD.test(a))return{ok:!0,category:"support",id:"support:debuff_crit_damage"};if(s.ON_HIT_DEBUFF_CR.test(a))return{ok:!0,category:"support",id:"support:debuff_crit_resist"};if(s.ON_HIT_DEBUFF_DEF.test(a))return{ok:!0,category:"support",id:"support:debuff_defense"};if(s.TARGETS_PROTECTIVE.test(a))return{ok:!0,category:"support",id:"support:targets_protective"};if(i=a.match(s.LV_COMBAT),i){const h=C(i[1]),t=parseInt(i[2],10);return t>=61&&t<=120?{ok:!0,category:"low-value",id:`low:${h}`}:{ok:!1,why:`Low-value combat stat out of range (61–120): ${t}`}}return s.LV_HP_REC.test(a)?{ok:!0,category:"low-value",id:"low:combat_hp_recovery"}:s.LV_RESOURCE.test(a)?{ok:!0,category:"low-value",id:"low:combat_resource_recovery"}:s.LV_DEF_MAG.test(a)?{ok:!0,category:"low-value",id:"low:mag_defense"}:s.LV_DEF_PHY.test(a)?{ok:!0,category:"low-value",id:"low:phy_defense"}:s.LV_CHALLENGE_DMG.test(a)?{ok:!0,category:"low-value",id:"low:damage_to_challenge"}:s.LV_CHALLENGE_IN.test(a)?{ok:!0,category:"low-value",id:"low:incoming_damage_from_challenge"}:s.LV_IMMUNITY.test(a)?{ok:!0,category:"low-value",id:"low:paralysis_push_immunity"}:s.LV_MOVE_CD.test(a)?{ok:!0,category:"low-value",id:"low:movement_cooldown"}:{ok:!1,why:"Line does not match any canonical pattern"}},E=({unknowns:p,mismatches:a})=>{const i=p.map(u=>`• ${u.raw}  —  (unknown)`),h=a.map(u=>`• ${u.raw}  —  (not in canonical list${u.why?`: ${u.why}`:""})`),t=[...i,...h].slice(0,10).join(`
`)||"• (no preview available)",d=["Crop tightly around the bracelet text (no background/UI).","Use 100% zoom or higher; avoid scaled or blurred screenshots.","Avoid overlapping cursors on the bracelet panel.","Upload a PNG if possible.","Ensure the blue bullet icon is visible for every line."].map(u=>`- ${u}`).join(`
`);return["Couldn’t validate all lines against the canonical bracelet list. Please upload a cleaner, tightly-cropped screenshot.","","Problem lines:",t,"","Upload tips for best OCR results:",d].join(`
`)};return{processImage:r}},n=(r,e,_=.05)=>Math.abs(r-e)<=_,_e=r=>Array.from(r.matchAll(/([+-]?\d+(?:\.\d+)?)%/g)).map(e=>parseFloat(e[1])),de=r=>Array.from(r.matchAll(/\+(\d{1,3}(?:,\d{3})*|\d+)/g)).map(e=>parseInt(e[1].replace(/,/g,""),10)),o={ADD_DEMON_3_5:100,CD_PAIR_10_0:97,CR_PAIR_5_0:94,ADD_DEMON_3_0:91,CD_PAIR_8_4:88,CR_PAIR_3_4:88,ADD_DEMON_2_5:85,WP_HP50_7200_2000:82,SKILL_CD_OUT_5_5:79,CD_PAIR_6_8:76,WP_HP50_8100_2200:73,SKILL_CD_OUT_5_0:70,WP_STACK_8700:67,CD_SINGLE_10_0:64,CR_SINGLE_5_0:61,WP_FLAT_9000:58,WP_STACK_7800:55,BACK_3_5:54,FRONT_3_5:54,NONDIR_3_5:54,SKILL_CD_OUT_4_5:51,OUT_STAG_3_5:48,OUT_SOLO_3_0:48,WP_FLAT_8100:45,ADD_SINGLE_4_0:39,ONHIT_WP_AMS_1480:36,BACK_3_0:36,FRONT_3_0:36,NONDIR_3_0:36,WP_FLAT_7200:33,ADD_SINGLE_3_5:30,ONHIT_WP_AMS_1320:27,BACK_2_5:24,FRONT_2_5:24,NONDIR_2_5:24,ADD_SINGLE_3_0:21,ONHIT_WP_AMS_1160:18,OUT_STAG_2_4:15,OUT_SOLO_2_0:12,MAIN_16000:9,ATKMS_6:8,ATKMS_5:7,MAIN_13000:6,ATKMS_4:6,MAIN_10000:3},G={"dps:additional_damage_demon":({percents:r})=>{const e=r?.[0]??0;return n(e,3.5)?o.ADD_DEMON_3_5:n(e,3)?o.ADD_DEMON_3_0:n(e,2.5)?o.ADD_DEMON_2_5:e*10},"dps:crit_damage_plus_chd":({percents:r})=>{const e=r?.[0]??0;return n(e,10)?o.CD_PAIR_10_0:n(e,8.4)?o.CD_PAIR_8_4:n(e,6.8)?o.CD_PAIR_6_8:e*7+10},"dps:crit_rate_plus_chd":({percents:r})=>{const e=r?.[0]??0;return n(e,5)?o.CR_PAIR_5_0:n(e,3.4)?o.CR_PAIR_3_4:n(e,4.2)?86:e*6+8},"dps:weapon_power_hp50":({amounts:r})=>{const e=r?.[0]??0,_=r?.[1]??0;return e===7200&&_===2e3?o.WP_HP50_7200_2000:e===8100&&_===2200?o.WP_HP50_8100_2200:e===9e3&&_===2400?65:e/300+_/120},"dps:skill_cooldown_plus_outgoing":({percents:r})=>{const e=r||[],_=e.length>=2?e[1]:e[0]||0;return n(_,5.5)?o.SKILL_CD_OUT_5_5:n(_,5)?o.SKILL_CD_OUT_5_0:n(_,4.5)?o.SKILL_CD_OUT_4_5:_*10},"dps:weapon_power_stacking":({amounts:r})=>{const e=r?.[0]??0;return e===8700?o.WP_STACK_8700:e===7800?o.WP_STACK_7800:e===6900?47:e/180},"dps:crit_damage":({percents:r})=>{const e=r?.[0]??0;return n(e,10)?o.CD_SINGLE_10_0:n(e,8.4)?50:n(e,6.8)?40:e*5},"dps:crit_rate":({percents:r})=>{const e=r?.[0]??0;return n(e,5)?o.CR_SINGLE_5_0:n(e,4.2)?42:n(e,3.4)?30:e*4.5},"dps:outgoing_damage_staggered":({percents:r})=>{const e=r?.[0]??0,_=r?.[1]??0;return n(e,3)&&n(_,5)?o.OUT_STAG_3_5:n(e,2)&&n(_,4)?o.OUT_STAG_2_4:e*8+_*4},"dps:outgoing_damage":({percents:r})=>{const e=r?.[0]??0;return n(e,3)?o.OUT_SOLO_3_0:n(e,2)?o.OUT_SOLO_2_0:n(e,2.5)?30:e*9},"dps:onhit_wp_ams":({amounts:r})=>{const e=r?.[0]??0;return e===1480?o.ONHIT_WP_AMS_1480:e===1320?o.ONHIT_WP_AMS_1320:e===1160?o.ONHIT_WP_AMS_1160:e/60},"dps:weapon_power_flat":({amounts:r})=>{const e=r?.[0]??0;return e===9e3?o.WP_FLAT_9000:e===8100?o.WP_FLAT_8100:e===7200?o.WP_FLAT_7200:e/160},"dps:back_attack":({percents:r})=>{const e=r?.[0]??0;return n(e,3.5)?o.BACK_3_5:n(e,3)?o.BACK_3_0:n(e,2.5)?o.BACK_2_5:e*7},"dps:frontal_attack":({percents:r})=>{const e=r?.[0]??0;return n(e,3.5)?o.FRONT_3_5:n(e,3)?o.FRONT_3_0:n(e,2.5)?o.FRONT_2_5:e*7},"dps:non_direction":({percents:r})=>{const e=r?.[0]??0;return n(e,3.5)?o.NONDIR_3_5:n(e,3)?o.NONDIR_3_0:n(e,2.5)?o.NONDIR_2_5:e*7},"special:atk_move_speed":({percents:r})=>{const e=r?.[0]??0;return n(e,6)?o.ATKMS_6:n(e,5)?o.ATKMS_5:n(e,4)?o.ATKMS_4:e},"basic:main:Intelligence":({amounts:r})=>{const e=r?.[0]??0;return e>=15800?o.MAIN_16000:e>=12800?o.MAIN_13000:e>=9600?o.MAIN_10000:0},"basic:main:Strength":({amounts:r})=>G["basic:main:Intelligence"]({amounts:r}),"basic:main:Dexterity":({amounts:r})=>G["basic:main:Intelligence"]({amounts:r}),"dps:additional_damage":({percents:r})=>{const e=r?.[0]??0;return n(e,4)?o.ADD_SINGLE_4_0:n(e,3.5)?o.ADD_SINGLE_3_5:n(e,3)?o.ADD_SINGLE_3_0:e*7}},y={CD_DEBUFF_LOW:110,CD_DEBUFF_MID:115,CD_DEBUFF_HIGH:120,CR_DEBUFF_LOW:104,CR_DEBUFF_MID:109,CR_DEBUFF_HIGH:114,DEF_DEBUFF_LOW:100,DEF_DEBUFF_MID:105,DEF_DEBUFF_HIGH:110,CHEERS_LOW:96,CHEERS_MID:101,CHEERS_HIGH:106,ALLY_DMG_6:80,ALLY_DMG_7_5:86,ALLY_DMG_9:92,ALLY_ATK_4:60,ALLY_ATK_5:66,ALLY_ATK_6:72,WP_ANY_SMALL:25,MAIN_SMALL:12},pe={"support:debuff_crit_damage":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,4.8)?y.CD_DEBUFF_HIGH:n(e,4.2)?y.CD_DEBUFF_MID:n(e,3.6)?y.CD_DEBUFF_LOW:e*20},"support:debuff_crit_resist":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,2.5)?y.CR_DEBUFF_HIGH:n(e,2.1)?y.CR_DEBUFF_MID:n(e,1.8)?y.CR_DEBUFF_LOW:e*25},"support:debuff_defense":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,2.5)?y.DEF_DEBUFF_HIGH:n(e,2.1)?y.DEF_DEBUFF_MID:n(e,1.8)?y.DEF_DEBUFF_LOW:e*24},"support:targets_protective":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,1.3)?y.CHEERS_HIGH:n(e,1.1)?y.CHEERS_MID:n(e,.9)?y.CHEERS_LOW:e*70},"support:ally_dmg_enh_effect":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,9)?y.ALLY_DMG_9:n(e,7.5)?y.ALLY_DMG_7_5:n(e,6)?y.ALLY_DMG_6:e*8.5},"support:ally_atk_enh_effect":({percents:r})=>{const e=Math.abs(r?.[0]??0);return n(e,6)?y.ALLY_ATK_6:n(e,5)?y.ALLY_ATK_5:n(e,4)?y.ALLY_ATK_4:e*6},"dps:weapon_power_flat":()=>y.WP_ANY_SMALL,"dps:weapon_power_stacking":()=>y.WP_ANY_SMALL,"dps:onhit_wp_ams":()=>y.WP_ANY_SMALL,"dps:weapon_power_hp50":()=>y.WP_ANY_SMALL,"basic:main:Intelligence":()=>y.MAIN_SMALL,"basic:main:Strength":()=>y.MAIN_SMALL,"basic:main:Dexterity":()=>y.MAIN_SMALL},ge=(r="DPS")=>{const e={},_=b=>{Object.entries(b).forEach(([S,s])=>{e[S]={score:(C,I)=>s(C,I)}})};return _(r==="Support"?pe:G),e},J=(r,e)=>{const _=r.id||"",b=(r.raw||r.display||"").trim(),S=_e(b),s=de(b),C=!!Object.keys(e||{}).find(i=>i.startsWith("support:"));let I=0;const E=b.match(/^\s*(Intelligence|Strength|Dexterity)\s*\+(\d{1,3}(?:,\d{3})+|\d{4,6})\s*\.?\s*$/i);if(E){const i=parseInt(E[2].replace(/,/g,""),10);C?I=12:i>=15800?I=9:i>=12800?I=6:i>=9600&&(I=3)}let p=0;const a=e?.[_];if(a&&typeof a.score=="function")try{p=Number(a.score({percents:S,amounts:s,text:b},r))||0}catch{p=0}return Math.max(p,I)},z=(r,e)=>(r||[]).reduce((_,b)=>_+J(b,e),0),fe=(r,e)=>[...r||[]].map(_=>({..._,contribution:J(_,e)})).sort((_,b)=>(b.contribution??0)-(_.contribution??0)),me={class:"flex items-center justify-between mb-4"},be={class:"text-lg font-semibold text-white"},he={key:0,class:"text-sm"},ye={key:0,class:"relative"},Ae={class:"block mt-2"},De={key:1},we={class:"relative mb-4 h-64 overflow-hidden"},ve=["src"],Se={key:0,class:"text-center py-8"},Ce={key:1,class:"space-y-4"},Ie={class:"text-sm font-semibold text-purple-400 mb-2"},Ee={key:0,class:"bg-gray-900 rounded p-3 space-y-2"},ke={class:"flex items-start gap-2"},Le={class:"text-gray-300 flex-1"},Oe={key:0,class:"text-xs text-gray-400 ml-2 shrink-0"},xe={key:1,class:"text-gray-500 text-sm"},Pe={class:"text-sm"},Te={class:"mt-2 bg-gray-900 rounded p-3 text-xs text-gray-400 overflow-x-auto max-h-48 overflow-y-auto"},Re={key:0,class:"bg-red-900/20 border border-red-700 text-red-200 text-sm rounded p-3"},Ne={class:"whitespace-pre-line"},j={__name:"BraceletUpload",props:{braceletNum:{type:Number,required:!0},weights:{type:Object,default:()=>({})},totalScore:{type:Number,default:null},highlight:{type:String,default:null}},emits:["update:stats"],setup(r,{expose:e,emit:_}){const b=r,S=_,{processImage:s}=ue(),C=T(null),I=T(!1),E=T(null),p=T(!1),a=x(()=>E.value?.parsed||[]),i=x(()=>a.value.length?fe(a.value,b.weights):[]),h=x(()=>b.highlight==="winner"?"text-emerald-300":b.highlight==="tie"?"text-yellow-300":"text-gray-300"),t=x(()=>typeof b.totalScore=="number"?b.totalScore.toFixed(2):"--"),d=x(()=>b.highlight==="winner"?"border-emerald-500 ring-2 ring-emerald-400 bg-gray-800 shadow-lg":b.highlight==="tie"?"border-yellow-500 ring-2 ring-yellow-400 bg-gray-800":"border-gray-700 bg-gray-800"),u=async D=>{if(!D||!D.type.startsWith("image/"))return;const g=new FileReader;g.onload=H=>{C.value=H.target.result},g.readAsDataURL(D),I.value=!0,E.value=null;const A=await s(D);I.value=!1,E.value=A,A.success?S("update:stats",A.parsed):S("update:stats",A.parsed||[])},w=async D=>{const g=D.target.files[0];await u(g)},m=async D=>{p.value=!1;const g=D.dataTransfer?.files[0];g&&await u(g)},v=()=>{C.value=null,E.value=null,S("update:stats",[])};return e({hasImage:()=>!!C.value,processFile:async D=>{await u(D)}}),(D,g)=>(O(),L("div",{class:F(["rounded-lg p-6 border-2 transition-all",d.value])},[l("div",me,[l("h3",be,"Bracelet "+N(r.braceletNum),1),typeof r.totalScore=="number"?(O(),L("div",he,[g[3]||(g[3]=l("span",{class:"text-gray-400 mr-1"},"Score:",-1)),l("span",{class:F(h.value)},N(t.value),3)])):U("",!0)]),C.value?(O(),L("div",De,[l("div",we,[l("img",{src:C.value,alt:"Bracelet",class:"w-full h-full object-cover object-top rounded border border-gray-600"},null,8,ve),l("button",{onClick:v,class:"absolute top-2 right-2 bg-red-600 hover:bg-red-700 p-2 rounded-full"},[...g[6]||(g[6]=[l("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),I.value?(O(),L("div",Se,[...g[7]||(g[7]=[l("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-purple-500 border-t-transparent"},null,-1),l("p",{class:"text-gray-400 mt-2"},"Processing OCR...",-1)])])):E.value?(O(),L("div",Ce,[l("div",null,[l("h4",Ie," Parsed Stats: "+N(i.value.length)+" found ",1),i.value.length>0?(O(),L("div",Ee,[(O(!0),L(oe,null,ie(i.value,(A,H)=>(O(),L("div",{key:H,class:"text-sm"},[l("div",ke,[l("span",{class:F(["px-2 py-0.5 rounded text-xs font-semibold whitespace-nowrap",{"bg-blue-900 text-blue-300":A.category==="basic","bg-green-900 text-green-300":A.category==="combat","bg-purple-900 text-purple-300":A.category==="special","bg-orange-900 text-orange-300":A.category==="dps","bg-cyan-900 text-cyan-300":A.category==="support","bg-gray-700 text-gray-400":A.category==="low-value","bg-red-900 text-red-300":A.category==="unknown"}])},N(A.category),3),l("span",Le,N(A.display||A.raw),1),typeof A.contribution=="number"?(O(),L("span",Oe,N(A.contribution.toFixed(2)),1)):U("",!0)])]))),128))])):(O(),L("p",xe,"No stats detected"))]),l("details",Pe,[g[8]||(g[8]=l("summary",{class:"text-gray-400 cursor-pointer hover:text-gray-300"}," Raw OCR Output ",-1)),l("pre",Te,N(E.value.text),1)]),E.value.success?U("",!0):(O(),L("div",Re,[l("p",Ne,N(E.value.error),1)]))])):U("",!0)])):(O(),L("div",ye,[l("div",{class:F(["flex flex-col items-center justify-center h-64 border-2 border-dashed rounded-lg transition-colors",p.value?"border-purple-500 bg-purple-900/20":"border-gray-600"]),onDragenter:g[0]||(g[0]=W(A=>p.value=!0,["prevent"])),onDragover:g[1]||(g[1]=W(A=>p.value=!0,["prevent"])),onDragleave:g[2]||(g[2]=W(A=>p.value=!1,["prevent"])),onDrop:W(m,["prevent"])},[...g[4]||(g[4]=[Z('<label class="flex flex-col items-center justify-center cursor-pointer w-full h-full pointer-events-none"><svg class="w-12 h-12 text-gray-500 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg><span class="text-gray-400">Drag &amp; drop or Ctrl+V to paste</span><span class="text-gray-500 text-sm mt-1">or click below to browse</span></label>',1)])],34),l("label",Ae,[g[5]||(g[5]=l("span",{class:"block text-center text-purple-400 hover:text-purple-300 cursor-pointer text-sm"},"Browse files",-1)),l("input",{type:"file",class:"hidden",accept:"image/*",onChange:w},null,32)])]))],2))}},Me={class:"relative min-h-screen"},$e={class:"relative p-8"},Fe={class:"max-w-7xl mx-auto"},He={class:"mb-6 flex items-center justify-center gap-4"},Be={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},We={__name:"index",setup(r){const e=T([]),_=T([]),b=T(null),S=T(null),s=T("DPS"),C=x(()=>ge(s.value)),I=x(()=>z(e.value,C.value)),E=x(()=>z(_.value,C.value)),p=x(()=>e.value.length===0||_.value.length===0?null:I.value>E.value?1:E.value>I.value?2:0),a=x(()=>p.value===1?"winner":p.value===0?"tie":null),i=x(()=>p.value===2?"winner":p.value===0?"tie":null),h=async t=>{const d=t.clipboardData?.items;if(d){for(const u of d)if(u.type.startsWith("image/")){const w=u.getAsFile();b.value&&!b.value.hasImage()?(await b.value.processFile(w),t.preventDefault()):S.value&&!S.value.hasImage()&&(await S.value.processFile(w),t.preventDefault());break}}};return le(()=>window.addEventListener("paste",h)),ce(()=>window.removeEventListener("paste",h)),(t,d)=>(O(),L("div",Me,[d[9]||(d[9]=l("div",{class:"absolute inset-0 bg-black"},null,-1)),d[10]||(d[10]=l("div",{class:"pointer-events-none absolute inset-0 [background: radial-gradient(800px_520px_at_10%_0%,rgba(168,85,247,0.10),transparent_60%), radial-gradient(700px_460px_at_90%_10%,rgba(99,102,241,0.08),transparent_55%) ]"},null,-1)),l("div",$e,[l("div",Fe,[d[7]||(d[7]=l("div",{class:"text-center mb-8"},[l("h1",{class:"text-4xl font-bold text-white mb-2"}," Bracedle "),l("h2",{class:"text-1xl font-bold text-white mb-2"}," Lost Ark Bracelet Comparator "),l("p",{class:"text-gray-400"}," Upload bracelet screenshots to be told left or right better ")],-1)),l("div",He,[d[6]||(d[6]=l("span",{class:"text-sm text-gray-300"},"Role:",-1)),l("label",{class:F(["inline-flex items-center gap-2 px-3 py-1.5 rounded border cursor-pointer",s.value==="DPS"?"border-emerald-500 bg-emerald-900/20 text-emerald-200":"border-gray-600 text-gray-300"])},[V(l("input",{type:"radio",class:"hidden",value:"DPS","onUpdate:modelValue":d[0]||(d[0]=u=>s.value=u)},null,512),[[K,s.value]]),d[4]||(d[4]=l("span",null,"DPS",-1))],2),l("label",{class:F(["inline-flex items-center gap-2 px-3 py-1.5 rounded border cursor-pointer",s.value==="Support"?"border-cyan-500 bg-cyan-900/20 text-cyan-200":"border-gray-600 text-gray-300"])},[V(l("input",{type:"radio",class:"hidden",value:"Support","onUpdate:modelValue":d[1]||(d[1]=u=>s.value=u)},null,512),[[K,s.value]]),d[5]||(d[5]=l("span",null,"Support",-1))],2)]),l("div",Be,[Y(j,{ref_key:"bracelet1Ref",ref:b,"bracelet-num":1,weights:C.value,"total-score":I.value,highlight:a.value,"onUpdate:stats":d[2]||(d[2]=u=>e.value=u)},null,8,["weights","total-score","highlight"]),Y(j,{ref_key:"bracelet2Ref",ref:S,"bracelet-num":2,weights:C.value,"total-score":E.value,highlight:i.value,"onUpdate:stats":d[3]||(d[3]=u=>_.value=u)},null,8,["weights","total-score","highlight"])]),d[8]||(d[8]=Z('<div class="mt-8 bg-gray-900/70 border border-gray-700 rounded p-4"><h4 class="text-sm font-semibold text-purple-300">Upload tips for best OCR results</h4><ul class="mt-2 text-xs text-gray-300 list-disc list-inside space-y-1"><li>Crop tightly around the bracelet text (no background/UI).</li><li>Use 100% zoom or higher; avoid scaled or blurred screenshots.</li><li>Avoid overlapping cursors on the bracelet panel.</li><li>Upload a <span class="font-semibold">PNG</span> if possible.</li><li>Ensure the blue bullet icon is visible for <em>every</em> line.</li><li>Do not use Forced 21:9 in non-ultrawide setups as the screenshot will be too unclear for the OCR.</li></ul></div>',1))])])]))}};export{We as default};
