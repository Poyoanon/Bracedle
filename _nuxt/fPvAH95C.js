import{F as ne,r as T,k as O,y as x,z as L,A as l,G as U,B as N,H,I as Z,J as W,K as se,L as ie,o as le,M as ce,N as K,O as Y,C as z,E as G}from"#entry";const ue=()=>{const r=async p=>{try{const{default:a}=await ne(async()=>{const{default:m}=await import("./DeY5ceUu.js").then(v=>v.i);return{default:m}},[],import.meta.url),{data:{text:i}}=await a.recognize(p,"eng",{logger:m=>console.log(m),tessedit_pageseg_mode:6,tessedit_char_whitelist:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%+.,/'-(): "}),y=e(i),t=d(y),_=t.filter(m=>m.category==="unknown"),u=t.map(m=>{const v=k(m.raw),R=h(m.raw);return{...m,id:v.id||null,display:R,strict_ok:v.ok,strict_category:v.category||m.category,why:v.why||""}}),C=u.filter(m=>!m.strict_ok);return _.length>0||C.length>0?{success:!1,error:I({unknowns:_,mismatches:C}),text:i,parsed:u}:{success:!0,text:i,parsed:u.map(({strict_category:m,...v})=>({...v,category:m,display:h(v.raw)}))}}catch(a){return console.error("OCR Error:",a),{success:!1,error:a.message,text:"",parsed:[]}}},e=p=>{const i=p.normalize("NFKC").replace(/\r/g,`
`).replace(/[“”]/g,'"').replace(/[’]/g,"'").replace(/\+\s+(\d+)/g,"+$1").replace(/\+(\d+)\s+(\d{1,2})%/g,"+$1.$2%").replace(/([A-Za-z])([+\-]\d)/g,"$1 $2").replace(/(\d),(\d{3})(?=[^\d]|$)/g,"$1$2").split(`
`).map(f=>f.trim()).filter(Boolean),y="['\"`‘’“”\\s]*",t="(?:[@©®]|8(?=\\s*[A-Za-z])|9(?=\\s*[A-Za-z]))",_=new RegExp(`^${y}${t}\\s*`),u=new RegExp(`^${y}${t}\\s*`),C=/^[\s"'`‘’“”]+/,m=/(Item Tier|tem Tier|Restricted Trading|Bound to Character|Untradable|Ancient|Radiant|Bracelet Bonus|Ark Passive Points Effect|Bonus cannot be granted\.?)/i,v=f=>f.replace(/\(Shield[^)]*\)/gi,c=>{const E=/HP\s*Regen/i.test(c),P=/Incoming\s+Damage\s+Reduction/i.test(c);return E&&P?"(Shield, HP Regen, Incoming Damage Reduction)":c}),R=f=>{let c=f;c=c.replace(/^(Crit(?!\s*(?:Rate|Damage|Hit))|Specialization|Swiftness|Domination|Endurance|Expertise)\s+(\d{2,3})\b/i,(P,M,$)=>`${M} +${$}`),c=c.replace(/^(Intelligence|Strength|Dexterity|Vitality)\s+(\d{3,6})\b/i,(P,M,$)=>`${M} +${$}`),c=c.replace(/^(Max HP)\s+(\d{4,6})\b/i,(P,M,$)=>`${M} +${$}`);const E=new RegExp("^("+["Intelligence","Strength","Dexterity","Vitality","Max HP","Weapon Power","Crit","Specialization","Swiftness","Domination","Endurance","Expertise"].join("|")+")\\s*[:;=]\\s*(\\d+)\\b","i");return c=c.replace(E,(P,M,$)=>`${M} +${$}`),c=v(c),c=c.replace(/\bAtk\s*\/\s*Move Speed\b/gi,"Atk./Move Speed"),c=c.replace(/\bAtk_\.?\s*Power\b/gi,"Atk. Power"),c=c.replace(/\bAtk[_·•]\s*/gi,"Atk. "),c},F=[];let b="",g=!1;for(let f=0;f<i.length;f++){let c=i[f];if(m.test(c)){b&&(F.push(b.trim()),b="");continue}const E=_.test(c);if(!g){if(E){g=!0;const P=c.replace(u,"").trim();b=R(P)}continue}if(E){b&&F.push(b.trim());const P=c.replace(u,"").trim();b=R(P)}else{if(c=c.replace(C,""),m.test(c)){b&&(F.push(b.trim()),b="");continue}b+=(b?" ":"")+R(c)}}b&&F.push(b.trim());const A=f=>/^(?:Crit(?!\s*(?:Rate|Damage|Hit))|Specialization|Swiftness)\s*\+\d+(?:\.\d+)?\b/i.test(f),B=f=>/^(Intelligence|Strength|Dexterity)\s*\+\d+/i.test(f),X=f=>/^Vitality\s*\+\d+/i.test(f),Q=f=>/^Max HP\s*\+\d{4,6}$/i.test(f),ee=f=>/\bAtk\.?\/Move Speed\b/i.test(f),te=f=>/(Targets that already have|party-wide|Ally|Enhancement|target's (?:Defense|Crit Resistance|Crit Damage)\s*-[\d.]+%)/i.test(f),re=f=>/(Additional Damage|Crit Rate|Crit Damage|Crit Hit Damage|Weapon Power|Outgoing Damage|Back Attack|Frontal|Non-direction(?:al)?|Skill cooldown)/i.test(f),ae=f=>/(Domination|Endurance|Expertise|Combat Resource|Natural Recovery|Mag\. Defense|Phy\. Defense|Challenge or lower|Paralysis|Push Immunity|Movement Skill\/Stand Up cooldown|Incoming Damage from Challenge or lower monsters|Combat HP Recovery)/i.test(f),oe=f=>f.replace(/\s+%/g,"%").replace(/\s{2,}/g," ").trim();return F.map(f=>{const c=oe(f);let E="unknown";return B(c)?E="basic":X(c)||Q(c)?E="low-value":A(c)?E="combat":te(c)?E="support":ee(c)?E="special":re(c)?E="dps":ae(c)&&(E="low-value"),{raw:c,category:E}})},d=p=>{const a=i=>i.replace(/^(\d)(\d{3})$/,"$1,$2");return p.map(({raw:i,category:y})=>{let t=i;return t=t.replace(/^['"“”‘’]+(?=\S)/,""),t=t.replace(new RegExp(`(?<=\\S)['"“”‘’]+$`),""),t=t.replace(/(\.\s*)['"“”‘’]+(?=\S)/g,"$1"),t=t.replace(/[–−]/g,"-"),t=t.replace(/\bOn hit\.\s*(?=[A-Z])/gi,"On hit, "),t=t.replace(/\bAly\b/gi,"Ally"),t=t.replace(/getting\s+ht\b/gi,"getting hit"),t=t.replace(/\bAtk\s*\/\s*Move Speed\b/gi,"Atk./Move Speed"),t=t.replace(/(\d)\.\s*(\d+)%/g,"$1.$2%"),t=t.replace(/\bfor\s+Ss\b\.?/gi,"for 5s."),t=t.replace(/\bfor\s+5\b\.?/gi,"for 5s."),t=t.replace(/(Cooldown:\s*)(60|70|80)\b(?!s)/gi,"$1$2s"),t=t.replace(/(Cooldown:\s*)(60|70|80)5\b/gi,"$1$2s"),t=t.replace(/\+(\d)\s(\d{1,2})%/g,"+$1.$2%"),t=t.replace(/\(Shield[^)]*\)/gi,u=>{const C=/HP\s*Regen/i.test(u),m=/Incoming\s+Damage\s+Reduction/i.test(u);return C&&m?"(Shield, HP Regen, Incoming Damage Reduction)":u}),t=t.replace(/Bonus vs\. Demons\/Archdemon/gi,"Bonus vs. Demon/Archdemon"),t=t.replace(/^Damage to Challenge or lower monsters\s*-\s*(4|5|6)%\.?$/i,"Damage to Challenge or lower monsters +$1%."),t=t.replace(/^Incoming Damage from Challenge or lower monsters\s*\+\s*(6|8|10)%\.?$/i,"Incoming Damage from Challenge or lower monsters -$1%."),t=t.replace(/(Incoming Damage from Challenge or lower monsters\s*-\s*)8\s*5%/i,"$18%"),t=t.replace(/\b(\d{1,3})\.(\d{3})\b/g,"$1,$2"),t=t.replace(/When your HP is 50% or higher\.\s*upon hit,/i,"When your HP is 50% or higher, upon hit,"),t=t.replace(/(On hit, Weapon Power \+)(\d{4})(, Atk\.\/Move Speed \+1% for 10s\. \(Max\. 6 stacks\))/,(u,C,m,v)=>C+a(m)+v),t=t.replace(/^(Weapon Power \+)(\d{4})(\. Upon hit, Weapon Power \+(?:130|140|150) for 120s every 30s\. \(Max\. 30 stacks\))$/,(u,C,m,v)=>C+a(m)+v),t=t.replace(/^Weapon Power \+(\d{4})\.(\s*When your HP is 50% or higher, upon hit, Weapon Power \+)(\d{4})(\s*for 5s\.)$/,(u,C,m,v,R)=>`Weapon Power +${a(C)}.${m}${a(v)}${R}`),t=t.replace(/\bNon-direction\b(?=\s+Skill Damage)/gi,"Non-directional"),t=t.replace(/(Movement Skill\/Stand Up cooldown)\s*-\s*(\d+)%/i,"$1 -$2%"),new RegExp("^(?:Intelligence|Strength|Dexterity|Vitality|Max HP|Crit(?!\\s*(?:Rate|Damage|Hit))|Specialization|Swiftness|Domination|Endurance|Expertise)\\s*\\+\\d{2,6}\\.$","i").test(t)&&(t=t.replace(/\.$/,"")),t=t.replace(/\s*Bonus can(?:not)? be granted\..*$/i,""),t=t.replace(/\s*Ark Passive Points Effect.*$/i,""),t=t.replace(/\s+%/g,"%").replace(/\s{2,}/g," ").trim(),{raw:t,category:y}})},h=p=>{let a=p;const i=[[/\bcrit hit damage\b/gi,"Crit Hit Damage"],[/\bcrit rate\b/gi,"Crit Rate"],[/\bcrit damage\b/gi,"Crit Damage"],[/\bintelligence\b/gi,"Intelligence"],[/\bstrength\b/gi,"Strength"],[/\bdexterity\b/gi,"Dexterity"],[/\bvitality\b/gi,"Vitality"],[/\bcrit\b/gi,"Crit"],[/\bspecialization\b/gi,"Specialization"],[/\bswiftness\b/gi,"Swiftness"],[/\bdomination\b/gi,"Domination"],[/\bendurance\b/gi,"Endurance"],[/\bexpertise\b/gi,"Expertise"],[/\bmax hp\b/gi,"Max HP"],[/\bweapon power\b/gi,"Weapon Power"],[/\batk\.?\s*\/\s*move speed\b/gi,"Atk./Move Speed"],[/\boutgoing damage\b/gi,"Outgoing Damage"],[/\bnon-directional\b/gi,"Non-directional"],[/\bnon-direction\b/gi,"Non-directional"],[/\bback attack\b/gi,"Back Attack"],[/\bfrontal attack\b/gi,"Frontal Attack"],[/\bskill cooldown\b/gi,"Skill cooldown"],[/\bally atk\. power enhancement effect\b/gi,"Ally Atk. Power Enhancement Effect"],[/\bally damage enhancement effect\b/gi,"Ally Damage Enhancement Effect"],[/\bally atk\. power enhancement\b/gi,"Ally Atk. Power Enhancement"],[/\bincoming damage reduction\b/gi,"Incoming Damage Reduction"],[/\bhp regen\b/gi,"HP Regen"],[/\bshield\b/gi,"Shield"],[/\bdemon\/archdemon\b/gi,"Demon/Archdemon"]];for(const[y,t]of i)a=a.replace(y,t);return a=a.replace(/\s+%/g,"%").replace(/\s{2,}/g," ").trim(),a},w=p=>`(?:${p.map(a=>String(a).replace(/(\d)(?=(\d{3})+$)/g,"$1,")).join("|")}|${p.join("|")})`,n={BASIC_MAIN:/^(Intelligence|Strength|Dexterity)\s*\+(\d{4,5})$/i,BASIC_VIT:/^Vitality\s*\+(\d{4,5})$/i,COMBAT:/^(Crit(?!\s*(?:Rate|Damage|Hit))|Specialization|Swiftness)\s*\+(\d{2,3})\.?$/i,ATK_MOVE:/^Atk\.\/Move Speed \+(?:4|5|6)%\.?$/i,ADDITIONAL_DMG:/^Additional Damage \+(?:3\.00|3\.50|4\.00)%\.?$/i,CRIT_DMG:/^Crit Damage \+(?:6\.80|8\.40|10\.00|6\.8|8\.4|10)%\.?$/i,CRIT_RATE:/^Crit Rate \+(?:3\.40|4\.20|5\.00|3\.4|4\.2|5)%\.?$/i,WEAPON_POWER_FLAT:new RegExp(`^Weapon Power \\+${w([7200,8100,9e3])}$`,"i"),BACK_ATTACK:/^Back Attack Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\.?$/i,FRONTAL:/^Frontal (?:Attack|Attck) Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\.?$/i,NON_DIRECTIONAL:/^Non-direction(?:al)? Skill Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\.? Awakening Skills do not apply\.?$/i,ON_HIT_WP_AMS:/^On hit, Weapon Power \+(?:1,?160|1,?320|1,?480), Atk\.\/Move Speed \+1% for 10s\. \(Max\. 6 stacks\)$/i,OUTGOING_SOLO:/^Outgoing Damage \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?$/i,OUTGOING_STAGG:/^Outgoing Damage \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\. Outgoing Damage \+(?:4(?:\.0)?|4\.5|5(?:\.0)?)% to Staggered foes\.?$/i,ADDITIONAL_DEMONS:/^Additional Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\. Bonus vs\. Demon\/Archdemon \+2\.5%\.?$/i,CDMG_PAIR:/^Crit Damage \+(?:6\.8|8\.4|10(?:\.0)?)%\. Crit Hit Damage \+1\.5%\.?$/i,CRATE_PAIR:/^Crit Rate \+(?:3\.4|4\.2|5(?:\.0)?)%\. Crit Hit Damage \+1\.5%\.?$/i,SKILL_COOLDOWN_OUT:/^Skill cooldown \+2%\. Outgoing Damage \+(?:4\.5|5(?:\.0)?|5\.5)%\.?$/i,WP_STACKING:new RegExp(`^Weapon Power \\+${w([6900,7800,8700])}\\. Upon hit, Weapon Power \\+(?:130|140|150) for 120s every 30s\\. \\(Max\\. 30 stacks\\)$`,"i"),WP_HP50:new RegExp(`^Weapon Power \\+${w([7200,8100,9e3])}\\. When your HP is 50% or higher, upon hit, Weapon Power \\+${w([2e3,2200,2400])} for 5s\\.$`,"i"),ALLY_ATK_ENH_EFFECT:/^Ally Atk\. Power Enhancement Effect \+(?:4\.00|5\.00|6\.00)%$/i,ALLY_DMG_ENH_EFFECT:/^Ally Damage Enhancement Effect \+(?:6\.00|7\.50|9\.00)%$/i,ON_HIT_DEBUFF_CD:/^On hit, target's Crit Damage -(?:3\.6|4\.2|4\.8)% for 8s\. This effect is limited to a single application per party\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,ON_HIT_DEBUFF_CR:/^On hit, target's Crit Resistance -(?:1\.8|2\.1|2\.5)% for 8s\. This effect is limited to a single application per party\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,ON_HIT_DEBUFF_DEF:/^On hit, target's Defense -(?:1\.8|2\.1|2\.5)% for 8s\. This effect is limited to a single application per party\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,TARGETS_PROTECTIVE:/^Targets that already have a party-wide protective effect \(Shield[ ,.]?\s*HP Regen[ ,.]?\s*Incoming Damage Reduction\) are granted Outgoing Damage \+(?:0\.9|1\.1|1\.3)% for 5s\. This effect is limited to a single application per party and does not apply to protective effects with no duration\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,LV_COMBAT:/^(Domination|Endurance|Expertise)\s*\+(\d{2,3})$/i,LV_HP_REC:/^Combat HP Recovery \+(?:100|130|160)$/i,LV_RESOURCE:/^Combat Resource Natural Recovery \+(?:8\.00|10\.00|12\.00)%$/i,LV_DEF_MAG:/^Mag\. Defense \+(?:5000|6000|7000)$/i,LV_DEF_PHY:/^Phy\. Defense \+(?:5000|6000|7000)$/i,LV_CHALLENGE_DMG:/^Damage to Challenge or lower monsters \+(?:4|5|6)%\.?$/i,LV_CHALLENGE_IN:/^Incoming Damage from Challenge or lower monsters \-(?:6|8|10)%\.?$/i,LV_IMMUNITY:/^On hit, Paralysis and Push Immunity for (?:80|70|60)s\. \(Cooldown: (?:80|70|60)s\) The effect is removed upon getting hit 1 time\.$/i,LV_MOVE_CD:/^Movement Skill\/Stand Up cooldown \-(?:8|10|12)%\.?$/i,LV_MAX_HP_FLAT:new RegExp(`^Max HP \\+${w([11200,14e3,16800])}$`,"i")},S=p=>p.charAt(0).toUpperCase()+p.slice(1).toLowerCase(),k=p=>{const a=p.trim();let i=a.match(n.BASIC_MAIN);if(i){const y=S(i[1]),t=parseInt(i[2],10);return t>=9600&&t<=16e3?{ok:!0,category:"basic",id:`basic:main:${y}`}:{ok:!1,why:`Basic stat out of range (9600–16000): ${t}`}}if(i=a.match(n.BASIC_VIT),i){const y=parseInt(i[1],10);return y>=4e3&&y<=6e3?{ok:!0,category:"low-value",id:"low:vit"}:{ok:!1,why:`Vitality out of range (4000–6000): ${y}`}}if(n.LV_MAX_HP_FLAT.test(a))return{ok:!0,category:"low-value",id:"low:max_hp_flat"};if(i=a.match(n.COMBAT),i){const y=S(i[1]),t=parseInt(i[i.length-1],10);return t>=61&&t<=120?{ok:!0,category:"combat",id:`combat:${y}`}:{ok:!1,why:`Combat stat out of range (61–120): ${t}`}}if(n.ATK_MOVE.test(a))return{ok:!0,category:"special",id:"special:atk_move_speed"};if(n.ADDITIONAL_DMG.test(a))return{ok:!0,category:"dps",id:"dps:additional_damage"};if(n.CRIT_DMG.test(a))return{ok:!0,category:"dps",id:"dps:crit_damage"};if(n.CRIT_RATE.test(a))return{ok:!0,category:"dps",id:"dps:crit_rate"};if(n.WEAPON_POWER_FLAT.test(a))return{ok:!0,category:"dps",id:"dps:weapon_power_flat"};if(n.BACK_ATTACK.test(a))return{ok:!0,category:"dps",id:"dps:back_attack"};if(n.FRONTAL.test(a))return{ok:!0,category:"dps",id:"dps:frontal_attack"};if(n.NON_DIRECTIONAL.test(a))return{ok:!0,category:"dps",id:"dps:non_direction"};if(n.ON_HIT_WP_AMS.test(a))return{ok:!0,category:"dps",id:"dps:onhit_wp_ams"};if(n.OUTGOING_SOLO.test(a))return{ok:!0,category:"dps",id:"dps:outgoing_damage"};if(n.OUTGOING_STAGG.test(a))return{ok:!0,category:"dps",id:"dps:outgoing_damage_staggered"};if(n.ADDITIONAL_DEMONS.test(a))return{ok:!0,category:"dps",id:"dps:additional_damage_demon"};if(n.CDMG_PAIR.test(a))return{ok:!0,category:"dps",id:"dps:crit_damage_plus_chd"};if(n.CRATE_PAIR.test(a))return{ok:!0,category:"dps",id:"dps:crit_rate_plus_chd"};if(n.SKILL_COOLDOWN_OUT.test(a))return{ok:!0,category:"dps",id:"dps:skill_cooldown_plus_outgoing"};if(n.WP_STACKING.test(a))return{ok:!0,category:"dps",id:"dps:weapon_power_stacking"};if(n.WP_HP50.test(a))return{ok:!0,category:"dps",id:"dps:weapon_power_hp50"};if(n.ALLY_ATK_ENH_EFFECT.test(a))return{ok:!0,category:"support",id:"support:ally_atk_enh_effect"};if(n.ALLY_DMG_ENH_EFFECT.test(a))return{ok:!0,category:"support",id:"support:ally_dmg_enh_effect"};if(n.ON_HIT_DEBUFF_CD.test(a))return{ok:!0,category:"support",id:"support:debuff_crit_damage"};if(n.ON_HIT_DEBUFF_CR.test(a))return{ok:!0,category:"support",id:"support:debuff_crit_resist"};if(n.ON_HIT_DEBUFF_DEF.test(a))return{ok:!0,category:"support",id:"support:debuff_defense"};if(n.TARGETS_PROTECTIVE.test(a))return{ok:!0,category:"support",id:"support:targets_protective"};if(i=a.match(n.LV_COMBAT),i){const y=S(i[1]),t=parseInt(i[2],10);return t>=61&&t<=120?{ok:!0,category:"low-value",id:`low:${y}`}:{ok:!1,why:`Low-value combat stat out of range (61–120): ${t}`}}return n.LV_HP_REC.test(a)?{ok:!0,category:"low-value",id:"low:combat_hp_recovery"}:n.LV_RESOURCE.test(a)?{ok:!0,category:"low-value",id:"low:combat_resource_recovery"}:n.LV_DEF_MAG.test(a)?{ok:!0,category:"low-value",id:"low:mag_defense"}:n.LV_DEF_PHY.test(a)?{ok:!0,category:"low-value",id:"low:phy_defense"}:n.LV_CHALLENGE_DMG.test(a)?{ok:!0,category:"low-value",id:"low:damage_to_challenge"}:n.LV_CHALLENGE_IN.test(a)?{ok:!0,category:"low-value",id:"low:incoming_damage_from_challenge"}:n.LV_IMMUNITY.test(a)?{ok:!0,category:"low-value",id:"low:paralysis_push_immunity"}:n.LV_MOVE_CD.test(a)?{ok:!0,category:"low-value",id:"low:movement_cooldown"}:{ok:!1,why:"Line does not match any canonical pattern"}},I=({unknowns:p,mismatches:a})=>{const i=p.map(u=>`• ${u.raw}  —  (unknown)`),y=a.map(u=>`• ${u.raw}  —  (not in canonical list${u.why?`: ${u.why}`:""})`),t=[...i,...y].slice(0,10).join(`
`)||"• (no preview available)",_=["Crop tightly around the bracelet text (no background/UI).","Use 100% zoom or higher; avoid scaled or blurred screenshots.","Avoid overlapping cursors on the bracelet panel.","Upload a PNG if possible.","Ensure the blue bullet icon is visible for every line."].map(u=>`- ${u}`).join(`
`);return["Couldn’t validate all lines against the canonical bracelet list. Please upload a cleaner, tightly-cropped screenshot.","","Problem lines:",t,"","Upload tips for best OCR results:",_].join(`
`)};return{processImage:r}},o=(r,e,d=.05)=>Math.abs(r-e)<=d,de=r=>Array.from(r.matchAll(/([+-]?\d+(?:\.\d+)?)%/g)).map(e=>parseFloat(e[1])),_e=r=>Array.from(r.matchAll(/\+(\d{1,3}(?:,\d{3})*|\d+)/g)).map(e=>parseInt(e[1].replace(/,/g,""),10)),s={ADD_DEMON_3_5:100,CD_PAIR_10_0:97,CR_PAIR_5_0:94,ADD_DEMON_3_0:91,CD_PAIR_8_4:88,CR_PAIR_3_4:88,ADD_DEMON_2_5:85,WP_HP50_7200_2000:82,SKILL_CD_OUT_5_5:79,CD_PAIR_6_8:76,WP_HP50_8100_2200:73,SKILL_CD_OUT_5_0:70,WP_STACK_8700:67,CD_SINGLE_10_0:64,CR_SINGLE_5_0:61,WP_FLAT_9000:58,WP_STACK_7800:55,BACK_3_5:54,FRONT_3_5:54,NONDIR_3_5:54,SKILL_CD_OUT_4_5:51,OUT_STAG_3_5:48,OUT_SOLO_3_0:48,WP_FLAT_8100:45,ADD_SINGLE_4_0:39,ONHIT_WP_AMS_1480:36,BACK_3_0:36,FRONT_3_0:36,NONDIR_3_0:36,WP_FLAT_7200:33,ADD_SINGLE_3_5:30,ONHIT_WP_AMS_1320:27,BACK_2_5:24,FRONT_2_5:24,NONDIR_2_5:24,ADD_SINGLE_3_0:21,ONHIT_WP_AMS_1160:18,OUT_STAG_2_4:15,OUT_SOLO_2_0:12,MAIN_16000:9,ATKMS_6:8,ATKMS_5:7,MAIN_13000:6,ATKMS_4:6,MAIN_10000:3},V={"dps:additional_damage_demon":({percents:r})=>{const e=r?.[0]??0;return o(e,3.5)?s.ADD_DEMON_3_5:o(e,3)?s.ADD_DEMON_3_0:o(e,2.5)?s.ADD_DEMON_2_5:e*10},"dps:crit_damage_plus_chd":({percents:r})=>{const e=r?.[0]??0;return o(e,10)?s.CD_PAIR_10_0:o(e,8.4)?s.CD_PAIR_8_4:o(e,6.8)?s.CD_PAIR_6_8:e*7+10},"dps:crit_rate_plus_chd":({percents:r})=>{const e=r?.[0]??0;return o(e,5)?s.CR_PAIR_5_0:o(e,3.4)?s.CR_PAIR_3_4:o(e,4.2)?86:e*6+8},"dps:weapon_power_hp50":({amounts:r})=>{const e=r?.[0]??0,d=r?.[1]??0;return e===7200&&d===2e3?s.WP_HP50_7200_2000:e===8100&&d===2200?s.WP_HP50_8100_2200:e===9e3&&d===2400?65:e/300+d/120},"dps:skill_cooldown_plus_outgoing":({percents:r})=>{const e=r||[],d=e.length>=2?e[1]:e[0]||0;return o(d,5.5)?s.SKILL_CD_OUT_5_5:o(d,5)?s.SKILL_CD_OUT_5_0:o(d,4.5)?s.SKILL_CD_OUT_4_5:d*10},"dps:weapon_power_stacking":({amounts:r})=>{const e=r?.[0]??0;return e===8700?s.WP_STACK_8700:e===7800?s.WP_STACK_7800:e===6900?47:e/180},"dps:crit_damage":({percents:r})=>{const e=r?.[0]??0;return o(e,10)?s.CD_SINGLE_10_0:o(e,8.4)?50:o(e,6.8)?40:e*5},"dps:crit_rate":({percents:r})=>{const e=r?.[0]??0;return o(e,5)?s.CR_SINGLE_5_0:o(e,4.2)?42:o(e,3.4)?30:e*4.5},"dps:outgoing_damage_staggered":({percents:r})=>{const e=r?.[0]??0,d=r?.[1]??0;return o(e,3)&&o(d,5)?s.OUT_STAG_3_5:o(e,2)&&o(d,4)?s.OUT_STAG_2_4:e*8+d*4},"dps:outgoing_damage":({percents:r})=>{const e=r?.[0]??0;return o(e,3)?s.OUT_SOLO_3_0:o(e,2)?s.OUT_SOLO_2_0:o(e,2.5)?30:e*9},"dps:onhit_wp_ams":({amounts:r})=>{const e=r?.[0]??0;return e===1480?s.ONHIT_WP_AMS_1480:e===1320?s.ONHIT_WP_AMS_1320:e===1160?s.ONHIT_WP_AMS_1160:e/60},"dps:weapon_power_flat":({amounts:r})=>{const e=r?.[0]??0;return e===9e3?s.WP_FLAT_9000:e===8100?s.WP_FLAT_8100:e===7200?s.WP_FLAT_7200:e/160},"dps:back_attack":({percents:r})=>{const e=r?.[0]??0;return o(e,3.5)?s.BACK_3_5:o(e,3)?s.BACK_3_0:o(e,2.5)?s.BACK_2_5:e*7},"dps:frontal_attack":({percents:r})=>{const e=r?.[0]??0;return o(e,3.5)?s.FRONT_3_5:o(e,3)?s.FRONT_3_0:o(e,2.5)?s.FRONT_2_5:e*7},"dps:non_direction":({percents:r})=>{const e=r?.[0]??0;return o(e,3.5)?s.NONDIR_3_5:o(e,3)?s.NONDIR_3_0:o(e,2.5)?s.NONDIR_2_5:e*7},"special:atk_move_speed":({percents:r})=>{const e=r?.[0]??0;return o(e,6)?s.ATKMS_6:o(e,5)?s.ATKMS_5:o(e,4)?s.ATKMS_4:e},"basic:main:Intelligence":({amounts:r})=>{const e=r?.[0]??0;return e>=15800?s.MAIN_16000:e>=12800?s.MAIN_13000:e>=9600?s.MAIN_10000:0},"basic:main:Strength":({amounts:r})=>V["basic:main:Intelligence"]({amounts:r}),"basic:main:Dexterity":({amounts:r})=>V["basic:main:Intelligence"]({amounts:r}),"dps:additional_damage":({percents:r})=>{const e=r?.[0]??0;return o(e,4)?s.ADD_SINGLE_4_0:o(e,3.5)?s.ADD_SINGLE_3_5:o(e,3)?s.ADD_SINGLE_3_0:e*7}},D={CD_DEBUFF_LOW:110,CD_DEBUFF_MID:115,CD_DEBUFF_HIGH:120,CR_DEBUFF_LOW:104,CR_DEBUFF_MID:109,CR_DEBUFF_HIGH:114,DEF_DEBUFF_LOW:100,DEF_DEBUFF_MID:105,DEF_DEBUFF_HIGH:110,CHEERS_LOW:96,CHEERS_MID:101,CHEERS_HIGH:106,ALLY_DMG_6:80,ALLY_DMG_7_5:86,ALLY_DMG_9:92,ALLY_ATK_4:60,ALLY_ATK_5:66,ALLY_ATK_6:72,WP_ANY_SMALL:25,MAIN_SMALL:12},pe={"support:debuff_crit_damage":({percents:r})=>{const e=Math.abs(r?.[0]??0);return o(e,4.8)?D.CD_DEBUFF_HIGH:o(e,4.2)?D.CD_DEBUFF_MID:o(e,3.6)?D.CD_DEBUFF_LOW:e*20},"support:debuff_crit_resist":({percents:r})=>{const e=Math.abs(r?.[0]??0);return o(e,2.5)?D.CR_DEBUFF_HIGH:o(e,2.1)?D.CR_DEBUFF_MID:o(e,1.8)?D.CR_DEBUFF_LOW:e*25},"support:debuff_defense":({percents:r})=>{const e=Math.abs(r?.[0]??0);return o(e,2.5)?D.DEF_DEBUFF_HIGH:o(e,2.1)?D.DEF_DEBUFF_MID:o(e,1.8)?D.DEF_DEBUFF_LOW:e*24},"support:targets_protective":({percents:r})=>{const e=Math.abs(r?.[0]??0);return o(e,1.3)?D.CHEERS_HIGH:o(e,1.1)?D.CHEERS_MID:o(e,.9)?D.CHEERS_LOW:e*70},"support:ally_dmg_enh_effect":({percents:r})=>{const e=Math.abs(r?.[0]??0);return o(e,9)?D.ALLY_DMG_9:o(e,7.5)?D.ALLY_DMG_7_5:o(e,6)?D.ALLY_DMG_6:e*8.5},"support:ally_atk_enh_effect":({percents:r})=>{const e=Math.abs(r?.[0]??0);return o(e,6)?D.ALLY_ATK_6:o(e,5)?D.ALLY_ATK_5:o(e,4)?D.ALLY_ATK_4:e*6},"dps:weapon_power_flat":()=>D.WP_ANY_SMALL,"dps:weapon_power_stacking":()=>D.WP_ANY_SMALL,"dps:onhit_wp_ams":()=>D.WP_ANY_SMALL,"dps:weapon_power_hp50":()=>D.WP_ANY_SMALL,"basic:main:Intelligence":()=>D.MAIN_SMALL,"basic:main:Strength":()=>D.MAIN_SMALL,"basic:main:Dexterity":()=>D.MAIN_SMALL},ge=(r="DPS")=>{const e={},d=h=>{Object.entries(h).forEach(([w,n])=>{e[w]={score:(S,k)=>n(S,k)}})};return d(r==="Support"?pe:V),e},q=(r,e)=>{const d=r.id||"",h=(r.raw||r.display||"").trim(),w=de(h),n=_e(h),S=!!Object.keys(e||{}).find(i=>i.startsWith("support:"));let k=0;const I=h.match(/^\s*(Intelligence|Strength|Dexterity)\s*\+(\d{1,3}(?:,\d{3})+|\d{4,6})\s*\.?\s*$/i);if(I){const i=parseInt(I[2].replace(/,/g,""),10);S?k=12:i>=15800?k=9:i>=12800?k=6:i>=9600&&(k=3)}let p=0;const a=e?.[d];if(a&&typeof a.score=="function")try{p=Number(a.score({percents:w,amounts:n,text:h},r))||0}catch{p=0}return Math.max(p,k)},j=(r,e)=>(r||[]).reduce((d,h)=>d+q(h,e),0),fe=(r,e)=>[...r||[]].map(d=>({...d,contribution:q(d,e)})).sort((d,h)=>(h.contribution??0)-(d.contribution??0)),me={class:"flex items-center justify-between mb-4"},be={class:"text-lg font-semibold text-white"},he={key:0,class:"text-sm"},ye={key:0,class:"relative"},De={class:"block mt-2"},Ae={key:1},ve={class:"relative mb-4 h-64 overflow-hidden"},we=["src"],Se={key:0,class:"text-center py-8"},ke={key:1,class:"space-y-4"},Ie={class:"text-sm font-semibold text-purple-400 mb-2"},Ce={key:0,class:"bg-gray-900 rounded p-3 space-y-2"},Ee={class:"flex items-start gap-2"},xe={class:"text-gray-300 flex-1"},Le={key:0,class:"text-xs text-gray-400 ml-2 shrink-0"},Oe={key:1,class:"text-gray-500 text-sm"},Pe={class:"text-sm"},Te={class:"mt-2 bg-gray-900 rounded p-3 text-xs text-gray-400 overflow-x-auto max-h-48 overflow-y-auto"},Re={key:0,class:"bg-red-900/20 border border-red-700 text-red-200 text-sm rounded p-3"},Ne={class:"whitespace-pre-line"},J={__name:"BraceletUpload",props:{braceletNum:{type:Number,required:!0},weights:{type:Object,default:()=>({})},totalScore:{type:Number,default:null},highlight:{type:String,default:null}},emits:["update:stats"],setup(r,{expose:e,emit:d}){const h=r,w=d,{processImage:n}=ue(),S=T(null),k=T(!1),I=T(null),p=T(!1),a=O(()=>I.value?.parsed||[]),i=O(()=>a.value.length?fe(a.value,h.weights):[]),y=O(()=>h.highlight==="winner"?"text-emerald-300":h.highlight==="tie"?"text-yellow-300":"text-gray-300"),t=O(()=>typeof h.totalScore=="number"?h.totalScore.toFixed(2):"--"),_=O(()=>h.highlight==="winner"?"border-emerald-500 ring-2 ring-emerald-400 bg-gray-800 shadow-lg":h.highlight==="tie"?"border-yellow-500 ring-2 ring-yellow-400 bg-gray-800":"border-gray-700 bg-gray-800"),u=async b=>{if(!b||!b.type.startsWith("image/"))return;const g=new FileReader;g.onload=B=>{S.value=B.target.result},g.readAsDataURL(b),k.value=!0,I.value=null;const A=await n(b);k.value=!1,I.value=A,A.success?w("update:stats",A.parsed):w("update:stats",A.parsed||[])},C=async b=>{const g=b.target.files[0];await u(g)},m=async b=>{p.value=!1;const g=b.dataTransfer?.files[0];g&&await u(g)},v=()=>{S.value=null,I.value=null,w("update:stats",[])};return e({hasImage:()=>!!S.value,processFile:async b=>{await u(b)}}),(b,g)=>(L(),x("div",{class:H(["rounded-lg p-6 border-2 transition-all",_.value])},[l("div",me,[l("h3",be,"Bracelet "+N(r.braceletNum),1),typeof r.totalScore=="number"?(L(),x("div",he,[g[3]||(g[3]=l("span",{class:"text-gray-400 mr-1"},"Score:",-1)),l("span",{class:H(y.value)},N(t.value),3)])):U("",!0)]),S.value?(L(),x("div",Ae,[l("div",ve,[l("img",{src:S.value,alt:"Bracelet",class:"w-full h-full object-cover object-top rounded border border-gray-600"},null,8,we),l("button",{onClick:v,class:"absolute top-2 right-2 bg-red-600 hover:bg-red-700 p-2 rounded-full"},[...g[6]||(g[6]=[l("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),k.value?(L(),x("div",Se,[...g[7]||(g[7]=[l("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-purple-500 border-t-transparent"},null,-1),l("p",{class:"text-gray-400 mt-2"},"Processing OCR...",-1)])])):I.value?(L(),x("div",ke,[l("div",null,[l("h4",Ie," Parsed Stats: "+N(i.value.length)+" found ",1),i.value.length>0?(L(),x("div",Ce,[(L(!0),x(se,null,ie(i.value,(A,B)=>(L(),x("div",{key:B,class:"text-sm"},[l("div",Ee,[l("span",{class:H(["px-2 py-0.5 rounded text-xs font-semibold whitespace-nowrap",{"bg-blue-900 text-blue-300":A.category==="basic","bg-green-900 text-green-300":A.category==="combat","bg-purple-900 text-purple-300":A.category==="special","bg-orange-900 text-orange-300":A.category==="dps","bg-cyan-900 text-cyan-300":A.category==="support","bg-gray-700 text-gray-400":A.category==="low-value","bg-red-900 text-red-300":A.category==="unknown"}])},N(A.category),3),l("span",xe,N(A.display||A.raw),1),typeof A.contribution=="number"?(L(),x("span",Le,N(A.contribution.toFixed(2)),1)):U("",!0)])]))),128))])):(L(),x("p",Oe,"No stats detected"))]),l("details",Pe,[g[8]||(g[8]=l("summary",{class:"text-gray-400 cursor-pointer hover:text-gray-300"}," Raw OCR Output ",-1)),l("pre",Te,N(I.value.text),1)]),I.value.success?U("",!0):(L(),x("div",Re,[l("p",Ne,N(I.value.error),1)]))])):U("",!0)])):(L(),x("div",ye,[l("div",{class:H(["flex flex-col items-center justify-center h-64 border-2 border-dashed rounded-lg transition-colors",p.value?"border-purple-500 bg-purple-900/20":"border-gray-600"]),onDragenter:g[0]||(g[0]=W(A=>p.value=!0,["prevent"])),onDragover:g[1]||(g[1]=W(A=>p.value=!0,["prevent"])),onDragleave:g[2]||(g[2]=W(A=>p.value=!1,["prevent"])),onDrop:W(m,["prevent"])},[...g[4]||(g[4]=[Z('<label class="flex flex-col items-center justify-center cursor-pointer w-full h-full pointer-events-none"><svg class="w-12 h-12 text-gray-500 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg><span class="text-gray-400">Drag &amp; drop or Ctrl+V to paste</span><span class="text-gray-500 text-sm mt-1">or click below to browse</span></label>',1)])],34),l("label",De,[g[5]||(g[5]=l("span",{class:"block text-center text-purple-400 hover:text-purple-300 cursor-pointer text-sm"},"Browse files",-1)),l("input",{type:"file",class:"hidden",accept:"image/*",onChange:C},null,32)])]))],2))}},Me={class:"min-h-screen p-8 bg-gradient-to-br from-gray-950 via-[#0b0020] to-black"},$e={class:"max-w-7xl mx-auto pb-24"},Fe={class:"mb-6 flex items-center justify-center gap-4"},He={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ue={__name:"index",setup(r){const e=T([]),d=T([]),h=T(null),w=T(null),n=T("DPS"),S=O(()=>ge(n.value)),k=O(()=>j(e.value,S.value)),I=O(()=>j(d.value,S.value)),p=O(()=>e.value.length===0||d.value.length===0?null:k.value>I.value?1:I.value>k.value?2:0),a=O(()=>p.value===1?"winner":p.value===0?"tie":null),i=O(()=>p.value===2?"winner":p.value===0?"tie":null),y=async t=>{const _=t.clipboardData?.items;if(_){for(const u of _)if(u.type.startsWith("image/")){const C=u.getAsFile();h.value&&!h.value.hasImage()?(await h.value.processFile(C),t.preventDefault()):w.value&&!w.value.hasImage()&&(await w.value.processFile(C),t.preventDefault());break}}};return le(()=>window.addEventListener("paste",y)),ce(()=>window.removeEventListener("paste",y)),(t,_)=>(L(),x("div",Me,[l("div",$e,[_[7]||(_[7]=l("div",{class:"text-center mb-8"},[l("h1",{class:"text-4xl font-bold text-white mb-2"},"Bracedle (Beta)"),l("h2",{class:"text-1xl font-bold text-white mb-2"},"Lost Ark Bracelet Comparator"),l("p",{class:"text-gray-400"},"Upload bracelet screenshots to be told left or right better")],-1)),l("div",Fe,[_[6]||(_[6]=l("span",{class:"text-sm text-gray-300"},"Role:",-1)),l("label",{class:H(["inline-flex items-center gap-2 px-3 py-1.5 rounded border cursor-pointer transition-colors",n.value==="DPS"?"border-emerald-500 bg-emerald-900/20 text-emerald-200":"border-gray-600 text-gray-300 hover:border-gray-500"])},[K(l("input",{type:"radio",class:"hidden",value:"DPS","onUpdate:modelValue":_[0]||(_[0]=u=>n.value=u)},null,512),[[Y,n.value]]),_[4]||(_[4]=l("span",null,"DPS",-1))],2),l("label",{class:H(["inline-flex items-center gap-2 px-3 py-1.5 rounded border cursor-pointer transition-colors",n.value==="Support"?"border-cyan-500 bg-cyan-900/20 text-cyan-200":"border-gray-600 text-gray-300 hover:border-gray-500"])},[K(l("input",{type:"radio",class:"hidden",value:"Support","onUpdate:modelValue":_[1]||(_[1]=u=>n.value=u)},null,512),[[Y,n.value]]),_[5]||(_[5]=l("span",null,"Support",-1))],2)]),l("div",He,[z(J,{ref_key:"bracelet1Ref",ref:h,"bracelet-num":1,weights:S.value,"total-score":k.value,highlight:a.value,"onUpdate:stats":_[2]||(_[2]=u=>e.value=u)},null,8,["weights","total-score","highlight"]),z(J,{ref_key:"bracelet2Ref",ref:w,"bracelet-num":2,weights:S.value,"total-score":I.value,highlight:i.value,"onUpdate:stats":_[3]||(_[3]=u=>d.value=u)},null,8,["weights","total-score","highlight"])]),_[8]||(_[8]=Z('<div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-4"><div class="bg-gray-900/70 border border-gray-700 rounded p-4"><h4 class="text-sm font-semibold text-purple-300">Upload tips for best OCR results</h4><ul class="mt-2 text-xs text-gray-300 list-disc list-inside space-y-1"><li>Crop tightly around the bracelet text (no background/UI).</li><li>Use 100% zoom or higher; avoid scaled or blurred screenshots.</li><li>Avoid overlapping cursors on the bracelet panel.</li><li>Upload a <span class="font-semibold">PNG</span> if possible.</li><li>Ensure the blue bullet icon is visible for <em>every</em> line.</li><li>Do not use Forced 21:9 in non-ultrawide setups (too blurry for OCR).</li></ul></div><div class="bg-gray-900/70 border border-gray-700 rounded p-4"><h4 class="text-sm font-semibold text-purple-300">Disclaimer</h4><ul class="mt-2 text-xs text-gray-300 list-disc list-inside space-y-1"><li>This is not a true bracelet calculator, just a simple comparator.</li><li>Does not account for Blunt Thorn, Supersonic Breakthrough, etc.</li><li>Does not account for class specifics that may value stats differently.</li><li>Meant as a lazy quick way to decide left vs. right (no spreadsheets).</li><li>If you want something more accurate, there are plenty of bracelet calculators that have been created by the community for that purpose with more inputs to personalize your stats.</li></ul></div></div>',1))]),_[9]||(_[9]=l("footer",{class:"fixed bottom-0 inset-x-0 z-50 border-t border-white/10 bg-black/60 backdrop-blur supports-[backdrop-filter]:bg-black/40"},[l("div",{class:"mx-auto max-w-7xl px-4 sm:px-6 py-2.5 text-center text-sm text-gray-200"},[G(" Yell at me for bugfixes on the "),l("a",{href:"https://discord.com/invite/loanexus",target:"_blank",rel:"noopener noreferrer",class:"underline decoration-dotted underline-offset-2 hover:text-white"},"Nexus Discord"),G(" or "),l("a",{href:"https://ko-fi.com/poyoanon",target:"_blank",rel:"noopener noreferrer",class:"underline decoration-dotted underline-offset-2 hover:text-white"},"support me"),G(" for whatever reason. ")])],-1))]))}};export{Ue as default};
