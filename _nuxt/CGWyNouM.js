import{F as se,r as P,k as O,y as x,z as L,A as i,G as U,B as R,H as F,I as J,J as G,K as ie,L as le,o as ce,M as ue,N as K,O as Y,C as j,E as W}from"#entry";const de=()=>{const r=async p=>{try{const{default:a}=await se(async()=>{const{default:b}=await import("./DeY5ceUu.js").then(k=>k.i);return{default:b}},[],import.meta.url),{data:{text:l}}=await a.recognize(p,"eng",{logger:b=>console.log(b),tessedit_pageseg_mode:6,tessedit_char_whitelist:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%+.,/'-(): "}),h=e(l),t=u(h),_=t.filter(b=>b.category==="unknown"),d=t.map(b=>{const k=S(b.raw),M=m(b.raw);return{...b,id:k.id||null,display:M,strict_ok:k.ok,strict_category:k.category||b.category,why:k.why||""}}),E=d.filter(b=>!b.strict_ok);return _.length>0||E.length>0?{success:!1,error:I({unknowns:_,mismatches:E}),text:l,parsed:d}:{success:!0,text:l,parsed:d.map(({strict_category:b,...k})=>({...k,category:b,display:m(k.raw)}))}}catch(a){return console.error("OCR Error:",a),{success:!1,error:a.message,text:"",parsed:[]}}},e=p=>{const l=p.normalize("NFKC").replace(/\r/g,`
`).replace(/[“”]/g,'"').replace(/[’]/g,"'").replace(/\+\s+(\d+)/g,"+$1").replace(/\+(\d+)\s+(\d{1,2})%/g,"+$1.$2%").replace(/([A-Za-z])([+\-]\d)/g,"$1 $2").replace(/(\d),(\d{3})(?=[^\d]|$)/g,"$1$2").split(`
`).map(f=>f.trim()).filter(Boolean),h="['\"`‘’“”\\s]*",t="(?:[@©®oOaA](?=[A-Z]|\\s+[A-Z])|8(?=\\s+[A-Z])|9(?=\\s+[A-Z]))",_=new RegExp(`^${h}${t}`),d=new RegExp(`^${h}${t}\\s*`),E=/^[\s"'`‘’“”]+/,b=/(Item Tier|tem Tier|Restricted Trading|Bound to Character|Untradable|Ancient|Radiant|Bracelet Bonus)/i,k=f=>f.replace(/\(Shield[^)]*\)/gi,c=>{const C=/HP\s*Regen/i.test(c),T=/Incoming\s+Damage\s+Reduction/i.test(c);return C&&T?"(Shield, HP Regen, Incoming Damage Reduction)":c}),M=f=>{let c=f;c=c.replace(/^(Crit(?!\s*(Rate|Damage|Hit))|Specialization|Swiftness|Domination|Endurance|Expertise)\s+(\d{2,3})\b/i,(T,N,$,ne)=>`${N} +${ne}`),c=c.replace(/^(Intelligence|Strength|Dexterity|Vitality)\s+(\d{3,6})\b/i,(T,N,$)=>`${N} +${$}`),c=c.replace(/^(Max HP)\s+(\d{4,6})\b/i,(T,N,$)=>`${N} +${$}`);const C=new RegExp("^("+["Intelligence","Strength","Dexterity","Vitality","Max HP","Weapon Power","Crit","Specialization","Swiftness","Domination","Endurance","Expertise"].join("|")+")\\s*[:;=]\\s*(\\d+)\\b","i");return c=c.replace(C,(T,N,$)=>`${N} +${$}`),c=k(c),c=c.replace(/\bAtk\s*\/\s*Move Speed\b/gi,"Atk./Move Speed"),c=c.replace(/\bAtk_\.?\s*Power\b/gi,"Atk. Power"),c=c.replace(/\bAtk[_·•]\s*/gi,"Atk. "),c},B=[];let A="",g=!1;for(let f=0;f<l.length;f++){let c=l[f];if(!g&&b.test(c))continue;const C=_.test(c);if(!g){if(C){g=!0;const T=c.replace(d,"").trim();A=M(T)}continue}if(C){A&&B.push(A.trim());const T=c.replace(d,"").trim();A=M(T)}else{if(c=c.replace(E,""),b.test(c))continue;A+=(A?" ":"")+M(c)}}A&&B.push(A.trim());const D=f=>/^(?:Crit(?!\s*(Rate|Damage|Hit))|Specialization|Swiftness)\s*\+\d+(?:\.\d+)?\b/i.test(f),H=f=>/^(Intelligence|Strength|Dexterity)\s*\+\d+/i.test(f),X=f=>/^Vitality\s*\+\d+/i.test(f),Q=f=>/^Max HP\s*\+\d{4,6}$/i.test(f),ee=f=>/\bAtk\.?\/Move Speed\b/i.test(f),te=f=>/(Targets that already have|party-wide|Ally|Enhancement|target's (?:Defense|Crit Resistance|Crit Damage)\s*-[\d.]+%)/i.test(f),re=f=>/(Additional Damage|Crit Rate|Crit Damage|Crit Hit Damage|Weapon Power|Outgoing Damage|Back Attack|Frontal|Non-direction(?:al)?|Skill cooldown)/i.test(f),ae=f=>/(Domination|Endurance|Expertise|Combat Resource|Natural Recovery|Mag\. Defense|Phy\. Defense|Challenge or lower|Paralysis|Push Immunity|Movement Skill\/Stand Up cooldown|Incoming Damage from Challenge or lower monsters|Combat HP Recovery)/i.test(f),oe=f=>f.replace(/\s+%/g,"%").replace(/\s{2,}/g," ").trim();return B.map(f=>{const c=oe(f);let C="unknown";return H(c)?C="basic":X(c)||Q(c)?C="low-value":D(c)?C="combat":te(c)?C="support":ee(c)?C="special":re(c)?C="dps":ae(c)&&(C="low-value"),{raw:c,category:C}})},u=p=>{const a=l=>l.replace(/^(\d)(\d{3})$/,"$1,$2");return p.map(({raw:l,category:h})=>{let t=l;return t=t.replace(/^['"“”‘’]+(?=\S)/,""),t=t.replace(new RegExp(`(?<=\\S)['"“”‘’]+$`),""),t=t.replace(/(\.\s*)['"“”‘’]+(?=\S)/g,"$1"),t=t.replace(/[–−]/g,"-"),t=t.replace(/\bOn hit\.\s*(?=[A-Z])/gi,"On hit, "),t=t.replace(/\bAly\b/gi,"Ally"),t=t.replace(/getting\s+ht\b/gi,"getting hit"),t=t.replace(/\bAtk\s*\/\s*Move Speed\b/gi,"Atk./Move Speed"),t=t.replace(/(\d)\.\s*(\d+)%/g,"$1.$2%"),t=t.replace(/\bfor\s+Ss\b\.?/gi,"for 5s."),t=t.replace(/\bfor\s+5\b\.?/gi,"for 5s."),t=t.replace(/(Cooldown:\s*)(60|70|80)\b(?!s)/gi,"$1$2s"),t=t.replace(/(Cooldown:\s*)(60|70|80)5\b/gi,"$1$2s"),t=t.replace(/\+(\d)\s(\d{1,2})%/g,"+$1.$2%"),t=t.replace(/\(Shield[^)]*\)/gi,d=>{const E=/HP\s*Regen/i.test(d),b=/Incoming\s+Damage\s+Reduction/i.test(d);return E&&b?"(Shield, HP Regen, Incoming Damage Reduction)":d}),t=t.replace(/Bonus vs\. Demons\/Archdemon/gi,"Bonus vs. Demon/Archdemon"),t=t.replace(/^Damage to Challenge or lower monsters\s*-\s*(4|5|6)%\.?$/i,"Damage to Challenge or lower monsters +$1%."),t=t.replace(/^Incoming Damage from Challenge or lower monsters\s*\+\s*(6|8|10)%\.?$/i,"Incoming Damage from Challenge or lower monsters -$1%."),t=t.replace(/(Incoming Damage from Challenge or lower monsters\s*-\s*)8\s*5%/i,"$18%"),t=t.replace(/\b(\d{1,3})\.(\d{3})\b/g,"$1,$2"),t=t.replace(/When your HP is 50% or higher\s*[.,]?\s*upon hit,/i,"When your HP is 50% or higher, upon hit,"),t=t.replace(/(Weapon Power \+)(\d{4})(?=[^\d]|$)/g,(d,E,b)=>E+a(b)),t=t.replace(/\bfor\s+5\b(?!s)/gi,"for 5s"),t=t.replace(/\bNon-direction\b(?=\s+Skill Damage)/gi,"Non-directional"),t=t.replace(/(Movement Skill\/Stand Up cooldown\s*-\s+)(\d+)%/i,(d,E,b)=>`Movement Skill/Stand Up cooldown -${b}%`),new RegExp("^(?:Intelligence|Strength|Dexterity|Vitality|Max HP|Crit(?!\\s*(Rate|Damage|Hit))|Specialization|Swiftness|Domination|Endurance|Expertise)\\s*\\+\\d{2,6}\\.$","i").test(t)&&(t=t.replace(/\.$/,"")),t=t.replace(/\s*Bonus cannot be granted\.\s*Ark Passive Points Effect.*$/i,""),t=t.replace(/\s+%/g,"%").replace(/\s{2,}/g," ").trim(),{raw:t,category:h}})},m=p=>{let a=p;const l=[[/\bcrit hit damage\b/gi,"Crit Hit Damage"],[/\bcrit rate\b/gi,"Crit Rate"],[/\bcrit damage\b/gi,"Crit Damage"],[/\bintelligence\b/gi,"Intelligence"],[/\bstrength\b/gi,"Strength"],[/\bdexterity\b/gi,"Dexterity"],[/\bvitality\b/gi,"Vitality"],[/\bcrit\b/gi,"Crit"],[/\bspecialization\b/gi,"Specialization"],[/\bswiftness\b/gi,"Swiftness"],[/\bdomination\b/gi,"Domination"],[/\bendurance\b/gi,"Endurance"],[/\bexpertise\b/gi,"Expertise"],[/\bmax hp\b/gi,"Max HP"],[/\bweapon power\b/gi,"Weapon Power"],[/\batk\.?\s*\/\s*move speed\b/gi,"Atk./Move Speed"],[/\boutgoing damage\b/gi,"Outgoing Damage"],[/\bnon-directional\b/gi,"Non-directional"],[/\bnon-direction\b/gi,"Non-directional"],[/\bback attack\b/gi,"Back Attack"],[/\bfrontal attack\b/gi,"Frontal Attack"],[/\bskill cooldown\b/gi,"Skill cooldown"],[/\bally atk\. power enhancement effect\b/gi,"Ally Atk. Power Enhancement Effect"],[/\bally damage enhancement effect\b/gi,"Ally Damage Enhancement Effect"],[/\bally atk\. power enhancement\b/gi,"Ally Atk. Power Enhancement"],[/\bincoming damage reduction\b/gi,"Incoming Damage Reduction"],[/\bhp regen\b/gi,"HP Regen"],[/\bshield\b/gi,"Shield"],[/\bdemon\/archdemon\b/gi,"Demon/Archdemon"]];for(const[h,t]of l)a=a.replace(h,t);return a=a.replace(/\s+%/g,"%").replace(/\s{2,}/g," ").trim(),a},v=p=>`(?:${p.map(a=>String(a).replace(/(\d)(?=(\d{3})+$)/g,"$1,")).join("|")}|${p.join("|")})`,n={BASIC_MAIN:/^(Intelligence|Strength|Dexterity)\s*\+(\d{4,5})$/i,BASIC_VIT:/^Vitality\s*\+(\d{4,5})$/i,COMBAT:/^(Crit(?!\s*(Rate|Damage|Hit))|Specialization|Swiftness)\s*\+(\d{2,3})\.?$/i,ATK_MOVE:/^Atk\.\/Move Speed \+(?:4|5|6)%\.?$/i,ADDITIONAL_DMG:/^Additional Damage \+(?:3\.00|3\.50|4\.00)%\.?$/i,CRIT_DMG:/^Crit Damage \+(?:6\.80|8\.40|10\.00|6\.8|8\.4|10)%\.?$/i,CRIT_RATE:/^Crit Rate \+(?:3\.40|4\.20|5\.00|3\.4|4\.2|5)%\.?$/i,WEAPON_POWER_FLAT:new RegExp(`^Weapon Power \\+${v([7200,8100,9e3])}\\.?$`,"i"),BACK_ATTACK:/^Back Attack Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\.?$/i,FRONTAL:/^Frontal (?:Attack|Attck) Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\.?$/i,NON_DIRECTIONAL:/^Non-direction(?:al)? Skill Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\.? Awakening Skills do not apply\.?$/i,ON_HIT_WP_AMS:/^On hit, Weapon Power \+(?:1,?160|1,?320|1,?480), Atk\.\/Move Speed \+1% for 10s\. \(Max\. 6 stacks\)$/i,OUTGOING_SOLO:/^Outgoing Damage \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?$/i,OUTGOING_STAGG:/^Outgoing Damage \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\. Outgoing Damage \+(?:4(?:\.0)?|4\.5|5(?:\.0)?)% to Staggered foes\.?$/i,ADDITIONAL_DEMONS:/^Additional Damage \+(?:2\.5|3(?:\.0)?|3\.5)%\. Bonus vs\. Demon\/Archdemon \+2\.5%\.?$/i,CDMG_PAIR:/^Crit Damage \+(?:6\.8|8\.4|10(?:\.0)?)%\. Crit Hit Damage \+1\.5%\.?$/i,CRATE_PAIR:/^Crit Rate \+(?:3\.4|4\.2|5(?:\.0)?)%\. Crit Hit Damage \+1\.5%\.?$/i,SKILL_COOLDOWN_OUT:/^Skill cooldown \+2%\. Outgoing Damage \+(?:4\.5|5(?:\.0)?|5\.5)%\.?$/i,WP_STACKING:new RegExp(`^Weapon Power \\+${v([6900,7800,8700])}\\. Upon hit, Weapon Power \\+(?:130|140|150) for 120s every 30s\\. \\(Max\\. 30 stacks\\)$`,"i"),WP_HP50:new RegExp(`^Weapon Power \\+${v([7200,8100,9e3])}\\. When your HP is 50% or higher, upon hit, Weapon Power \\+${v([2e3,2200,2400])} for 5s\\.$`,"i"),ALLY_ATK_ENH_EFFECT:/^Ally Atk\. Power Enhancement Effect \+(?:4\.00|5\.00|6\.00)%$/i,ALLY_DMG_ENH_EFFECT:/^Ally Damage Enhancement Effect \+(?:6\.00|7\.50|9\.00)%$/i,ON_HIT_DEBUFF_CD:/^On hit, target's Crit Damage -(?:3\.6|4\.2|4\.8)% for 8s\. This effect is limited to a single application per party\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,ON_HIT_DEBUFF_CR:/^On hit, target's Crit Resistance -(?:1\.8|2\.1|2\.5)% for 8s\. This effect is limited to a single application per party\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,ON_HIT_DEBUFF_DEF:/^On hit, target's Defense -(?:1\.8|2\.1|2\.5)% for 8s\. This effect is limited to a single application per party\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,TARGETS_PROTECTIVE:/^Targets that already have a party-wide protective effect \(Shield[ ,.]?\s*HP Regen[ ,.]?\s*Incoming Damage Reduction\) are granted Outgoing Damage \+(?:0\.9|1\.1|1\.3)% for 5s\. This effect is limited to a single application per party and does not apply to protective effects with no duration\. Ally Atk\. Power Enhancement \+(?:2(?:\.0)?|2\.5|3(?:\.0)?)%\.?(?:\s*Bonus can be granted.*)?$/i,LV_COMBAT:/^(Domination|Endurance|Expertise)\s*\+(\d{2,3})$/i,LV_HP_REC:/^Combat HP Recovery \+(?:100|130|160)$/i,LV_RESOURCE:/^Combat Resource Natural Recovery \+(?:8\.00|10\.00|12\.00)%$/i,LV_DEF_MAG:/^Mag\. Defense \+(?:5000|6000|7000)$/i,LV_DEF_PHY:/^Phy\. Defense \+(?:5000|6000|7000)$/i,LV_CHALLENGE_DMG:/^Damage to Challenge or lower monsters \+(?:4|5|6)%\.?$/i,LV_CHALLENGE_IN:/^Incoming Damage from Challenge or lower monsters \-(?:6|8|10)%\.?$/i,LV_IMMUNITY:/^On hit, Paralysis and Push Immunity for (?:80|70|60)s\. \(Cooldown: (?:80|70|60)s\) The effect is removed upon getting hit 1 time\.$/i,LV_MOVE_CD:/^Movement Skill\/Stand Up cooldown \-(?:8|10|12)%\.?$/i,LV_MAX_HP_FLAT:new RegExp(`^Max HP \\+${v([11200,14e3,16800])}$`,"i")},w=p=>p.charAt(0).toUpperCase()+p.slice(1).toLowerCase(),S=p=>{const a=p.trim();let l=a.match(n.BASIC_MAIN);if(l){const h=w(l[1]),t=parseInt(l[2],10);return t>=9600&&t<=16e3?{ok:!0,category:"basic",id:`basic:main:${h}`}:{ok:!1,why:`Basic stat out of range (9600–16000): ${t}`}}if(l=a.match(n.BASIC_VIT),l){const h=parseInt(l[1],10);return h>=4e3&&h<=6e3?{ok:!0,category:"low-value",id:"low:vit"}:{ok:!1,why:`Vitality out of range (4000–6000): ${h}`}}if(n.LV_MAX_HP_FLAT.test(a))return{ok:!0,category:"low-value",id:"low:max_hp_flat"};if(l=a.match(n.COMBAT),l){const h=w(l[1]),t=parseInt(l[3],10);return t>=61&&t<=120?{ok:!0,category:"combat",id:`combat:${h}`}:{ok:!1,why:`Combat stat out of range (61–120): ${t}`}}if(n.ATK_MOVE.test(a))return{ok:!0,category:"special",id:"special:atk_move_speed"};if(n.ADDITIONAL_DMG.test(a))return{ok:!0,category:"dps",id:"dps:additional_damage"};if(n.CRIT_DMG.test(a))return{ok:!0,category:"dps",id:"dps:crit_damage"};if(n.CRIT_RATE.test(a))return{ok:!0,category:"dps",id:"dps:crit_rate"};if(n.WEAPON_POWER_FLAT.test(a))return{ok:!0,category:"dps",id:"dps:weapon_power_flat"};if(n.BACK_ATTACK.test(a))return{ok:!0,category:"dps",id:"dps:back_attack"};if(n.FRONTAL.test(a))return{ok:!0,category:"dps",id:"dps:frontal_attack"};if(n.NON_DIRECTIONAL.test(a))return{ok:!0,category:"dps",id:"dps:non_direction"};if(n.ON_HIT_WP_AMS.test(a))return{ok:!0,category:"dps",id:"dps:onhit_wp_ams"};if(n.OUTGOING_SOLO.test(a))return{ok:!0,category:"dps",id:"dps:outgoing_damage"};if(n.OUTGOING_STAGG.test(a))return{ok:!0,category:"dps",id:"dps:outgoing_damage_staggered"};if(n.ADDITIONAL_DEMONS.test(a))return{ok:!0,category:"dps",id:"dps:additional_damage_demon"};if(n.CDMG_PAIR.test(a))return{ok:!0,category:"dps",id:"dps:crit_damage_plus_chd"};if(n.CRATE_PAIR.test(a))return{ok:!0,category:"dps",id:"dps:crit_rate_plus_chd"};if(n.SKILL_COOLDOWN_OUT.test(a))return{ok:!0,category:"dps",id:"dps:skill_cooldown_plus_outgoing"};if(n.WP_STACKING.test(a))return{ok:!0,category:"dps",id:"dps:weapon_power_stacking"};if(n.WP_HP50.test(a))return{ok:!0,category:"dps",id:"dps:weapon_power_hp50"};if(n.ALLY_ATK_ENH_EFFECT.test(a))return{ok:!0,category:"support",id:"support:ally_atk_enh_effect"};if(n.ALLY_DMG_ENH_EFFECT.test(a))return{ok:!0,category:"support",id:"support:ally_dmg_enh_effect"};if(n.ON_HIT_DEBUFF_CD.test(a))return{ok:!0,category:"support",id:"support:debuff_crit_damage"};if(n.ON_HIT_DEBUFF_CR.test(a))return{ok:!0,category:"support",id:"support:debuff_crit_resist"};if(n.ON_HIT_DEBUFF_DEF.test(a))return{ok:!0,category:"support",id:"support:debuff_defense"};if(n.TARGETS_PROTECTIVE.test(a))return{ok:!0,category:"support",id:"support:targets_protective"};if(l=a.match(n.LV_COMBAT),l){const h=w(l[1]),t=parseInt(l[2],10);return t>=61&&t<=120?{ok:!0,category:"low-value",id:`low:${h}`}:{ok:!1,why:`Low-value combat stat out of range (61–120): ${t}`}}return n.LV_HP_REC.test(a)?{ok:!0,category:"low-value",id:"low:combat_hp_recovery"}:n.LV_RESOURCE.test(a)?{ok:!0,category:"low-value",id:"low:combat_resource_recovery"}:n.LV_DEF_MAG.test(a)?{ok:!0,category:"low-value",id:"low:mag_defense"}:n.LV_DEF_PHY.test(a)?{ok:!0,category:"low-value",id:"low:phy_defense"}:n.LV_CHALLENGE_DMG.test(a)?{ok:!0,category:"low-value",id:"low:damage_to_challenge"}:n.LV_CHALLENGE_IN.test(a)?{ok:!0,category:"low-value",id:"low:incoming_damage_from_challenge"}:n.LV_IMMUNITY.test(a)?{ok:!0,category:"low-value",id:"low:paralysis_push_immunity"}:n.LV_MOVE_CD.test(a)?{ok:!0,category:"low-value",id:"low:movement_cooldown"}:{ok:!1,why:"Line does not match any canonical pattern"}},I=({unknowns:p,mismatches:a})=>{const l=p.map(d=>`• ${d.raw}  —  (unknown)`),h=a.map(d=>`• ${d.raw}  —  (not in canonical list${d.why?`: ${d.why}`:""})`),t=[...l,...h].slice(0,10).join(`
`)||"• (no preview available)",_=["Crop tightly around the bracelet text (no background/UI).","Use 100% zoom or higher; avoid scaled or blurred screenshots.","Avoid overlapping cursors on the bracelet panel.","Upload a PNG if possible.","Ensure the blue bullet icon is visible for every line."].map(d=>`- ${d}`).join(`
`);return["Couldn’t validate all lines against the canonical bracelet list. Please upload a cleaner, tightly-cropped screenshot.","","Problem lines:",t,"","Upload tips for best OCR results:",_].join(`
`)};return{processImage:r}},o=(r,e,u=.05)=>Math.abs(r-e)<=u,_e=r=>Array.from(r.matchAll(/([+-]?\d+(?:\.\d+)?)%/g)).map(e=>parseFloat(e[1])),pe=r=>Array.from(r.matchAll(/\+(\d{1,3}(?:,\d{3})*|\d+)/g)).map(e=>parseInt(e[1].replace(/,/g,""),10)),s={ADD_DEMON_3_5:100,CD_PAIR_10_0:97,CR_PAIR_5_0:94,ADD_DEMON_3_0:91,CD_PAIR_8_4:88,CR_PAIR_3_4:88,ADD_DEMON_2_5:85,WP_HP50_7200_2000:82,SKILL_CD_OUT_5_5:79,CD_PAIR_6_8:76,WP_HP50_8100_2200:73,SKILL_CD_OUT_5_0:70,WP_STACK_8700:67,CD_SINGLE_10_0:64,CR_SINGLE_5_0:61,WP_FLAT_9000:58,WP_STACK_7800:55,BACK_3_5:54,FRONT_3_5:54,NONDIR_3_5:54,SKILL_CD_OUT_4_5:51,OUT_STAG_3_5:48,OUT_SOLO_3_0:48,WP_FLAT_8100:45,ADD_SINGLE_4_0:39,ONHIT_WP_AMS_1480:36,BACK_3_0:36,FRONT_3_0:36,NONDIR_3_0:36,WP_FLAT_7200:33,ADD_SINGLE_3_5:30,ONHIT_WP_AMS_1320:27,BACK_2_5:24,FRONT_2_5:24,NONDIR_2_5:24,ADD_SINGLE_3_0:21,ONHIT_WP_AMS_1160:18,OUT_STAG_2_4:15,OUT_SOLO_2_0:12,MAIN_16000:9,ATKMS_6:8,ATKMS_5:7,MAIN_13000:6,ATKMS_4:6,MAIN_10000:3},V={"dps:additional_damage_demon":({percents:r})=>{const e=r?.[0]??0;return o(e,3.5)?s.ADD_DEMON_3_5:o(e,3)?s.ADD_DEMON_3_0:o(e,2.5)?s.ADD_DEMON_2_5:e*10},"dps:crit_damage_plus_chd":({percents:r})=>{const e=r?.[0]??0;return o(e,10)?s.CD_PAIR_10_0:o(e,8.4)?s.CD_PAIR_8_4:o(e,6.8)?s.CD_PAIR_6_8:e*7+10},"dps:crit_rate_plus_chd":({percents:r})=>{const e=r?.[0]??0;return o(e,5)?s.CR_PAIR_5_0:o(e,3.4)?s.CR_PAIR_3_4:o(e,4.2)?86:e*6+8},"dps:weapon_power_hp50":({amounts:r})=>{const e=r?.[0]??0,u=r?.[1]??0;return e===7200&&u===2e3?s.WP_HP50_7200_2000:e===8100&&u===2200?s.WP_HP50_8100_2200:e===9e3&&u===2400?65:e/300+u/120},"dps:skill_cooldown_plus_outgoing":({percents:r})=>{const e=r||[],u=e.length>=2?e[1]:e[0]||0;return o(u,5.5)?s.SKILL_CD_OUT_5_5:o(u,5)?s.SKILL_CD_OUT_5_0:o(u,4.5)?s.SKILL_CD_OUT_4_5:u*10},"dps:weapon_power_stacking":({amounts:r})=>{const e=r?.[0]??0;return e===8700?s.WP_STACK_8700:e===7800?s.WP_STACK_7800:e===6900?47:e/180},"dps:crit_damage":({percents:r})=>{const e=r?.[0]??0;return o(e,10)?s.CD_SINGLE_10_0:o(e,8.4)?50:o(e,6.8)?40:e*5},"dps:crit_rate":({percents:r})=>{const e=r?.[0]??0;return o(e,5)?s.CR_SINGLE_5_0:o(e,4.2)?42:o(e,3.4)?30:e*4.5},"dps:outgoing_damage_staggered":({percents:r})=>{const e=r?.[0]??0,u=r?.[1]??0;return o(e,3)&&o(u,5)?s.OUT_STAG_3_5:o(e,2)&&o(u,4)?s.OUT_STAG_2_4:e*8+u*4},"dps:outgoing_damage":({percents:r})=>{const e=r?.[0]??0;return o(e,3)?s.OUT_SOLO_3_0:o(e,2)?s.OUT_SOLO_2_0:o(e,2.5)?30:e*9},"dps:onhit_wp_ams":({amounts:r})=>{const e=r?.[0]??0;return e===1480?s.ONHIT_WP_AMS_1480:e===1320?s.ONHIT_WP_AMS_1320:e===1160?s.ONHIT_WP_AMS_1160:e/60},"dps:weapon_power_flat":({amounts:r})=>{const e=r?.[0]??0;return e===9e3?s.WP_FLAT_9000:e===8100?s.WP_FLAT_8100:e===7200?s.WP_FLAT_7200:e/160},"dps:back_attack":({percents:r})=>{const e=r?.[0]??0;return o(e,3.5)?s.BACK_3_5:o(e,3)?s.BACK_3_0:o(e,2.5)?s.BACK_2_5:e*7},"dps:frontal_attack":({percents:r})=>{const e=r?.[0]??0;return o(e,3.5)?s.FRONT_3_5:o(e,3)?s.FRONT_3_0:o(e,2.5)?s.FRONT_2_5:e*7},"dps:non_direction":({percents:r})=>{const e=r?.[0]??0;return o(e,3.5)?s.NONDIR_3_5:o(e,3)?s.NONDIR_3_0:o(e,2.5)?s.NONDIR_2_5:e*7},"special:atk_move_speed":({percents:r})=>{const e=r?.[0]??0;return o(e,6)?s.ATKMS_6:o(e,5)?s.ATKMS_5:o(e,4)?s.ATKMS_4:e},"basic:main:Intelligence":({amounts:r})=>{const e=r?.[0]??0;return e>=15800?s.MAIN_16000:e>=12800?s.MAIN_13000:e>=9600?s.MAIN_10000:0},"basic:main:Strength":({amounts:r})=>V["basic:main:Intelligence"]({amounts:r}),"basic:main:Dexterity":({amounts:r})=>V["basic:main:Intelligence"]({amounts:r}),"dps:additional_damage":({percents:r})=>{const e=r?.[0]??0;return o(e,4)?s.ADD_SINGLE_4_0:o(e,3.5)?s.ADD_SINGLE_3_5:o(e,3)?s.ADD_SINGLE_3_0:e*7}},y={CD_DEBUFF_LOW:110,CD_DEBUFF_MID:115,CD_DEBUFF_HIGH:120,CR_DEBUFF_LOW:104,CR_DEBUFF_MID:109,CR_DEBUFF_HIGH:114,DEF_DEBUFF_LOW:100,DEF_DEBUFF_MID:105,DEF_DEBUFF_HIGH:110,CHEERS_LOW:96,CHEERS_MID:101,CHEERS_HIGH:106,ALLY_DMG_6:80,ALLY_DMG_7_5:86,ALLY_DMG_9:92,ALLY_ATK_4:60,ALLY_ATK_5:66,ALLY_ATK_6:72,WP_ANY_SMALL:25,MAIN_SMALL:12},ge={"support:debuff_crit_damage":({percents:r})=>{const e=Math.abs(r?.[0]??0);return o(e,4.8)?y.CD_DEBUFF_HIGH:o(e,4.2)?y.CD_DEBUFF_MID:o(e,3.6)?y.CD_DEBUFF_LOW:e*20},"support:debuff_crit_resist":({percents:r})=>{const e=Math.abs(r?.[0]??0);return o(e,2.5)?y.CR_DEBUFF_HIGH:o(e,2.1)?y.CR_DEBUFF_MID:o(e,1.8)?y.CR_DEBUFF_LOW:e*25},"support:debuff_defense":({percents:r})=>{const e=Math.abs(r?.[0]??0);return o(e,2.5)?y.DEF_DEBUFF_HIGH:o(e,2.1)?y.DEF_DEBUFF_MID:o(e,1.8)?y.DEF_DEBUFF_LOW:e*24},"support:targets_protective":({percents:r})=>{const e=Math.abs(r?.[0]??0);return o(e,1.3)?y.CHEERS_HIGH:o(e,1.1)?y.CHEERS_MID:o(e,.9)?y.CHEERS_LOW:e*70},"support:ally_dmg_enh_effect":({percents:r})=>{const e=Math.abs(r?.[0]??0);return o(e,9)?y.ALLY_DMG_9:o(e,7.5)?y.ALLY_DMG_7_5:o(e,6)?y.ALLY_DMG_6:e*8.5},"support:ally_atk_enh_effect":({percents:r})=>{const e=Math.abs(r?.[0]??0);return o(e,6)?y.ALLY_ATK_6:o(e,5)?y.ALLY_ATK_5:o(e,4)?y.ALLY_ATK_4:e*6},"dps:weapon_power_flat":()=>y.WP_ANY_SMALL,"dps:weapon_power_stacking":()=>y.WP_ANY_SMALL,"dps:onhit_wp_ams":()=>y.WP_ANY_SMALL,"dps:weapon_power_hp50":()=>y.WP_ANY_SMALL,"basic:main:Intelligence":()=>y.MAIN_SMALL,"basic:main:Strength":()=>y.MAIN_SMALL,"basic:main:Dexterity":()=>y.MAIN_SMALL},fe=(r="DPS")=>{const e={},u=m=>{Object.entries(m).forEach(([v,n])=>{e[v]={score:(w,S)=>n(w,S)}})};return u(r==="Support"?ge:V),e},q=(r,e)=>{const u=r.id||"",m=(r.raw||r.display||"").trim(),v=_e(m),n=pe(m),w=!!Object.keys(e||{}).find(l=>l.startsWith("support:"));let S=0;const I=m.match(/^\s*(Intelligence|Strength|Dexterity)\s*\+(\d{1,3}(?:,\d{3})+|\d{4,6})\s*\.?\s*$/i);if(I){const l=parseInt(I[2].replace(/,/g,""),10);w?S=12:l>=15800?S=9:l>=12800?S=6:l>=9600&&(S=3)}let p=0;const a=e?.[u];if(a&&typeof a.score=="function")try{p=Number(a.score({percents:v,amounts:n,text:m},r))||0}catch{p=0}return Math.max(p,S)},z=(r,e)=>(r||[]).reduce((u,m)=>u+q(m,e),0),me=(r,e)=>[...r||[]].map(u=>({...u,contribution:q(u,e)})).sort((u,m)=>(m.contribution??0)-(u.contribution??0)),be={class:"flex items-center justify-between mb-4"},he={class:"text-lg font-semibold text-white"},ye={key:0,class:"text-sm"},De={key:0,class:"relative"},Ae={class:"block mt-2"},ve={key:1},we={class:"relative mb-4 h-64 overflow-hidden"},Se=["src"],Ie={key:0,class:"text-center py-8"},Ce={key:1,class:"space-y-4"},Ee={class:"text-sm font-semibold text-purple-400 mb-2"},ke={key:0,class:"bg-gray-900 rounded p-3 space-y-2"},xe={class:"flex items-start gap-2"},Le={class:"text-gray-300 flex-1"},Oe={key:0,class:"text-xs text-gray-400 ml-2 shrink-0"},Te={key:1,class:"text-gray-500 text-sm"},Pe={class:"text-sm"},Re={class:"mt-2 bg-gray-900 rounded p-3 text-xs text-gray-400 overflow-x-auto max-h-48 overflow-y-auto"},Ne={key:0,class:"bg-red-900/20 border border-red-700 text-red-200 text-sm rounded p-3"},Me={class:"whitespace-pre-line"},Z={__name:"BraceletUpload",props:{braceletNum:{type:Number,required:!0},weights:{type:Object,default:()=>({})},totalScore:{type:Number,default:null},highlight:{type:String,default:null}},emits:["update:stats"],setup(r,{expose:e,emit:u}){const m=r,v=u,{processImage:n}=de(),w=P(null),S=P(!1),I=P(null),p=P(!1),a=O(()=>I.value?.parsed||[]),l=O(()=>a.value.length?me(a.value,m.weights):[]),h=O(()=>m.highlight==="winner"?"text-emerald-300":m.highlight==="tie"?"text-yellow-300":"text-gray-300"),t=O(()=>typeof m.totalScore=="number"?m.totalScore.toFixed(2):"--"),_=O(()=>m.highlight==="winner"?"border-emerald-500 ring-2 ring-emerald-400 bg-gray-800 shadow-lg":m.highlight==="tie"?"border-yellow-500 ring-2 ring-yellow-400 bg-gray-800":"border-gray-700 bg-gray-800"),d=async A=>{if(!A||!A.type.startsWith("image/"))return;const g=new FileReader;g.onload=H=>{w.value=H.target.result},g.readAsDataURL(A),S.value=!0,I.value=null;const D=await n(A);S.value=!1,I.value=D,D.success?v("update:stats",D.parsed):v("update:stats",D.parsed||[])},E=async A=>{const g=A.target.files[0];await d(g)},b=async A=>{p.value=!1;const g=A.dataTransfer?.files[0];g&&await d(g)},k=()=>{w.value=null,I.value=null,v("update:stats",[])};return e({hasImage:()=>!!w.value,processFile:async A=>{await d(A)}}),(A,g)=>(L(),x("div",{class:F(["rounded-lg p-6 border-2 transition-all",_.value])},[i("div",be,[i("h3",he,"Bracelet "+R(r.braceletNum),1),typeof r.totalScore=="number"?(L(),x("div",ye,[g[3]||(g[3]=i("span",{class:"text-gray-400 mr-1"},"Score:",-1)),i("span",{class:F(h.value)},R(t.value),3)])):U("",!0)]),w.value?(L(),x("div",ve,[i("div",we,[i("img",{src:w.value,alt:"Bracelet",class:"w-full h-full object-cover object-top rounded border border-gray-600"},null,8,Se),i("button",{onClick:k,class:"absolute top-2 right-2 bg-red-600 hover:bg-red-700 p-2 rounded-full"},[...g[6]||(g[6]=[i("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),S.value?(L(),x("div",Ie,[...g[7]||(g[7]=[i("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-purple-500 border-t-transparent"},null,-1),i("p",{class:"text-gray-400 mt-2"},"Processing OCR...",-1)])])):I.value?(L(),x("div",Ce,[i("div",null,[i("h4",Ee," Parsed Stats: "+R(l.value.length)+" found ",1),l.value.length>0?(L(),x("div",ke,[(L(!0),x(ie,null,le(l.value,(D,H)=>(L(),x("div",{key:H,class:"text-sm"},[i("div",xe,[i("span",{class:F(["px-2 py-0.5 rounded text-xs font-semibold whitespace-nowrap",{"bg-blue-900 text-blue-300":D.category==="basic","bg-green-900 text-green-300":D.category==="combat","bg-purple-900 text-purple-300":D.category==="special","bg-orange-900 text-orange-300":D.category==="dps","bg-cyan-900 text-cyan-300":D.category==="support","bg-gray-700 text-gray-400":D.category==="low-value","bg-red-900 text-red-300":D.category==="unknown"}])},R(D.category),3),i("span",Le,R(D.display||D.raw),1),typeof D.contribution=="number"?(L(),x("span",Oe,R(D.contribution.toFixed(2)),1)):U("",!0)])]))),128))])):(L(),x("p",Te,"No stats detected"))]),i("details",Pe,[g[8]||(g[8]=i("summary",{class:"text-gray-400 cursor-pointer hover:text-gray-300"}," Raw OCR Output ",-1)),i("pre",Re,R(I.value.text),1)]),I.value.success?U("",!0):(L(),x("div",Ne,[i("p",Me,R(I.value.error),1)]))])):U("",!0)])):(L(),x("div",De,[i("div",{class:F(["flex flex-col items-center justify-center h-64 border-2 border-dashed rounded-lg transition-colors",p.value?"border-purple-500 bg-purple-900/20":"border-gray-600"]),onDragenter:g[0]||(g[0]=G(D=>p.value=!0,["prevent"])),onDragover:g[1]||(g[1]=G(D=>p.value=!0,["prevent"])),onDragleave:g[2]||(g[2]=G(D=>p.value=!1,["prevent"])),onDrop:G(b,["prevent"])},[...g[4]||(g[4]=[J('<label class="flex flex-col items-center justify-center cursor-pointer w-full h-full pointer-events-none"><svg class="w-12 h-12 text-gray-500 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg><span class="text-gray-400">Drag &amp; drop or Ctrl+V to paste</span><span class="text-gray-500 text-sm mt-1">or click below to browse</span></label>',1)])],34),i("label",Ae,[g[5]||(g[5]=i("span",{class:"block text-center text-purple-400 hover:text-purple-300 cursor-pointer text-sm"},"Browse files",-1)),i("input",{type:"file",class:"hidden",accept:"image/*",onChange:E},null,32)])]))],2))}},$e={class:"min-h-screen p-8 bg-gradient-to-br from-gray-950 via-[#0b0020] to-black"},Fe={class:"max-w-7xl mx-auto pb-24"},He={class:"mb-6 flex items-center justify-center gap-4"},Be={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ge={__name:"index",setup(r){const e=P([]),u=P([]),m=P(null),v=P(null),n=P("DPS"),w=O(()=>fe(n.value)),S=O(()=>z(e.value,w.value)),I=O(()=>z(u.value,w.value)),p=O(()=>e.value.length===0||u.value.length===0?null:S.value>I.value?1:I.value>S.value?2:0),a=O(()=>p.value===1?"winner":p.value===0?"tie":null),l=O(()=>p.value===2?"winner":p.value===0?"tie":null),h=async t=>{const _=t.clipboardData?.items;if(_){for(const d of _)if(d.type.startsWith("image/")){const E=d.getAsFile();m.value&&!m.value.hasImage()?(await m.value.processFile(E),t.preventDefault()):v.value&&!v.value.hasImage()&&(await v.value.processFile(E),t.preventDefault());break}}};return ce(()=>window.addEventListener("paste",h)),ue(()=>window.removeEventListener("paste",h)),(t,_)=>(L(),x("div",$e,[i("div",Fe,[_[7]||(_[7]=i("div",{class:"text-center mb-8"},[i("h1",{class:"text-4xl font-bold text-white mb-2"},"Bracedle (Beta)"),i("h2",{class:"text-1xl font-bold text-white mb-2"},"Lost Ark Bracelet Comparator"),i("p",{class:"text-gray-400"},"Upload bracelet screenshots to be told left or right better")],-1)),i("div",He,[_[6]||(_[6]=i("span",{class:"text-sm text-gray-300"},"Role:",-1)),i("label",{class:F(["inline-flex items-center gap-2 px-3 py-1.5 rounded border cursor-pointer transition-colors",n.value==="DPS"?"border-emerald-500 bg-emerald-900/20 text-emerald-200":"border-gray-600 text-gray-300 hover:border-gray-500"])},[K(i("input",{type:"radio",class:"hidden",value:"DPS","onUpdate:modelValue":_[0]||(_[0]=d=>n.value=d)},null,512),[[Y,n.value]]),_[4]||(_[4]=i("span",null,"DPS",-1))],2),i("label",{class:F(["inline-flex items-center gap-2 px-3 py-1.5 rounded border cursor-pointer transition-colors",n.value==="Support"?"border-cyan-500 bg-cyan-900/20 text-cyan-200":"border-gray-600 text-gray-300 hover:border-gray-500"])},[K(i("input",{type:"radio",class:"hidden",value:"Support","onUpdate:modelValue":_[1]||(_[1]=d=>n.value=d)},null,512),[[Y,n.value]]),_[5]||(_[5]=i("span",null,"Support",-1))],2)]),i("div",Be,[j(Z,{ref_key:"bracelet1Ref",ref:m,"bracelet-num":1,weights:w.value,"total-score":S.value,highlight:a.value,"onUpdate:stats":_[2]||(_[2]=d=>e.value=d)},null,8,["weights","total-score","highlight"]),j(Z,{ref_key:"bracelet2Ref",ref:v,"bracelet-num":2,weights:w.value,"total-score":I.value,highlight:l.value,"onUpdate:stats":_[3]||(_[3]=d=>u.value=d)},null,8,["weights","total-score","highlight"])]),_[8]||(_[8]=J('<div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-4"><div class="bg-gray-900/70 border border-gray-700 rounded p-4"><h4 class="text-sm font-semibold text-purple-300">Upload tips for best OCR results</h4><ul class="mt-2 text-xs text-gray-300 list-disc list-inside space-y-1"><li>Crop tightly around the bracelet text (no background/UI).</li><li>Use 100% zoom or higher; avoid scaled or blurred screenshots.</li><li>Avoid overlapping cursors on the bracelet panel.</li><li>Upload a <span class="font-semibold">PNG</span> if possible.</li><li>Ensure the blue bullet icon is visible for <em>every</em> line.</li><li>Do not use Forced 21:9 in non-ultrawide setups (too blurry for OCR).</li></ul></div><div class="bg-gray-900/70 border border-gray-700 rounded p-4"><h4 class="text-sm font-semibold text-purple-300">Disclaimer</h4><ul class="mt-2 text-xs text-gray-300 list-disc list-inside space-y-1"><li>This is not a true bracelet calculator, just a simple comparator.</li><li>Does not account for Blunt Thorn, Supersonic Breakthrough, etc.</li><li>Does not account for class specifics that may value stats differently.</li><li>Meant as a lazy quick way to decide left vs. right (no spreadsheets).</li><li>If you want something more accurate, there are plenty of bracelet calculators that have been created by the community for that purpose with more inputs to personalize your stats.</li></ul></div></div>',1))]),_[9]||(_[9]=i("footer",{class:"fixed bottom-0 inset-x-0 z-50 border-t border-white/10 bg-black/60 backdrop-blur supports-[backdrop-filter]:bg-black/40"},[i("div",{class:"mx-auto max-w-7xl px-4 sm:px-6 py-2.5 text-center text-sm text-gray-200"},[W(" Yell at me for bugfixes on the "),i("a",{href:"https://discord.com/invite/loanexus",target:"_blank",rel:"noopener noreferrer",class:"underline decoration-dotted underline-offset-2 hover:text-white"},"Nexus Discord"),W(" or "),i("a",{href:"https://ko-fi.com/poyoanon",target:"_blank",rel:"noopener noreferrer",class:"underline decoration-dotted underline-offset-2 hover:text-white"},"support me"),W(" for whatever reason. ")])],-1))]))}};export{Ge as default};
